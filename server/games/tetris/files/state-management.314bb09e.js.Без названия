function e(){"use strict";(self.webpackChunkvkwidgets=self.webpackChunkvkwidgets||[]).push([[7974],{679005:(e,t,r)=>{r.d(t,{produce:()=>J});var n=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,s=(e,t,r)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,l=Symbol.for("immer-nothing"),c=Symbol.for("immer-draftable"),u=Symbol.for("immer-state");function f(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var d=Object.getPrototypeOf;function p(e){return!!e&&!!e[u]}function m(e){var t;return!!e&&(g(e)||Array.isArray(e)||!!e[c]||!!(null==(t=e.constructor)?void 0:t[c])||w(e)||S(e))}var h=Object.prototype.constructor.toString();function g(e){if(!e||"object"!=typeof e)return!1;const t=d(e);if(null===t)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===h}function y(e,t){0===v(e)?Object.entries(e).forEach((([r,n])=>{t(r,n,e)})):e.forEach(((r,n)=>t(n,r,e)))}function v(e){const t=e[u];return t?t.type_:Array.isArray(e)?1:w(e)?2:S(e)?3:0}function b(e,t){return 2===v(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function _(e,t,r){const n=v(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function w(e){return e instanceof Map}function S(e){return e instanceof Set}function k(e){return e.copy_||e.base_}function j(e,t){if(w(e))return new Map(e);if(S(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&g(e)){if(!d(e)){const t=Object.create(null);return Object.assign(t,e)}return((e,t)=>{for(var r in t||(t={}))o.call(t,r)&&s(e,r,t[r]);if(a)for(var r of a(t))i.call(t,r)&&s(e,r,t[r]);return e})({},e)}const r=Object.getOwnPropertyDescriptors(e);delete r[u];let n=Reflect.ownKeys(r);for(let t=0;t<n.length;t++){const a=n[t],o=r[a];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[a]})}return Object.create(d(e),r)}function O(e,t=!1){return P(e)||p(e)||!m(e)||(v(e)>1&&(e.set=e.add=e.clear=e.delete=x),Object.freeze(e),t&&y(e,((e,t)=>O(t,!0)))),e}function x(){f(2)}function P(e){return Object.isFrozen(e)}var A,$={};function z(e){const t=$[e];return t||f(0),t}function C(){return A}function E(e,t){t&&(z("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function M(e){N(e),e.drafts_.forEach(R),e.drafts_=null}function N(e){e===A&&(A=e.parent_)}function F(e){return A={drafts_:[],parent_:A,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function R(e){const t=e[u];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function q(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return void 0!==e&&e!==r?(r[u].modified_&&(M(t),f(4)),m(e)&&(e=D(t,e),t.parent_||B(t,e)),t.patches_&&z("Patches").generateReplacementPatches_(r[u].base_,e,t.patches_,t.inversePatches_)):e=D(t,r,[]),M(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==l?e:void 0}function D(e,t,r){if(P(t))return t;const n=t[u];if(!n)return y(t,((a,o)=>I(e,n,t,a,o,r))),t;if(n.scope_!==e)return t;if(!n.modified_)return B(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const t=n.copy_;let a=t,o=!1;3===n.type_&&(a=new Set(t),t.clear(),o=!0),y(a,((a,i)=>I(e,n,t,a,i,r,o))),B(e,t,!1),r&&e.patches_&&z("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function I(e,t,r,n,a,o,i){if(p(a)){const i=D(e,a,o&&t&&3!==t.type_&&!b(t.assigned_,n)?o.concat(n):void 0);if(_(r,n,i),!p(i))return;e.canAutoFreeze_=!1}else i&&r.add(a);if(m(a)&&!P(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;D(e,a),t&&t.scope_.parent_||B(e,a)}}function B(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&O(t,r)}var T={get(e,t){if(t===u)return e;const r=k(e);if(!b(r,t))return function(e,t,r){var n;const a=L(t,r);return a?"value"in a?a.value:null==(n=a.get)?void 0:n.call(e.draft_):void 0}(e,r,t);const n=r[t];return e.finalized_||!m(n)?n:n===W(e.base_,t)?(V(e),e.copy_[t]=G(n,e)):n},has(e,t){return t in k(e)},ownKeys(e){return Reflect.ownKeys(k(e))},set(e,t,r){const n=L(k(e),t);if(null==n?void 0:n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const n=W(k(e),t),i=null==n?void 0:n[u];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(((a=r)===(o=n)?0!==a||1/a==1/o:a!=a&&o!=o)&&(void 0!==r||b(e.base_,t)))return!0;V(e),U(e)}var a,o;return e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return void 0!==W(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,V(e),U(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=k(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty(){f(11)},getPrototypeOf(e){return d(e.base_)},setPrototypeOf(){f(12)}},K={};function W(e,t){const r=e[u];return(r?k(r):e)[t]}function L(e,t){if(!(t in e))return;let r=d(e);for(;r;){const e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=d(r)}}function U(e){e.modified_||(e.modified_=!0,e.parent_&&U(e.parent_))}function V(e){e.copy_||(e.copy_=j(e.base_,e.scope_.immer_.useStrictShallowCopy_))}y(T,((e,t)=>{K[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),K.deleteProperty=function(e,t){return K.set.call(this,e,t,void 0)},K.set=function(e,t,r){return T.set.call(this,e[0],t,r,e[0])};function G(e,t){const r=w(e)?z("MapSet").proxyMap_(e,t):S(e)?z("MapSet").proxySet_(e,t):function(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:C(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,o=T;r&&(a=[n],o=K);const{revoke:i,proxy:s}=Proxy.revocable(a,o);return n.draft_=s,n.revoke_=i,s}(e,t);return(t?t.scope_:C()).drafts_.push(r),r}function X(e){if(!m(e)||P(e))return e;const t=e[u];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=j(e,t.scope_.immer_.useStrictShallowCopy_)}else r=j(e,!0);return y(r,((e,t)=>{_(r,e,X(t))})),t&&(t.finalized_=!1),r}var H=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{if("function"==typeof e&&"function"!=typeof t){const r=t;t=e;const n=this;return function(e=r,...a){return n.produce(e,(e=>t.call(this,e,...a)))}}let n;if("function"!=typeof t&&f(6),void 0!==r&&"function"!=typeof r&&f(7),m(e)){const a=F(this),o=G(e,void 0);let i=!0;try{n=t(o),i=!1}finally{i?M(a):N(a)}return E(a,r),q(n,a)}if(!e||"object"!=typeof e){if(n=t(e),void 0===n&&(n=e),n===l&&(n=void 0),this.autoFreeze_&&O(n,!0),r){const t=[],a=[];z("Patches").generateReplacementPatches_(e,n,t,a),r(t,a)}return n}f(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...r)=>this.produceWithPatches(t,(t=>e(t,...r)));let r,n;return[this.produce(e,t,((e,t)=>{r=e,n=t})),r,n]},"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof(null==e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){m(e)||f(8),p(e)&&(e=function(e){p(e)||f(10);return X(e)}(e));const t=F(this),r=G(e,void 0);return r[u].isManual_=!0,N(t),r}finishDraft(e,t){const r=e&&e[u];r&&r.isManual_||f(9);const{scope_:n}=r;return E(n,t),q(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));const n=z("Patches").applyPatches_;return p(e)?n(e,t):this.produce(e,(e=>n(e,t)))}},J=H.produce;H.produceWithPatches.bind(H),H.setAutoFreeze.bind(H),H.setUseStrictShallowCopy.bind(H),H.applyPatches.bind(H),H.createDraft.bind(H),H.finishDraft.bind(H)},293721:(e,t,r)=>{r.d(t,{createGate:()=>w,useEvent:()=>h,useGate:()=>b,useStore:()=>g,useStoreMap:()=>v,useUnit:()=>y});var n=r(296540),a=r(32489),o=r(69242),i=r(19888);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(this,arguments)}function l(e,t,r,n){let o=[a.step.run({fn:e=>t(e)})];if(n&&o.unshift(n),r){let t=(0,a.createNode)({node:o}),n=e.graphite.id,i=r.additionalLinks,s=i[n]||[];return i[n]=s,s.push(t),()=>{let e=s.indexOf(t);-1!==e&&s.splice(e,1),(0,a.clearNode)(t)}}{let t=(0,a.createNode)({node:o,parent:[e],family:{owners:e}});return()=>{(0,a.clearNode)(t)}}}function c(e,t){return t.displayName=e,t}function u(e,t){a.is.store(e)||S("expect useStore argument to be a store");let r=n.useCallback((r=>l(e,r,t)),[e,t]),o=n.useCallback((()=>x(e,t)),[e,t]);return j(r,o,o)}function f(e,t){let r=a.is.unit(e),o={};r?o={unit:e}:"@@unitShape"in e?"function"==typeof e["@@unitShape"]?o=e["@@unitShape"]():S("expect @@unitShape to be a function"):o=e;let i=Array.isArray(o),c=n.useRef({stale:1,justSubscribed:0,scope:t}),[u,f,d,p,m]=n.useMemo((()=>{c.current.stale=1;let e=Array.isArray(o)?[]:{},r=[],n=[],i=[],s=[];for(let l in o){let c=o[l];a.is.unit(c)||S("expect useUnit argument to be a unit"),a.is.event(c)||a.is.effect(c)?(e[l]=t?(0,a.scopeBind)(c,{scope:t}):c,i.push(l),s.push(c)):(e[l]=null,r.push(l),n.push(c))}return[e,r,n,i,s]}),[c,t,...Object.keys(o),...Object.values(o)]),h=n.useRef({value:u,storeKeys:f,eventKeys:p,eventValues:m}),g=n.useCallback((e=>{let r=c.current;r.justSubscribed=1;let n=()=>{r.stale||(r.stale=1,e())},o=a.step.compute({priority:"sampler",batch:1}),i=d.map((e=>l(e,n,t,o)));return()=>{i.forEach((e=>e()))}}),[d,t,h,c]),y=n.useCallback((()=>{let e,n=h.current,a=c.current,o=0,l=n.value,g=n.storeKeys,y=n.eventKeys,v=n.eventValues,b=t!==a.scope;if(a.stale||a.justSubscribed||b){o=!a.justSubscribed||b,e=i?[...u]:s({},u),g.length===f.length&&y.length===p.length||(o=1);for(let r=0;r<f.length;r++){let n=x(d[r],t),a=f[r];o||(o=g.includes(a)?l[a]!==n:1),e[a]=n}for(let e=0;e<p.length;e++){let t=m[e],r=p[e];o||(o=y.includes(r)?v[y.indexOf(r)]!==t:1)}}return o&&(n.value=e),n.storeKeys=f,n.eventKeys=p,n.eventValues=m,a.stale=0,a.justSubscribed=!o,a.scope=t,r?n.value.unit:n.value}),[g,d,m,t,h,c]);return j(g,y,y)}function d([e,t],r){let o,i,s,c,u=P;t?(o=t,s=e,c=[]):({fn:o,store:s,keys:c,defaultValue:i,updateFilter:u=P}=e),a.is.store(s)||S("useStoreMap expects a store"),Array.isArray(c)||S("useStoreMap expects an array as keys"),"function"!=typeof o&&S("useStoreMap expects a function");let f=n.useCallback((e=>l(s,e,r)),[s,r]),d=n.useCallback((()=>x(s,r)),[s,r]),p=n.useRef(),m=n.useRef(),h=n.useRef(c);return O(f,d,d,(e=>{if(p.current!==e||!((e,t)=>{if(!e||!t||e.length!==t.length)return 0;let r=1;for(let n=0;n<e.length;n++)if(e[n]!==t[n]){r=0;break}return r})(h.current,c)){let t=o(e,c);void 0===t&&void 0!==i&&(t=i),p.current=e,h.current=c,void 0!==t&&(m.current=t)}return m.current}),((e,t)=>!u(t,e)))}function p(e,t={},r){let{open:a,close:o,set:i}=f({open:e.open,close:e.close,set:e.set},r),s=n.useMemo((()=>({open:a,close:o,set:i})),[e,a]),l=n.useRef({value:null,count:0});k((()=>(s.open(l.current.value),()=>s.close(l.current.value))),[s]),((e,t)=>{if(e===t)return 1;if("object"==typeof e&&null!==e&&"object"==typeof t&&null!==t){let r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return 0;for(let n=0;n<r.length;n++){let a=r[n];if(e[a]!==t[a])return 0}return 1}return 0})(l.current.value,t)||(l.current.value=t,l.current.count+=1),k((()=>{s.set(l.current.value)}),[l.current.count])}function m(e){let t=n.useContext(A);return e&&!t&&S("No scope found, consider adding <Provider> to app root"),t}function h(e,t){return((e,t)=>{if(!t)return e;let r=a.is.unit(e)||"object"!=typeof e?{event:e}:e;return n.useMemo((()=>{if(a.is.unit(e))return(0,a.scopeBind)(e,{scope:t});let r=Array.isArray(e)?[]:{};for(let n in e)r[n]=(0,a.scopeBind)(e[n],{scope:t});return r}),[t,...Object.keys(r),...Object.values(r)])})(e,m(null==t?void 0:t.forceScope))}function g(e,t){return u(e,m(null==t?void 0:t.forceScope))}function y(e,t){return f(e,m(null==t?void 0:t.forceScope))}function v(e,t){return d([e,t],m(null==e?void 0:e.forceScope))}function b(e,t={},r){return p(e,t,m(null==r?void 0:r.forceScope))}function _(e,t){let r=t?e:e[0];var n;(e=>{if(!e)throw Error("expect first argument be an object")})(z(n=r)||(e=>"function"==typeof e)(n));let a=r.or,o=r.and;if(o){let r=t?o:o[0];if(z(r)&&"and"in r){let r=_(o,t);e=r[0],a=s({},a,r[1])}else e=o}return[e,a]}function w(...e){return(({domain:e,defaultState:t,hook:r,mainConfig:n,maybeConfig:o})=>{function i(e){return r(i,e,m()),null}let s=C({or:o,and:n}),l=`${e?`${e.compositeName.fullName}/`:""}${s.name||"gate"}`,u=(0,a.createEvent)({name:`${l}.set`,sid:s.sid?`${s.sid}|set`:void 0}),f=(0,a.createEvent)({name:`${l}.open`,sid:s.sid?`${s.sid}|open`:void 0}),d=(0,a.createEvent)({name:`${l}.close`,sid:s.sid?`${s.sid}|close`:void 0}),p=(0,a.createStore)(Boolean(0),{name:`${l}.status`,serialize:"ignore"}).on(f,(()=>Boolean(1))).on(d,(()=>Boolean(0))),h=(0,a.createStore)(t,{name:`${l}.state`,sid:s.sid}).on(u,((e,t)=>t)).on(f,((e,t)=>t)).reset(d);if(e){let{hooks:t}=e;(0,a.launch)({target:[t.store,t.store,t.event,t.event,t.event],params:[p,h,f,d,u]})}return i.open=f,i.close=d,i.status=p,i.state=h,i.set=u,c(`Gate:${l}`,i)})(function(e,t){let r=t&&z(n=t[0])&&(n.and||n.or)?t:[{and:t}];var n;let a,[[o,i],s]=_(r),l={},c={},u=s;var f;return"string"==typeof o?(c={name:o},z(f=i)&&"sid"in f||(l=i||{})):(e=>z(e)&&("domain"in e||"defaultState"in e||"name"in e))(o)&&(c=o,l=o.defaultState||{},a=o.domain),{hook:e,domain:a,defaultState:l,mainConfig:c,maybeConfig:u}}(p,e))}let S=e=>{throw Error(e)},k="undefined"!=typeof window?n.useLayoutEffect:n.useEffect;const{useSyncExternalStore:j}=i,{useSyncExternalStoreWithSelector:O}=o,x=(e,t)=>t?t.getState(e):e.getState(),P=(e,t)=>e!==t,A=n.createContext(null);let{Provider:$}=A,z=e=>"object"==typeof e&&null!==e,C=(e,t={})=>(z(e)&&(C(e.or,t),(e=>{for(let a in e)n=a,(e=>void 0===e)(r=e[a])||"or"===n||"and"===n||(t[n]=r);var r,n})(e),C(e.and,t)),t)},32489:(e,t,r)=>{function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}function a(e,t){for(let r in e)t(e[r],r)}function o(e,t){e.forEach(t)}function i(e,t){if(!e)throw Error(t)}function s({node:e=[],from:t,source:r,parent:n=t||r,to:a,target:i,child:s=a||i,scope:l={},meta:c={},family:u={type:"regular"},regional:f}={}){let d=de(n),p=de(u.links),m=de(u.owners),h=[];o(e,(e=>e&&Z(h,e)));let g={id:oe(),seq:h,next:de(s),meta:c,scope:l,family:{type:u.type||"crosslink",links:p,owners:m}};return o(p,(e=>Z(M(e),g))),o(m,(e=>Z(N(e),g))),o(d,(e=>Z(e.next,g))),f&&se&&fe(R(se),[g]),g}function l(e,t,r){let n,a=Xe,i=null,s=Le;if(e.target&&(t=e.params,r=e.defer,n=e.meta,a="page"in e?e.page:a,e.stack&&(i=e.stack),s=I(e)||s,e=e.target),s&&Le&&s!==Le&&(Le=null),Array.isArray(e))for(let r=0;r<e.length;r++)Be("pure",a,E(e[r]),i,t[r],s,n);else Be("pure",a,E(e),i,t,s,n);if(r&&!Ue)return;let l,c,u,f,d,p,m={isRoot:Ue,currentPage:Xe,scope:Le,isWatch:Ve,isPure:Ge};Ue=0;e:for(;f=Ie();){let{idx:e,stack:t,type:r}=f;u=t.node,Xe=d=t.page,Le=I(t),d?p=d.reg:Le&&(p=Le.reg);let n=!!d,a=!!Le,i={fail:0,scope:u.scope};l=c=0;for(let o=e;o<u.seq.length&&!l;o++){let s=u.seq[o];if(s.order){let{priority:n,barrierID:a}=s.order,i=a?d?`${d.fullID}_${a}`:a:0;if(o!==e||r!==n){a?We.has(i)||(We.add(i),Te(o,t,n,a)):Te(o,t,n);continue e}a&&We.delete(i)}switch(s.type){case"mov":{let e,r=s.data;switch(r.from){case C:e=R(t);break;case"a":case"b":e=t[r.from];break;case"value":e=r.store;break;case"store":if(p&&!p[r.store.id])if(n){let e=Qe(d,r.store.id);t.page=d=e,e?p=e.reg:a?(tt(Le,r.store,0,1,r.softRead),p=Le.reg):p=void 0}else a&&tt(Le,r.store,0,1,r.softRead);e=Me(p&&p[r.store.id]||r.store)}switch(r.to){case C:t.value=e;break;case"a":case"b":t[r.to]=e;break;case"store":Ze(d,Le,u,r.target).current=e}break}case"compute":let e=s.data;if(e.fn){Ve="watch"===B(u,"op"),Ge=e.pure;let r=e.safe?(0,e.fn)(R(t),i.scope,t):rt(i,e.fn,t);e.filter?c=!r:t.value=r,Ve=m.isWatch,Ge=m.isPure}}l=i.fail||c}if(Ye&&Ye(t,i),!l){let e=R(t),r=I(t);if(o(u.next,(n=>{Be("child",d,n,t,e,r)})),r){B(u,"needFxCounter")&&Be("child",d,r.fxCount,t,e,r),B(u,"storeChange")&&Be("child",d,r.storeChange,t,e,r),B(u,"warnSerialize")&&Be("child",d,r.warnSerializeNode,t,e,r);let n=r.additionalLinks[u.id];n&&o(n,(n=>{Be("child",d,n,t,e,r)}))}}}Ue=m.isRoot,Xe=m.currentPage,Le=I(m)}function c(e,t="combine"){let r=t+"(",n="",o=0;return a(e,(e=>{o<25&&(null!=e&&(r+=n,r+=W(e)?K(e).fullName:e.toString()),o+=1,n=", ")})),r+")"}function u(e,t){let r,n,a=e;if(t){let a=K(t);0===e.length?(r=a.path,n=a.fullName):(r=a.path.concat([e]),n=0===a.fullName.length?e:a.fullName+"/"+e)}else r=0===e.length?[]:[e],n=e;return{shortName:a,fullName:n,path:r}}function f(e,t){let r=t?e:e[0];ge(r);let a=r.or,o=r.and;if(o){let r=t?o:o[0];if(pe(r)&&"and"in r){let r=f(o,t);e=r[0],a=n({},a,r[1])}else e=o}return[e,a]}function d(e,...t){let r=ce();if(r){let n=r.handlers[e];if(n)return n(r,...t)}}function p(e,t){let r=nt({or:t,and:"string"==typeof e?{name:e}:e}),n=(e,...t)=>(ee(!B(n,"derived"),"call of derived event","createEvent"),ee(!Ge,"unit call from pure function","operators like sample"),Xe?((e,t,r,n)=>{let a=Xe,o=null;if(t)for(o=Xe;o&&o.template!==t;)o=D(o);Je(o);let i=e.create(r,n);return Je(a),i})(n,a,e,t):n.create(e,t)),a=ce(),o=Object.assign(n,{graphite:s({meta:pt(r.actualOp||"event",n,r),regional:1}),create:e=>(l({target:n,params:e,scope:Le}),e),watch:e=>ft(n,e),map:e=>mt(n,z,e,[ze()]),filter:e=>mt(n,"filter",e.fn?e:e.fn,[ze(Se,1)]),filterMap:e=>mt(n,"filterMap",e,[ze(),Ae((e=>!he(e)),1)]),prepend(e){let t=p("* ? "+n.shortName,{parent:D(n)});return d("eventPrepend",E(t)),ct(t,n,[ze()],"prepend",e),dt(n,t),t}});return null!=r&&r.domain&&r.domain.hooks.event(o),T(o,"id",o.graphite.id),le(o.graphite),o}function m(e,t,r,n){return ve(r,t,"first argument"),i(me(n),"second argument should be a function"),ee(!B(e,"derived"),`${t} in derived store`,`${t} in store created via createStore`),o(Array.isArray(r)?r:[r],(t=>{e.off(t),q(e).set(t,lt(ht(t,e,"on",we,n)))})),e}function h(e,t){let r=nt(t),a=Ee(e),c=p({named:"updates",derived:1});d("storeBase",a);let u=a.id,f={subscribers:new Map,updates:c,defaultState:e,stateRef:a,getState(){let e,t=a;if(Xe){let t=Xe;for(;t&&!t.reg[u];)t=D(t);t&&(e=t)}return!e&&Le&&(tt(Le,a,1),e=Le),e&&(t=e.reg[u]),Me(t)},setState:e=>l({target:f,params:e,defer:1,scope:Le}),reset:(...e)=>(o(e,(e=>m(f,".reset",e,(()=>f.defaultState)))),f),on:(e,t)=>m(f,".on",e,t),off(e){let t=q(f).get(e);return t&&(t(),q(f).delete(e)),f},map(e,t){let r,n;pe(e)&&(r=e,e=e.fn),ee(he(t),"second argument of store.map","updateFilter");let o=f.getState();ce()?n=null:he(o)||(n=e(o,t));let i=h(n,{name:`${f.shortName} ? *`,derived:1,and:r}),s=ht(f,i,z,_e,e);return Ne(F(i),{type:z,fn:e,from:a}),F(i).noInit=1,d("storeMap",a,s),i},watch(e,t){if(!t||!W(e)){let t=ft(f,e);return d("storeWatch",a,e)||e(f.getState()),t}return i(me(t),"second argument should be a function"),e.watch((e=>t(f.getState(),e)))}},g=pt("store",f,r),y=f.defaultConfig.updateFilter;f.graphite=s({scope:{state:a,fn:y},node:[Ae(((e,t,r)=>(r.scope&&!r.scope.reg[a.id]&&(r.b=1),e))),$e(a),Ae(((e,t,{a:r,b:n})=>!he(e)&&(e!==r||n)),1),y&&ze(_e,1),Oe({from:C,target:a})],child:c,meta:n({},g,{defaultState:e}),regional:1}),T(f,"id",f.graphite.id),T(f,"rootStateRefId",u);let v=B(f,"serialize"),b=B(f,"derived"),_="ignore"===v,w=B(f,"sid");return w&&(T(f,"storeChange",1),a.sid=w),w||_||b||T(f,"warnSerialize",1),i(b||!he(e),"current state can't be undefined, use null instead"),fe(f,[c]),null!=r&&r.domain&&r.domain.hooks.store(f),b||(f.reinit=p({named:"reinit"}),f.reset(f.reinit)),a.meta=f.graphite.meta,le(f.graphite),f}function g(...e){let t,r,n;[e,n]=f(e);let a,o,s,l=e[e.length-1];if(me(l)?(r=e.slice(0,-1),t=l):r=e,1===r.length){let e=r[0];U(e)||(a=e,o=1)}if(!o&&(a=r,t)){s=1;let e=t;t=t=>e(...t)}return i(pe(a),"shape should be an object"),gt(Array.isArray(a),!s,a,n,t)}function y(){let e={};return e.req=new Promise(((t,r)=>{e.rs=t,e.rj=r})),e.req.catch((()=>{})),e}function v(e,t={}){let r=nt(me(e)?{handler:e}:e,t),a=p(me(e)?{handler:e}:e,n({},t,{actualOp:"effect"})),o=E(a);T(o,"op",a.kind="effect"),a.use=e=>(i(me(e),".use argument should be a function"),g.scope.handler=e,a),a.use.getCurrent=()=>g.scope.handler;let c=a.finally=p({named:"finally",derived:1}),u=a.done=c.filterMap({named:"done",fn({status:e,params:t,result:r}){if("done"===e)return{params:t,result:r}}}),f=a.fail=c.filterMap({named:"fail",fn({status:e,params:t,error:r}){if("fail"===e)return{params:t,error:r}}}),d=a.doneData=u.map({named:"doneData",fn:({result:e})=>e}),m=a.failData=f.map({named:"failData",fn:({error:e})=>e}),g=s({scope:{handler:a.defaultConfig.handler||(()=>i(0,`no handler used in ${a.getType()}`))},node:[Ae(((e,t,r)=>{let n=t.handler,o=I(r);if(o){let e=o.handlers.unitMap.get(a)||o.handlers.sidMap[a.sid];e&&(n=e)}return e.handler=n,e}),0,1),Ae((({params:e,req:t,handler:r,args:n=[e]},a,o)=>{let i=vt(o),s=bt(e,t,1,c,o,i),l=bt(e,t,0,c,o,i),[u,f]=yt(r,l,n);u&&(pe(f)&&me(f.then)?f.then(s,l):s(f))}),0,1)],meta:{op:"fx",fx:"runner"}});o.scope.runner=g,Z(o.seq,Ae(((e,{runner:t},r)=>{let n=D(r)?{params:e,req:{rs(e){},rj(e){}}}:e;return r.meta||(r.meta={fxID:ie()}),l({target:t,params:n,defer:1,scope:I(r),meta:r.meta}),n.params}),0,1)),a.create=e=>{let t=y(),r={params:e,req:t};if(Le&&!Ve){let e=Le;t.req.finally((()=>{He(e)})).catch((()=>{}))}return l({target:a,params:r,scope:Le}),t.req};let v=a.inFlight=h(0,{serialize:"ignore",named:(B(a,"name")||a.graphite.id)+".inFlight"}).on(a,(e=>e+1)).on(c,(e=>e-1)).map({fn:e=>e,named:"inFlight"});T(c,"needFxCounter","dec"),T(a,"needFxCounter",1);let b=a.pending=v.map({fn:e=>e>0,named:"pending"});return fe(a,[c,u,f,d,m,b,v]),null!=r&&r.domain&&r.domain.hooks.effect(a),a}function b(e){let t;[e,t]=f(e,1);let{source:r,effect:n,mapParams:a}=e,o=v(e,t);T(o,"attached",1);let i,{runner:s}=E(o).scope,c=Ae(((e,t,n)=>{let i,{params:s,req:c,handler:u}=e,f=o.finally,d=vt(n),p=bt(s,c,0,f,n,d),m=n.a,h=G(u),g=1;if(a?[g,i]=yt(a,p,[s,m]):i=r&&h?m:s,g){if(!h)return e.args=[m,i],1;l({target:u,params:{params:i,req:{rs:bt(s,c,1,f,n,d),rj:p}},page:n.page,defer:1,meta:n.meta})}}),1,1);if(r){let e;U(r)?(e=r,fe(e,[o])):(e=g(r),fe(o,[e])),i=[$e(F(e)),c]}else i=[c];s.seq.splice(1,0,...i),o.use(n);let d=D(n);return d&&(Object.assign(K(o),u(o.shortName,d)),o.defaultConfig.parent=d),dt(n,o,"effect"),o}function _(...e){let[[t,r],n]=f(e),o={};return a(r,((e,r)=>{let a=o[r]=p(r,{parent:D(t),config:n});t.on(a,e),dt(t,a)})),o}function w(e,t){let r=nt({or:t,and:"string"==typeof e?{name:e}:e}),n=s({family:{type:"domain"},regional:1,parent:(null==r?void 0:r.domain)||(null==r?void 0:r.parent)}),i={history:{},graphite:n,hooks:{}};n.meta=pt("domain",i,{parent:(null==r?void 0:r.domain)||(null==r?void 0:r.parent),or:r}),a({Event:p,Effect:v,Store:h,Domain:w},((e,t)=>{let r=t.toLowerCase(),n=p({named:`on${t}`});i.hooks[r]=n;let a=new Set;i.history[`${r}s`]=a,n.create=e=>(l(n,e),e),Z(E(n).seq,Ae(((e,t,r)=>(r.scope=null,e)))),n.watch((e=>{fe(i,[e]),a.add(e),e.ownerSet||(e.ownerSet=a),D(e)||(e.parent=i)})),fe(i,[n]),i[`onCreate${t}`]=e=>(o(a,e),n.watch(e)),i[`create${t}`]=i[r]=(t,r)=>{let a=nt({and:r,or:t});return null!=a&&a.domain?e(t,r):n(e(t,{parent:i,or:a}))}}));let c=D(i);return c&&a(i.hooks,((e,t)=>ct(e,c.hooks[t]))),null!=r&&r.domain&&r.domain.hooks.domain(i),i}function S(e,t){ve(e,"merge","first argument");let r=p({name:c(e,"merge"),derived:1,and:t});return ct(e,r,[],"merge"),r}function k(e,t){let r=0;return o(wt,(n=>{n in e&&(i(null!=e[n],St(t,n)),r=1)})),r}function j(...e){let t,r,n,a,[[o,i,s],l]=f(e),c=1;return he(i)&&pe(o)&&k(o,"sample")&&(i=o.clock,s=o.fn,c=!o.greedy,a=o.filter,t=o.target,r=o.name,n=o.sid,o=o.source),kt("sample",i,o,a,t,s,r,l,c,1,0,n)}function O(...e){let[[t,r],n]=f(e);return r||(r=t,t=r.source),k(r,"guard"),kt("guard",r.clock,t,r.filter,r.target,null,r.name,n,!r.greedy,0,1)}function x(e,t,r){if(U(e))return ee(0,"restore($store)"),e;if(V(e)||G(e)){let n=D(e),a=h(t,{parent:n,name:e.shortName,and:r});return ct(G(e)?e.doneData:e,a),n&&n.hooks.store(a),a}let n=Array.isArray(e)?[]:{};return a(e,((e,t)=>n[t]=U(e)?e:h(e,{name:t}))),n}function P(...e){let t,r,n="split",[[o,l],c]=f(e),u=!l;u&&(t=o.cases,l=o.match,r=o.clock,o=o.source);let m=U(l),h=!W(l)&&me(l),g=!m&&!h&&pe(l);i(W(o),"source must be a unit"),t||(t={}),u?a(t,((e,t)=>be(n,e,`cases.${t}`))):(i(g,"match should be an object"),a(l,((e,r)=>t[r]=p({derived:1,named:`cases.${r}`,and:c}))),t.__=p({derived:1,named:"cases.__",and:c}));let y,v=new Set([].concat(o,r||[],Object.values(t))),b=Object.keys(m||h?t:l);if(m||h)m&&v.add(l),y=[m&&$e(F(l),0,1),xe({safe:m,filter:1,pure:!m,fn(e,t,r){let n=String(m?r.a:l(e));xt(t,Q(b,n)?n:"__",e,r)}})];else if(g){let e=Ee({});e.type="shape";let t,r=[];a(l,((n,a)=>{if(W(n)){t=1,Z(r,a),v.add(n);let o=ct(n,[],[$e(e),Ae(((e,t,{a:r})=>r[a]=e))]);if(U(n)){e.current[a]=n.getState();let t=F(n);Ne(e,{from:t,field:a,type:"field"}),d("splitMatchStore",t,o)}}})),t&&d("splitBase",e),y=[t&&$e(e,0,1),ze(((e,t,n)=>{for(let a=0;a<b.length;a++){let o=b[a];if(Q(r,o)?n.a[o]:l[o](e))return void xt(t,o,e,n)}xt(t,"__",e,n)}),1)]}else i(0,"expect match to be unit, function or object");let _=s({meta:{op:n},parent:r?[]:o,scope:t,node:y,family:{owners:Array.from(v)},regional:1});if(r&&kt(n,r,o,null,_,null,n,c,0,0,0),!u)return t}function A(e,{scope:t,safe:r}={}){i(t||Le||r,"scopeBind cannot be called outside of forked .watch");let n=t||Le;return G(e)?t=>{let r=y();return l({target:e,params:{params:t,req:r},scope:n}),r.req}:t=>(l({target:e,params:t,scope:n}),t)}r.d(t,{attach:()=>b,clearNode:()=>st,combine:()=>g,createApi:()=>_,createDomain:()=>w,createEffect:()=>v,createEvent:()=>p,createNode:()=>s,createStore:()=>h,forward:()=>ut,guard:()=>O,is:()=>J,launch:()=>l,merge:()=>S,restore:()=>x,sample:()=>j,scopeBind:()=>A,split:()=>P,step:()=>Ce});let $="undefined"!=typeof Symbol&&Symbol.observable||"@@observable",z="map",C="stack",E=e=>e.graphite||e,M=e=>e.family.owners,N=e=>e.family.links,F=e=>e.stateRef,R=e=>e.value,q=e=>e.subscribers,D=e=>e.parent,I=e=>e.scope,B=(e,t)=>E(e).meta[t],T=(e,t,r)=>E(e).meta[t]=r,K=e=>e.compositeName,W=e=>(me(e)||pe(e))&&"kind"in e;const L=e=>t=>W(t)&&t.kind===e;let U=L("store"),V=L("event"),G=L("effect"),X=L("domain"),H=L("scope");var J={__proto__:null,unit:W,store:U,event:V,effect:G,domain:X,scope:H,attached:e=>G(e)&&1==B(e,"attached")};let Q=(e,t)=>e.includes(t),Y=(e,t)=>{let r=e.indexOf(t);-1!==r&&e.splice(r,1)},Z=(e,t)=>e.push(t),ee=(e,t,r)=>!e&&console.error(`${t} is deprecated${r?`, use ${r} instead`:""}`);const te=()=>{let e=0;return()=>""+ ++e};let re,ne=te(),ae=te(),oe=te(),ie=te(),se=null,le=e=>{re&&re(e,se)},ce=()=>se&&se.template,ue=e=>(e&&se&&se.sidRoot&&(e=`${se.sidRoot}|${e}`),e),fe=(e,t)=>{let r=E(e);o(t,(e=>{let t=E(e);"domain"!==r.family.type&&(t.family.type="crosslink"),Z(M(t),r),Z(N(r),t)}))},de=(e=[])=>(Array.isArray(e)?e:[e]).flat().map(E),pe=e=>"object"==typeof e&&null!==e,me=e=>"function"==typeof e,he=e=>void 0===e,ge=e=>i(pe(e)||me(e),"expect first argument be an object");const ye=(e,t,r,n)=>i(!(!pe(e)&&!me(e)||!("family"in e)&&!("graphite"in e)),`${t}: expect ${r} to be a unit (store, event or effect)${n}`);let ve=(e,t,r)=>{Array.isArray(e)?o(e,((e,n)=>ye(e,t,`${n} item of ${r}`,""))):ye(e,t,r," or array of units")},be=(e,t,r="target")=>o(de(t),(t=>ee(!B(t,"derived"),`${e}: derived unit in "${r}"`,"createEvent/createStore"))),_e=(e,{fn:t},{a:r})=>t(e,r),we=(e,{fn:t},{a:r})=>t(r,e),Se=(e,{fn:t})=>t(e);const ke=(e,t,r,n)=>{let a={id:ae(),type:e,data:t};return r&&(a.order={priority:r},n&&(a.order.barrierID=++je)),a};let je=0,Oe=({from:e="store",store:t,target:r,to:n=(r?"store":C),batch:a,priority:o})=>ke("mov",{from:e,store:t,to:n,target:r},o,a),xe=({fn:e,batch:t,priority:r,safe:n=0,filter:a=0,pure:o=0})=>ke("compute",{fn:e,safe:n,filter:a,pure:o},r,t),Pe=({fn:e})=>xe({fn:e,priority:"effect"}),Ae=(e,t,r)=>xe({fn:e,safe:1,filter:t,priority:r&&"effect"}),$e=(e,t,r)=>Oe({store:e,to:t?C:"a",priority:r&&"sampler",batch:1}),ze=(e=Se,t)=>xe({fn:e,pure:1,filter:t}),Ce={mov:Oe,compute:xe,filter:({fn:e,pure:t})=>xe({fn:e,filter:1,pure:t}),run:Pe},Ee=e=>({id:ae(),current:e}),Me=({current:e})=>e,Ne=(e,t)=>{e.before||(e.before=[]),Z(e.before,t)},Fe=null;const Re=(e,t)=>{if(!e)return t;if(!t)return e;let r;return(e.v.type===t.v.type&&e.v.id>t.v.id||Ke(e.v.type)>Ke(t.v.type))&&(r=e,e=t,t=r),r=Re(e.r,t),e.r=e.l,e.l=r,e},qe=[];let De=0;for(;De<6;)Z(qe,{first:null,last:null,size:0}),De+=1;const Ie=()=>{for(let e=0;e<6;e++){let t=qe[e];if(t.size>0){if(3===e||4===e){t.size-=1;let e=Fe.v;return Fe=Re(Fe.l,Fe.r),e}1===t.size&&(t.last=null);let r=t.first;return t.first=r.r,t.size-=1,r.v}}},Be=(e,t,r,n,a,o,i)=>Te(0,{a:null,b:null,node:r,parent:n,value:a,page:t,scope:o,meta:i},e),Te=(e,t,r,n=0)=>{let a=Ke(r),o=qe[a],i={v:{idx:e,stack:t,type:r,id:n},l:null,r:null};3===a||4===a?Fe=Re(Fe,i):(0===o.size?o.first=i:o.last.r=i,o.last=i),o.size+=1},Ke=e=>{switch(e){case"child":return 0;case"pure":return 1;case"read":return 2;case"barrier":return 3;case"sampler":return 4;case"effect":return 5;default:return-1}},We=new Set;let Le,Ue=1,Ve=0,Ge=0,Xe=null,He=e=>{Le=e},Je=e=>{Xe=e};const Qe=(e,t)=>{if(e){for(;e&&!e.reg[t];)e=D(e);if(e)return e}return null};let Ye,Ze=(e,t,r,n,a)=>{let o=Qe(e,n.id);return o?o.reg[n.id]:t?(tt(t,n,a),t.reg[n.id]):n};const et=e=>e;let tt=(e,t,r,a,i)=>{var s;let l=e.reg,c=t.sid,u=null==t||null===(s=t.meta)||void 0===s?void 0:s.serialize,f=e.fromSerialize&&"ignore"!==u&&(null==u?void 0:u.read)||et;if(l[t.id])return;let d={id:t.id,current:t.current,meta:t.meta};if(d.id in e.values.idMap)d.current=e.values.idMap[d.id];else if(c&&c in e.values.sidMap&&!(c in e.sidIdMap))d.current=f(e.values.sidMap[c]);else if(t.before&&!i){let i=0,s=r||!t.noInit||a;o(t.before,(t=>{switch(t.type){case z:{let n=t.from;if(n||t.fn){n&&tt(e,n,r,a);let o=n&&l[n.id].current;s&&(d.current=t.fn?t.fn(o):o)}break}case"field":i||(i=1,d.current=Array.isArray(d.current)?[...d.current]:n({},d.current)),tt(e,t.from,r,a),s&&(d.current[t.field]=l[l[t.from.id].id].current)}}))}c&&(e.sidIdMap[c]=t.id),l[t.id]=d};const rt=(e,t,r)=>{try{return t(R(r),e.scope,r)}catch(t){console.error(t),e.fail=1,e.failReason=t}};let nt=(e,t={})=>(pe(e)&&(nt(e.or,t),a(e,((e,r)=>{he(e)||"or"===r||"and"===r||(t[r]=e)})),nt(e.and,t)),t);const at=(e,t)=>{Y(e.next,t),Y(M(e),t),Y(N(e),t)},ot=(e,t,r)=>{let n;e.next.length=0,e.seq.length=0,e.scope=null;let a=N(e);for(;n=a.pop();)at(n,e),(t||r&&"sample"!==B(e,"op")||"crosslink"===n.family.type)&&ot(n,t,"on"!==B(n,"op")&&r);for(a=M(e);n=a.pop();)at(n,e),r&&"crosslink"===n.family.type&&ot(n,t,"on"!==B(n,"op")&&r)},it=e=>e.clear();let st=(e,{deep:t}={})=>{let r=0;if(e.ownerSet&&e.ownerSet.delete(e),U(e))it(q(e));else if(X(e)){r=1;let t=e.history;it(t.events),it(t.effects),it(t.stores),it(t.domains)}ot(E(e),!!t,r)},lt=e=>{let t=()=>st(e);return t.unsubscribe=t,t},ct=(e,t,r,n,a)=>s({node:r,parent:e,child:t,scope:{fn:a},meta:{op:n},family:{owners:[e,t],links:t},regional:1}),ut=e=>{let t="forward",[{from:r,to:n},a]=f(e,1);return ve(r,t,'"from"'),ve(n,t,'"to"'),be(t,n,"to"),lt(s({parent:r,child:n,meta:{op:t,config:a},family:{},regional:1}))},ft=(e,t)=>(i(me(t),".watch argument should be a function"),lt(s({scope:{fn:t},node:[Pe({fn:Se})],parent:e,meta:{op:"watch"},family:{owners:e},regional:1}))),dt=(e,t,r="event")=>{D(e)&&D(e).hooks[r](t)},pt=(e,t,r)=>{let n=nt(r),a="domain"===e,o=ne(),{sid:i=null,named:s=null,domain:l=null,parent:c=l}=n,f=s||n.name||(a?"":o),d=u(f,c),p={op:t.kind=e,name:t.shortName=f,sid:t.sid=ue(i),named:s,unitId:t.id=o,serialize:n.serialize,derived:n.derived,config:n};if(t.parent=c,t.compositeName=d,t.defaultConfig=n,t.thru=e=>(ee(0,"thru","js pipe"),e(t)),t.getType=()=>d.fullName,!a){t.subscribe=e=>(ge(e),t.watch(me(e)?e:t=>e.next&&e.next(t))),t[$]=()=>t;let e=ce();e&&(p.nativeTemplate=e)}return p};const mt=(e,t,r,n)=>{let a;pe(r)&&(a=r,r=r.fn);let o=p({name:`${e.shortName} ? *`,derived:1,and:a});return ct(e,o,n,t,r),o},ht=(e,t,r,n,a)=>{let o=F(t),i=Oe({store:o,to:"a",priority:"read"});r===z&&(i.data.softRead=1);let s=[i,ze(n)];return d("storeOnMap",o,s,U(e)&&F(e)),ct(e,t,s,r,a)},gt=(e,t,r,o,s)=>{let l=e?e=>[...e]:e=>n({},e),u=e?[]:{},f=l(u),p=Ee(f),m=Ee(1);p.type=e?"list":"shape",p.noInit=1,d("combineBase",p,m);let g=h(f,{name:c(r),derived:1,and:o}),y=F(g);y.noInit=1,T(g,"isCombine",1);let v=$e(p);v.order={priority:"barrier"};let b=[Ae(((e,t,r)=>(r.scope&&!r.scope.reg[p.id]&&(r.c=1),e))),v,Oe({store:m,to:"b"}),Ae(((e,{key:r},n)=>{if(n.c||e!==n.a[r])return t&&n.b&&(n.a=l(n.a)),n.a[r]=e,1}),1),Oe({from:"a",target:p}),Oe({from:"value",store:0,target:m}),Oe({from:"value",store:1,target:m,priority:"barrier",batch:1}),$e(p,1),s&&ze()];return a(r,((e,t)=>{if(!U(e))return i(!W(e)&&!he(e),`combine expects a store in a field ${t}`),void(f[t]=u[t]=e);u[t]=e.defaultState,f[t]=e.getState();let r=ct(e,g,b,"combine",s);r.scope.key=t;let n=F(e);Ne(p,{type:"field",field:t,from:n}),d("combineField",n,r)})),g.defaultShape=r,Ne(y,{type:z,from:p,fn:s}),ce()||(g.defaultState=s?y.current=s(f):u),g};let yt=(e,t,r)=>{try{return[1,e(...r)]}catch(e){return t(e),[0,null]}},vt=e=>{let t=I(e),r={ref:t};return t&&Z(t.activeEffects,r),r},bt=(e,t,r,n,a,o)=>i=>{o.ref&&Y(o.ref.activeEffects,o),l({target:[n,_t],params:[r?{status:"done",params:e,result:i}:{status:"fail",params:e,error:i},{value:i,fn:r?t.rs:t.rj}],defer:1,page:a.page,scope:o.ref,meta:a.meta})};const _t=s({node:[Pe({fn:({fn:e,value:t})=>e(t)})],meta:{op:"fx",fx:"sidechain"}}),wt=["source","clock","target"],St=(e,t)=>e+`: ${t} should be defined`;let kt=(e,t,r,n,a,o,s,l,c,u,f,m)=>{let y=!!a;i(!he(r)||!he(t),St(e,"either source or clock"));let v=0;he(r)?v=1:W(r)||(r=g(r)),he(t)?t=r:(ve(t,e,"clock"),Array.isArray(t)&&(t=S(t))),v&&(r=t),l||s||(s=r.shortName);let b="none";(f||n)&&(W(n)?b="unit":(i(me(n),"`filter` should be function or unit"),b="fn")),a?(ve(a,e,"target"),be(e,a)):"none"===b&&u&&U(r)&&U(t)?a=h(o?o(Me(F(r)),Me(F(t))):Me(F(r)),{name:s,sid:m,or:l}):(a=p({name:s,derived:1,or:l}),d("sampleTarget",E(a)));let _=Ee(),w=[];if("unit"===b){let[r,o]=Ot(n,a,t,_,e);w=[...jt(o),...jt(r)]}let[k,j]=Ot(r,a,t,_,e),O=ct(t,a,[d("sampleSourceLoader"),Oe({from:C,target:_}),...jt(j),$e(k,1,c),...w,$e(_),"fn"===b&&ze(((e,t,{a:r})=>n(e,r)),1),o&&ze(_e),d("sampleSourceUpward",y)],e,o);return fe(r,[O]),Object.assign(O.meta,l,{joint:1}),a};const jt=e=>[$e(e),Ae(((e,t,{a:r})=>r),1)],Ot=(e,t,r,n,a)=>{let o=U(e),i=o?F(e):Ee(),l=Ee(o);return o||s({parent:e,node:[Oe({from:C,target:i}),Oe({from:"value",store:1,target:l})],family:{owners:[e,t,r],links:t},meta:{op:a},regional:1}),d("sampleSource",l,i,n),[i,l]},xt=(e,t,r,n)=>{let a=e[t];a&&l({target:a,params:Array.isArray(a)?a.map((()=>r)):r,defer:1,stack:n})}},30052:(e,t,r)=>{r.d(t,{condition:()=>a});var n=r(32489);function a(e){var{if:t,then:r,else:a,source:i=(0,n.createEvent)({name:"source",sid:"epke23"},{name:"source",sid:"epke23"})}=e,s=n.is.unit(t)||"function"==typeof t?t:e=>e===t;return r&&a?(0,n.split)({and:[{source:i,match:{then:s,else:o(s)},cases:{then:r,else:a}}],or:{sid:"9tug3k"}}):r?(0,n.guard)({and:[{source:i,filter:s,target:r}],or:{sid:"abznoh"}}):a&&(0,n.guard)({and:[{source:i,filter:o(s),target:a}],or:{sid:"-eb29qp"}}),i}function o(e){return n.is.unit(e)?e.map((e=>!e)):t=>!e(t)}},630082:(e,t,r)=>{r.d(t,{equals:()=>a});var n=r(32489);function a(e,t){return(0,n.combine)({and:[e,t,(e,t)=>e===t],or:{sid:"-pqjlti"}})}},311606:(e,t,r)=>{r.d(t,{interval:()=>a});var n=r(32489);function a(e){var{timeout:t,start:r,stop:a,leading:o=!1,trailing:i=!1}=e,s=null!=r?r:(0,n.createEvent)({name:"setup",sid:"-ajedhm"}),l=null!=a?a:(0,n.createEvent)({name:"teardown",sid:"-ryi8gr"}),c=(0,n.createEvent)({name:"tick",sid:"-cw8a02"}),u=(0,n.createStore)(!1,{name:"$isRunning",sid:"-5gspmy"}),f=function(e){if(n.is.store(e,{sid:"8i2x6t"}))return e;if("number"==typeof e)return(0,n.createStore)(e,{and:{name:"$timeout"},sid:"-jluixv"});throw new TypeError('timeout parameter in interval method should be number or Store. "'.concat(typeof e,'" was passed'))}(t),d=u.map((e=>!e)),p=(0,n.createEvent)({name:"saveTimeout",sid:"satd6r"}),m=(0,n.createStore)(null,{name:"$timeoutId",sid:"hehxq7"}).on(p,((e,t)=>{var{timeoutId:r}=t;return r})),h=(0,n.createStore)((()=>{}),{name:"$rejecter",sid:"-sc3eh9"}).on(p,((e,t)=>{var{reject:r}=t;return r})),g=(0,n.attach)({and:{source:{timeout:f,running:u},effect:e=>{var{timeout:t,running:r}=e;return r?new Promise(((e,r)=>{var n=setTimeout(e,t);p({timeoutId:n,reject:r})})):Promise.reject()}},or:{name:"timeoutFx",sid:"-xlxric"}}),y=(0,n.attach)({and:{source:{timeoutId:m,rejecter:h},effect:e=>{var{timeoutId:t,rejecter:r}=e;r(),t&&clearTimeout(t)}},or:{name:"cleanupFx",sid:"-32ewxw"}});if((0,n.guard)({and:[{clock:s,source:f,filter:d,target:g}],or:{sid:"-us95i7"}}),o){var v=(0,n.guard)({and:[{clock:s,filter:d}],or:{name:"onReady",sid:"farho0"}});(0,n.sample)({and:[{clock:v,target:c}],or:{sid:"-ubrbnn"}})}return(0,n.sample)({and:[{clock:s,fn:()=>!0,target:u}],or:{sid:"-ua3xxa"}}),(0,n.guard)({and:[{clock:g.done,source:f,filter:u,target:g}],or:{sid:"6lcmx8"}}),(0,n.guard)({and:[{clock:g.done,filter:u,target:c.prepend((()=>{}))}],or:{sid:"6p772r"}}),i&&(0,n.sample)({and:[{clock:l,target:c}],or:{sid:"75p0xb"}}),u.on(l,(()=>!1)),(0,n.sample)({and:[{clock:l,target:y}],or:{sid:"7ln232"}}),{tick:c,isRunning:u,"@@trigger":()=>({setup:s,teardown:l,fired:c})}}},297420:(e,t,r)=>{function n(e){return e.map((e=>!e))}r.d(t,{not:()=>n})},264874:(e,t,r)=>{r.d(t,{once:()=>a});var n=r(32489);function a(e){var t=(0,n.createStore)(!0,{name:"$canTrigger",sid:"hqg5e0"}),r=(0,n.sample)({and:[{clock:e,filter:t}],or:{name:"trigger",sid:"-cvmmt0"}});return t.on(r,(()=>!1)),(0,n.sample)({and:[{clock:r}],or:{sid:"-pw95tp"}})}},6598:(e,t,r)=>{r.d(t,{pending:()=>o});var n=r(32489),a={some:e=>e.some(Boolean),every:e=>e.every(Boolean)};function o(e){var{effects:t,domain:r,of:o="some"}=e;if(!n.is.domain(r,{sid:"97b92c"})&&!t)throw new TypeError("domain or effects should be passed");if("some"!==o&&"every"!==o)throw new TypeError('strategy parameter "of" can be "every" or "some". Passed: "'.concat(o,'"'));var i=null!=t?t:[],s=a[o];return r&&(i=[],r.onCreateEffect((e=>i.push(e)))),(0,n.combine)({and:[i.map((e=>e.pending)),s],or:{sid:"a37bj0"}})}},278758:(e,t,r)=>{r.d(t,{reset:()=>a});var n=r(32489);function a(e){var{clock:t,target:r}=e,a=Array.isArray(r)?r:[r],o=Array.isArray(t)?t:[null!=t?t:(0,n.createEvent)({name:"clocks",sid:"bqmea5"})];return a.forEach((e=>{e.reset(o)})),void 0===t?o[0]:void 0}},625523:(e,t,r)=>{function n(e){var{source:t,shape:r}=e,n={};for(var a in r)a in r&&function(){var e=r[a];n[a]=t.map((t=>{var r=e(t);return void 0===r?null:r}))}();return n}r.d(t,{reshape:()=>n})},810780:(e,t,r)=>{r.d(t,{spread:()=>i});var n=r(32489),a={}.hasOwnProperty,o=(e,t)=>a.call(e,t);function i(e){var{targets:t,source:r=(0,n.createEvent)({name:"source",sid:"-fkbi3c"},{name:"source",sid:"-fkbi3c"})}=e,a=function(e){if(o(t,e)){var a=t[e],i=(0,n.guard)({and:[{source:r,greedy:!0,filter:t=>"object"==typeof t&&null!==t&&e in t}],or:{name:"hasTargetKey",sid:"-cov4g4"}});(0,n.sample)({and:[{greedy:!0,clock:i,fn:t=>t[e],target:a}],or:{sid:"lpn34j"}})}};for(var i in t)a(i);return r}}}])}if("undefined"!=typeof window&&window.partConfigEnabled?.("static_loading_execute_errors"))try{e(),window.stManager?.done?.("dist/api/widgets/chunks/state-management.314bb09e.js")}catch(e){throw window.stManager?.fail?.("dist/api/widgets/chunks/state-management.314bb09e.js",e),e}else e(),"undefined"!=typeof window&&window.stManager?.done?.("dist/api/widgets/chunks/state-management.314bb09e.js");