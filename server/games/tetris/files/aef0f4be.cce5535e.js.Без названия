function e(){"use strict";(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[66870],{164475:(e,t,a)=>{function i(){return{icon:'<svg fill="none" height="12" viewBox="0 0 12 12" width="12" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M9.03 2.97c.3.3.3.77 0 1.06L7.06 6l1.97 1.97a.75.75 0 0 1-1.06 1.06L6 7.06 4.03 9.03a.75.75 0 0 1-1.06-1.06L4.94 6 2.97 4.03a.75.75 0 0 1 1.06-1.06L6 4.94l1.97-1.97c.3-.3.77-.3 1.06 0z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"cancel_outline_12"}}a.d(t,{getIcon12CancelOutline:()=>i})},791947:(e,t,a)=>{function i(){return{icon:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.74 3.76c.35.34.35.9 0 1.23l-7.31 7.25a.88.88 0 0 1-1.25 0L2.26 9.36a.87.87 0 0 1 0-1.23.88.88 0 0 1 1.24 0l2.3 2.26 6.7-6.63a.88.88 0 0 1 1.24 0Z" fill="currentColor"/></svg>',name:"done_16"}}a.d(t,{getIcon16Done:()=>i})},533215:(e,t,a)=>{function i(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="currentColor" d="m5.75 3.87-.43 1c-.03.06-.04.1-.07.12a.23.23 0 0 1-.07.06c-.03.02-.07.02-.15.03l-.62.1c-1.77.24-2.65.37-3.02.78a1.53 1.53 0 0 0-.37 1.32c.11.55.81 1.1 2.2 2.22l.24.2c.06.05.1.07.11.1a.23.23 0 0 1 .04.1l-.02.15-.07.38c-.39 2.06-.58 3.09-.28 3.59a1.53 1.53 0 0 0 1.24.73c.59.02 1.4-.65 3-1.99l.28-.22c.08-.08.12-.11.17-.12a.23.23 0 0 1 .13 0c.05.01.09.04.17.11l.28.24c1.6 1.33 2.41 2 3 1.98a1.53 1.53 0 0 0 1.24-.73c.3-.5.11-1.53-.28-3.6l-.07-.37a.51.51 0 0 1-.02-.15.23.23 0 0 1 .04-.1l.11-.1.24-.2c1.39-1.11 2.09-1.67 2.2-2.22a1.53 1.53 0 0 0-.37-1.32c-.37-.41-1.25-.54-3.02-.79l-.62-.09c-.08 0-.12-.01-.15-.03a.23.23 0 0 1-.07-.06c-.03-.02-.04-.06-.07-.13l-.43-1c-.71-1.63-1.06-2.45-1.56-2.7a1.52 1.52 0 0 0-1.37 0c-.5.25-.85 1.07-1.56 2.7Z"/></svg>',name:"favorite_16"}}a.d(t,{getIcon16Favorite:()=>i})},379505:(e,t,a)=>{function i(){return{icon:'<svg fill="none" height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M8 3.5H6c-3.75 0-5 3-5 6 0 1.75.5 3.5 2 3.5.65 0 1.02-.52 1.44-1.11.54-.77 1.15-1.64 2.56-1.64h2c1.4 0 2.02.87 2.56 1.64.42.59.79 1.11 1.44 1.11 1.5 0 2-1.75 2-3.5 0-3-1.25-6-5-6zm2 4c0-.28.22-.5.5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5zm-6-1a.5.5 0 0 1 1 0V7h.5a.5.5 0 0 1 0 1H5v.5a.5.5 0 0 1-1 0V8h-.5a.5.5 0 0 1 0-1H4z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"game_16"}}a.d(t,{getIcon16Game:()=>i})},722747:(e,t,a)=>{function i(){return{icon:'<svg fill="none" height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M5.4 9c.55 0 .76.06.96.17.2.1.36.27.47.47.11.2.17.4.17.96v1.8c0 .55-.06.76-.17.96s-.27.36-.47.47c-.2.11-.4.17-.96.17H3.6c-.55 0-.76-.06-.96-.17-.2-.1-.36-.27-.47-.47S2 12.96 2 12.4v-1.8c0-.55.06-.76.17-.96.1-.2.27-.36.47-.47.2-.11.4-.17.96-.17zm7 0c.55 0 .76.06.96.17s.36.27.47.47c.11.2.17.4.17.96v1.8c0 .55-.06.76-.17.96-.1.2-.27.36-.47.47-.2.11-.4.17-.96.17h-1.8c-.55 0-.76-.06-.96-.17-.2-.1-.36-.27-.47-.47S9 12.96 9 12.4v-1.8c0-.55.06-.76.17-.96.1-.2.27-.36.47-.47s.4-.17.96-.17zm-.57-7.47c.23.07.4.17.8.57l1.27 1.27c.4.4.5.57.57.8.06.22.06.44 0 .66s-.17.4-.57.8L12.63 6.9c-.4.4-.57.5-.8.57-.22.06-.44.06-.66 0-.23-.07-.4-.17-.8-.57L9.1 5.63c-.4-.4-.5-.57-.57-.8a1.14 1.14 0 0 1 0-.66c.07-.23.17-.4.57-.8l1.27-1.27c.4-.4.57-.5.8-.57s.44-.06.66 0zM5.4 2c.55 0 .76.06.96.17.2.1.36.27.47.47.11.2.17.4.17.96v1.8c0 .55-.06.76-.17.96-.1.2-.27.36-.47.47-.2.11-.4.17-.96.17H3.6c-.55 0-.76-.06-.96-.17-.2-.1-.36-.27-.47-.47-.11-.2-.17-.4-.17-.96V3.6c0-.55.06-.76.17-.96.1-.2.27-.36.47-.47.2-.11.4-.17.96-.17z" fill="currentColor"/></svg>',name:"services_16"}}a.d(t,{getIcon16Services:()=>i})},975034:(e,t,a)=>{function i(){return{icon:'<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M16.8 3.96a.87.87 0 0 0-.66.12l-.01.01-3.63 2.3v6.21l3.64 2.3a.88.88 0 0 0 1.1-.12.94.94 0 0 0 .27-.66V4.88a.95.95 0 0 0-.14-.51.9.9 0 0 0-.56-.4zM11 12.54V6.46H5.48c-.82 0-1.56.34-2.1.89a3.06 3.06 0 0 0-.86 2.15c0 .84.33 1.6.87 2.15a2.92 2.92 0 0 0 2.09.88H11zm.96-7.57 3.36-2.13a2.37 2.37 0 0 1 1.82-.33 2.4 2.4 0 0 1 1.5 1.07c.24.4.37.85.37 1.3v9.25c0 .66-.26 1.27-.7 1.71a2.38 2.38 0 0 1-2.99.34l-3.37-2.14h-2.3l.19 1.04a2.43 2.43 0 0 1-.42 1.85 2.52 2.52 0 0 1-3.47.6 2.46 2.46 0 0 1-1.03-1.59l-.36-2a4.44 4.44 0 0 1-2.24-1.23 4.56 4.56 0 0 1-1.3-3.2c0-1.25.5-2.38 1.3-3.2a4.42 4.42 0 0 1 3.16-1.34h6.48zM6.1 14.03l.3 1.64a.96.96 0 0 0 .4.62 1.02 1.02 0 0 0 1.4-.24.93.93 0 0 0 .16-.71l-.23-1.31H6.1z" fill="currentColor"/></svg>',name:"advertising_outline_20"}}a.d(t,{getIcon20AdvertisingOutline:()=>i})},877751:(e,t,a)=>{function i(){return{icon:'<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g id="article_box_outline_20__Page-2" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="article_box_outline_20__article_box_outline_20" fill-rule="nonzero"><path id="article_box_outline_20__Shape" opacity=".53" d="M0 0h20v20H0z"/><path d="M6.92 2h6.16c1.44 0 2.14.13 2.86.52a3.7 3.7 0 0 1 1.54 1.54c.39.72.52 1.42.52 2.86v6.16c0 1.44-.13 2.14-.52 2.86a3.7 3.7 0 0 1-1.54 1.54c-.72.39-1.42.52-2.86.52H6.92c-1.44 0-2.14-.13-2.86-.52a3.7 3.7 0 0 1-1.54-1.54c-.39-.72-.52-1.42-.52-2.86V6.92c0-1.44.13-2.14.52-2.86a3.7 3.7 0 0 1 1.54-1.54C4.78 2.13 5.48 2 6.92 2Zm0 1.5c-1.21 0-1.68.09-2.15.35-.4.2-.71.52-.92.92-.26.47-.35.94-.35 2.15v6.16c0 1.21.09 1.68.35 2.15.2.4.52.71.92.92.47.26.94.35 2.15.35h6.16c1.21 0 1.68-.09 2.15-.35.4-.2.71-.52.92-.92.26-.47.35-.94.35-2.15V6.92c0-1.21-.09-1.68-.35-2.15a2.2 2.2 0 0 0-.92-.92c-.47-.26-.94-.35-2.15-.35H6.92ZM6.75 6h6.5a.75.75 0 1 1 0 1.5h-6.5a.75.75 0 0 1 0-1.5Zm0 3.25h6.5a.75.75 0 1 1 0 1.5h-6.5a.75.75 0 1 1 0-1.5Zm0 3.25h4.5a.75.75 0 1 1 0 1.5h-4.5a.75.75 0 1 1 0-1.5Z" id="article_box_outline_20__Icon-Color" fill="currentColor"/></g></g></svg>',name:"article_box_outline_20"}}a.d(t,{getIcon20ArticleBoxOutline:()=>i})},580903:(e,t,a)=>{function i(){return{icon:'<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M17.25 14.5c.42 0 .75.34.75.75v.1a.75.75 0 0 1-.75.65H4.75a.75.75 0 1 1 0-1.5h12.5Zm0-5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 0 1-.75-.75v-.1a.75.75 0 0 1 .75-.65h8.5Zm-9-6.5c.4 0 .75.34.75.75v.1a.75.75 0 0 1-.75.65h-2.5v5.75a.75.75 0 0 1-1.5 0V4.5h-2.5a.76.76 0 0 1-.74-.65L1 3.75c0-.42.34-.75.75-.75h6.5Zm9 1.5a.75.75 0 0 1 0 1.5h-5.5a.75.75 0 0 1-.75-.75v-.1a.75.75 0 0 1 .75-.65h5.5Z" fill="currentColor"/></svg>',name:"articles_outline_20"}}a.d(t,{getIcon20ArticlesOutline:()=>i})},369476:(e,t,a)=>{function i(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M6.67 12.5c-1 0-1.77.76-1.82 1.72a3.54 3.54 0 0 1-1.28 2.65c.53.15 1.27.21 2.22-.07 1.9-.57 2.7-1.73 2.7-2.62 0-.9-.78-1.69-1.82-1.69Zm-3.31 1.65a3.3 3.3 0 0 1 3.3-3.16c1.8 0 3.32 1.4 3.32 3.2 0 1.8-1.5 3.37-3.76 4.05-2.16.64-3.64-.03-4.35-.55a.92.92 0 0 1-.3-.36.84.84 0 0 1-.03-.6c.15-.47.64-.67.99-.95.38-.3.79-.76.83-1.63ZM15.7 2a1.6 1.6 0 0 1 2.26-.07 1.69 1.69 0 0 1 .17 2.29l-6.08 7.5a.75.75 0 0 1-1.05.1.75.75 0 0 1-.1-1.05l6.07-7.5a.18.18 0 0 0-.02-.23c-.07-.07-.13-.03-.2.04l-7 6.7a.75.75 0 0 1-1.06-.02.75.75 0 0 1 .02-1.06l7-6.7Z" clip-rule="evenodd"/></svg>',name:"brush_outline_20"}}a.d(t,{getIcon20BrushOutline:()=>i})},425936:(e,t,a)=>{function i(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M6.25 1a.75.75 0 0 1 .75.75v.26L8.32 2H13v-.25a.75.75 0 0 1 1.5 0v.36c.43.06.82.17 1.18.35a4.25 4.25 0 0 1 1.86 1.86c.25.5.36 1.04.41 1.67.05.61.05 1.37.05 2.33v3.36c0 .96 0 1.72-.05 2.33a4.39 4.39 0 0 1-.41 1.67 4.25 4.25 0 0 1-1.86 1.86c-.5.25-1.04.36-1.67.41-.61.05-1.38.05-2.33.05H8.32c-.96 0-1.72 0-2.33-.05a4.39 4.39 0 0 1-1.67-.41 4.25 4.25 0 0 1-1.86-1.86 4.39 4.39 0 0 1-.41-1.67C2 13.4 2 12.63 2 11.68V8.32c0-.96 0-1.72.05-2.33.05-.63.16-1.17.41-1.67a4.25 4.25 0 0 1 1.86-1.86 3.8 3.8 0 0 1 1.18-.35v-.36A.75.75 0 0 1 6.25 1ZM5.5 3.63a2 2 0 0 0-.5.17A2.75 2.75 0 0 0 3.8 5c-.13.25-.21.57-.26 1.11-.02.26-.03.54-.03.88h12.98a14.08 14.08 0 0 0-.03-.88 2.9 2.9 0 0 0-.26-1.1A2.75 2.75 0 0 0 15 3.8a2.02 2.02 0 0 0-.5-.17v.12a.75.75 0 0 1-1.5 0v-.24a80.42 80.42 0 0 0-1.35-.01H7v.25a.75.75 0 0 1-1.5 0v-.12Zm11 4.86h-13v3.16c0 1 0 1.7.04 2.24.05.53.13.86.26 1.1A2.75 2.75 0 0 0 5 16.2c.25.13.57.21 1.11.26.55.04 1.25.04 2.24.04h3.3c1 0 1.7 0 2.24-.04a2.9 2.9 0 0 0 1.1-.26A2.75 2.75 0 0 0 16.2 15c.13-.25.21-.57.26-1.11.04-.55.04-1.25.04-2.24V8.5Z" clip-rule="evenodd"/></svg>',name:"calendar_outline_20"}}a.d(t,{getIcon20CalendarOutline:()=>i})},305903:(e,t,a)=>{function i(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M5.5 5.5c.57 0 1-.2 1.34-.52.24-.24.43-.54.55-.74l.06-.1c.15-.23.26-.37.39-.47.11-.08.3-.17.66-.17h3c.36 0 .55.09.66.17.13.1.24.24.4.48l.05.09c.12.2.3.5.55.74.33.32.77.52 1.34.52.73 0 .99 0 1.19.04.9.18 1.59.88 1.77 1.77.04.2.04.46.04 1.19v3.45c0 .85 0 1.45-.04 1.9-.04.46-.1.72-.2.92-.22.42-.57.77-.99.98-.2.1-.46.17-.91.21-.46.04-1.06.04-1.91.04h-6.9c-.85 0-1.45 0-1.91-.04a2.4 2.4 0 0 1-.91-.2 2.25 2.25 0 0 1-.99-.99 2.4 2.4 0 0 1-.2-.91c-.04-.46-.04-1.06-.04-1.91V8.5c0-.73 0-.99.04-1.19.18-.9.88-1.59 1.77-1.77.2-.04.46-.04 1.19-.04zm3-3.5c-.64 0-1.14.16-1.54.46-.39.27-.62.63-.78.9l-.08.11c-.13.22-.2.34-.3.43-.06.05-.12.1-.3.1h-.09c-.61 0-1.03 0-1.4.07a3.75 3.75 0 0 0-2.94 2.95C1 7.38 1 7.8 1 8.42v3.56c0 .81 0 1.47.04 2 .05.55.14 1.03.37 1.47.36.7.93 1.28 1.64 1.64.44.23.92.32 1.47.37.53.04 1.18.04 2 .04H13.48c.81 0 1.47 0 2-.04a3.84 3.84 0 0 0 1.47-.37c.7-.36 1.28-.93 1.64-1.64.23-.44.32-.92.37-1.47.04-.53.04-1.19.04-2V8.41c0-.61 0-1.03-.07-1.4a3.75 3.75 0 0 0-2.95-2.94 7.5 7.5 0 0 0-1.4-.07h-.08c-.18 0-.24-.05-.3-.1-.1-.1-.17-.2-.3-.43l-.08-.12c-.16-.26-.4-.62-.78-.9-.4-.29-.9-.45-1.54-.45zm3.75 8.25a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0zm1.5 0a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"camera_outline_20"}}a.d(t,{getIcon20CameraOutline:()=>i})},493874:(e,t,a)=>{function i(){return{icon:'<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.53 4.22a.75.75 0 0 1 0 1.06L7.8 10l4.72 4.72a.75.75 0 1 1-1.06 1.06l-5.25-5.25a.75.75 0 0 1 0-1.06l5.25-5.25a.75.75 0 0 1 1.05 0z" fill="currentColor"/></svg>',name:"chevron_left_outline_20"}}a.d(t,{getIcon20ChevronLeftOutline:()=>i})},801875:(e,t,a)=>{function i(){return{icon:'<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.47 4.22a.75.75 0 0 0 0 1.06L12.19 10l-4.72 4.72a.75.75 0 1 0 1.06 1.06l5.25-5.25a.75.75 0 0 0 0-1.06L8.53 4.22a.75.75 0 0 0-1.06 0z" fill="currentColor"/></svg>',name:"chevron_right_outline_20"}}a.d(t,{getIcon20ChevronRightOutline:()=>i})},491944:(e,t,a)=>{function i(){return{icon:'<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.08 3.5c-1.66 0-2.02.17-2.36.35-.38.2-.67.49-.87.87-.18.34-.35.7-.35 2.36v5.84c0 1.66.17 2.02.35 2.36.2.38.49.67.87.87.34.18.7.35 2.36.35h5.84c1.66 0 2.02-.17 2.36-.35.38-.2.67-.49.87-.87.18-.34.35-.7.35-2.36V7.08c0-1.66-.17-2.02-.35-2.36a2.07 2.07 0 0 0-.87-.87c-.34-.18-.7-.35-2.36-.35H7.08zm-3.07-.97C4.66 2.18 5.31 2 7.08 2h5.84c1.77 0 2.42.18 3.07.53.64.34 1.14.84 1.48 1.48.35.65.53 1.3.53 3.07v5.84c0 1.77-.18 2.42-.53 3.07A3.57 3.57 0 0 1 16 17.47c-.65.35-1.3.53-3.07.53H7.08c-1.77 0-2.42-.18-3.07-.53A3.57 3.57 0 0 1 2.53 16c-.35-.65-.53-1.3-.53-3.07V7.08c0-1.77.18-2.42.53-3.07A3.57 3.57 0 0 1 4 2.53z" fill="currentColor"/><path d="M6 7.5c0-.47 0-.7.08-.88a1 1 0 0 1 .54-.54C6.8 6 7.03 6 7.5 6s.7 0 .88.08a1 1 0 0 1 .54.54c.08.18.08.41.08.88v3c0 .47 0 .7-.08.88a1 1 0 0 1-.54.54c-.18.08-.41.08-.88.08s-.7 0-.88-.08a1 1 0 0 1-.54-.54C6 11.2 6 10.97 6 10.5v-3zm5 0c0-.47 0-.7.08-.88a1 1 0 0 1 .54-.54c.18-.08.41-.08.88-.08s.7 0 .88.08a1 1 0 0 1 .54.54c.08.18.08.41.08.88v5c0 .47 0 .7-.08.88a1 1 0 0 1-.54.54c-.18.08-.41.08-.88.08s-.7 0-.88-.08a1 1 0 0 1-.54-.54c-.08-.18-.08-.41-.08-.88v-5z" fill="currentColor"/></svg>',name:"columns_square_20"}}a.d(t,{getIcon20ColumnsSquare:()=>i})},369565:(e,t,a)=>{function i(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10.18 1.5H9c-.8 0-1.47 0-2.01.05-.63.05-1.17.16-1.67.41a4.25 4.25 0 0 0-1.86 1.86c-.25.5-.36 1.04-.41 1.67C3 6.1 3 6.86 3 7.82v4.36c0 .95 0 1.71.05 2.33.05.63.16 1.17.41 1.67a4.25 4.25 0 0 0 1.86 1.86c.5.25 1.04.36 1.67.4.61.06 1.37.06 2.33.06h1.36c.96 0 1.72 0 2.33-.05a4.39 4.39 0 0 0 1.67-.41 4.25 4.25 0 0 0 1.86-1.86c.25-.5.36-1.04.41-1.67.05-.62.05-1.38.05-2.33V8.32c0-.48 0-.73-.06-.96-.05-.2-.13-.4-.24-.58-.12-.2-.3-.37-.64-.72l-3.62-3.62a4.27 4.27 0 0 0-.72-.65 2 2 0 0 0-.58-.24c-.23-.05-.48-.05-.96-.05Zm5.32 10.65c0 1 0 1.7-.04 2.24a2.9 2.9 0 0 1-.26 1.1A2.75 2.75 0 0 1 14 16.7c-.25.13-.57.21-1.11.26-.55.04-1.25.04-2.24.04h-1.3c-1 0-1.7 0-2.24-.04a2.9 2.9 0 0 1-1.1-.26 2.75 2.75 0 0 1-1.21-1.2 2.94 2.94 0 0 1-.26-1.11c-.04-.55-.04-1.25-.04-2.24v-4.3c0-1 0-1.7.04-2.24.05-.53.13-.86.26-1.1A2.75 2.75 0 0 1 6 3.3c.25-.13.57-.21 1.11-.26C7.66 3 8.36 3 9.35 3H10v2.35c0 .4 0 .76.02 1.05.03.3.09.61.24.9.21.4.54.73.94.94.29.15.6.21.9.24.29.02.64.02 1.05.02h2.35v3.65ZM14.88 7 11.5 3.62v1.7c0 .45 0 .74.02.95.02.22.05.3.07.33a.75.75 0 0 0 .3.31c.05.02.12.05.33.07.22.02.51.02.96.02h1.7Z" clip-rule="evenodd"/></svg>',name:"document_outline_20"}}a.d(t,{getIcon20DocumentOutline:()=>i})},845312:(e,t,a)=>{function i(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M11.5 4h-3c-2.32 0-4.25.43-5.58 1.76S1.02 9.15 1 12c0 .8.05 1.99.46 3 .2.5.5 1.01.98 1.4.48.39 1.09.61 1.81.61.8 0 1.37-.33 1.81-.77.31-.31.58-.72.8-1.07l.17-.24c.28-.42.55-.76.91-1 .35-.24.82-.42 1.56-.42h1c.74 0 1.21.18 1.56.42.36.24.63.58.91 1l.16.24c.23.35.5.76.8 1.07.45.44 1.02.77 1.82.77a2.8 2.8 0 0 0 1.81-.61c.47-.39.78-.9.98-1.4.4-1.01.47-2.2.46-3-.02-2.84-.6-4.9-1.92-6.23C15.75 4.43 13.82 4 11.5 4zm-1 8h-1c-1.01 0-1.79.26-2.4.68-.6.4-1 .94-1.31 1.4l-.23.34c-.21.32-.37.56-.57.76a.95.95 0 0 1-.74.32c-.4 0-.67-.12-.87-.28a1.9 1.9 0 0 1-.53-.79 6.82 6.82 0 0 1-.35-2.42c.02-2.71.57-4.28 1.48-5.19.91-.9 2.34-1.32 4.52-1.32h3c2.18 0 3.61.42 4.52 1.32.9.91 1.46 2.48 1.48 5.19 0 .75-.06 1.7-.35 2.42a1.9 1.9 0 0 1-.53.8c-.2.15-.47.27-.87.27a.95.95 0 0 1-.74-.32c-.2-.2-.36-.44-.57-.76l-.23-.34c-.3-.46-.7-1-1.3-1.4A4.13 4.13 0 0 0 10.5 12zM7.25 7.5a.75.75 0 0 0-1.5 0v.75H5a.75.75 0 0 0 0 1.5h.75v.75a.75.75 0 0 0 1.5 0v-.75H8a.75.75 0 0 0 0-1.5h-.75zm5.25.75a.75.75 0 0 0 0 1.5h2a.75.75 0 0 0 0-1.5z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"game_outline_20"}}a.d(t,{getIcon20GameOutline:()=>i})},957480:(e,t,a)=>{function i(){return{icon:'<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g id="gift_outline_20__Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="gift_outline_20__Icons-20/gift_outline_20"><g id="gift_outline_20__gift_outline_20"><path d="M0 0h20v20H0z"/><path d="M14.85 2.31c1.02 1.03 1.23 2.88-.26 4.19h.91a3 3 0 0 1 3 3v.5c0 .82-.1 1.15-.27 1.48a1.88 1.88 0 0 1-1.23.94v1.61c0 1.56-.16 2.13-.47 2.7-.3.57-.75 1.02-1.32 1.32l-.2.1c-.48.23-1.04.35-2.23.37h-5.3c-1.55 0-2.12-.16-2.69-.47a3.18 3.18 0 0 1-1.32-1.32l-.1-.2A5.12 5.12 0 0 1 3 14.3V12.4a1.88 1.88 0 0 1-1.23-.93c-.16-.3-.25-.6-.27-1.3V9.5a3 3 0 0 1 3-3h.91c-1.49-1.31-1.28-3.16-.26-4.19C6.37 1.1 8.74 1.04 10 3.57c1.26-2.53 3.63-2.47 4.85-1.26ZM9.25 12.5H4.5v1.76l.01.4c.02.6.08.92.2 1.2l.08.16c.17.31.4.54.7.71l.17.08c.33.14.72.2 1.6.2h1.99V12.5Zm6.25 0h-4.75v4.52h2l.4-.01c.6-.02.91-.08 1.19-.2l.16-.08c.31-.17.54-.4.71-.7.19-.36.27-.7.29-1.56V12.5ZM9.16 8H4.5C3.67 8 3 8.67 3 9.5v.87c.02.23.04.31.09.4.03.06.08.1.14.14.11.06.22.08.63.09h5.39V8h-.09Zm6.34 0h-4.76v3h5.4c.4 0 .52-.03.63-.09.06-.03.1-.08.14-.14.06-.12.09-.25.09-.78V9.5c0-.83-.67-1.5-1.5-1.5ZM9.22 6.16c-.43-3.1-1.96-3.83-3-2.79C5.16 4.42 5.9 5.95 9 6.38l.26.04Zm1.56 0-.03.19.01.06.24-.03c3.1-.43 3.83-1.96 2.79-3-1.05-1.05-2.58-.32-3.01 2.78Z" id="gift_outline_20__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></g></svg>',name:"gift_outline_20"}}a.d(t,{getIcon20GiftOutline:()=>i})},979110:(e,t,a)=>{function i(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 20 20"><path fill="currentColor" fill-rule="evenodd" d="M7.2 1.5a.85.85 0 0 1 .9.8l.25 3.8a.85.85 0 0 1-1.7.1L6.4 2.4a.85.85 0 0 1 .8-.9Zm5.89.18a.85.85 0 0 1 .58 1.06l-1.35 4.65a.85.85 0 0 1-1.64-.48l1.35-4.65a.85.85 0 0 1 1.06-.58Zm.59 7.08a.75.75 0 0 1 1.05-.08 5.14 5.14 0 0 1 1.77 4.07c0 2.68-2.3 5.75-6.5 5.75-3.12 0-6.5-2.22-6.5-5.75 0-.68.21-1.59.77-2.35C4.85 9.6 5.8 9 7.14 9c.39 0 1.9.13 2.79 1.91a.75.75 0 1 1-1.35.68c-.53-1.08-1.35-1.09-1.44-1.09-.83 0-1.34.35-1.66.79A2.62 2.62 0 0 0 5 12.75C5 15.18 7.4 17 10 17c3.36 0 5-2.4 5-4.25 0-.95-.22-2.06-1.24-2.93a.75.75 0 0 1-.08-1.06Z" clip-rule="evenodd"/></svg>',name:"logo_clips_outline_20"}}a.d(t,{getIcon20LogoClipsOutline:()=>i})},208850:(e,t,a)=>{function i(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M7.25 5.75a2.75 2.75 0 0 1 5.5 0V6h-5.5zM5.75 6v-.25a4.25 4.25 0 0 1 8.5 0V6c1.01.02 1.62.08 2.11.33a3 3 0 0 1 1.31 1.3c.33.65.33 1.49.33 3.17v.5c0 2.52 0 3.78-.49 4.74a4.5 4.5 0 0 1-1.97 1.97c-.96.49-2.22.49-4.74.49H9.2c-2.52 0-3.78 0-4.74-.49a4.5 4.5 0 0 1-1.97-1.97C2 15.08 2 13.82 2 11.3v-.5c0-1.68 0-2.52.33-3.16a3 3 0 0 1 1.3-1.31c.5-.25 1.1-.31 2.12-.33zm-.8 1.54c.43-.04.99-.04 1.85-.04h6.4c.86 0 1.42 0 1.85.04.4.03.56.09.63.12.28.15.51.38.66.66.03.07.1.22.12.63.04.43.04.99.04 1.85v.5c0 1.28 0 2.16-.06 2.83-.05.66-.15 1-.27 1.23a3 3 0 0 1-1.3 1.31c-.24.12-.58.22-1.24.27-.67.06-1.55.06-2.83.06H9.2c-1.28 0-2.16 0-2.83-.06-.66-.05-1-.15-1.23-.27a3 3 0 0 1-1.31-1.3 3.24 3.24 0 0 1-.27-1.24c-.06-.67-.06-1.55-.06-2.83v-.5c0-.86 0-1.42.04-1.85.03-.4.09-.56.12-.63.15-.28.38-.51.66-.66.07-.03.22-.1.63-.12zm.8 2.33a.87.87 0 1 1 1.75 0 .87.87 0 0 1-1.75 0zM13.38 9a.88.88 0 1 0 0 1.75.88.88 0 0 0 0-1.75z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"market_outline_20"}}a.d(t,{getIcon20MarketOutline:()=>i})},113133:(e,t,a)=>{function i(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M6.62 2.5h6.76c.99 0 1.65 0 2.21.16a4.05 4.05 0 0 1 2.75 2.75c.16.56.16 1.22.16 2.2v3.18a.75.75 0 0 1-1.5 0V8.5H3v1.47c0 .94 0 1.6.04 2.1.04.51.12.8.24 1.04.24.48.63.87 1.11 1.11.23.12.53.2 1.03.24.52.04 1.17.04 2.11.04H17a.75.75 0 1 1 0 1.5H7.5c-.9 0-1.62 0-2.2-.05a4.2 4.2 0 0 1-1.59-.4 4.05 4.05 0 0 1-1.77-1.76c-.24-.48-.34-1-.4-1.6-.04-.57-.04-1.3-.04-2.19V7.62c0-.99 0-1.65.16-2.21a4.05 4.05 0 0 1 2.75-2.75c.56-.16 1.22-.16 2.2-.16ZM3 7h14c-.01-.63-.03-.92-.1-1.17a2.55 2.55 0 0 0-1.73-1.73c-.33-.1-.75-.1-1.92-.1h-6.5c-1.17 0-1.6 0-1.92.1A2.55 2.55 0 0 0 3.1 5.83C3.03 6.08 3 6.37 3 7Z" clip-rule="evenodd"/><path fill-rule="evenodd" d="M14.72 12.22a.75.75 0 0 1 1.06 0l2.5 2.5a.75.75 0 0 1 0 1.06l-2.5 2.5a.75.75 0 1 1-1.06-1.06l1.97-1.97-1.97-1.97a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd"/></svg>',name:"money_transfer_outline_20"}}a.d(t,{getIcon20MoneyTransferOutline:()=>i})},639949:(e,t,a)=>{function i(){return{icon:'<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g id="music_outline_20__Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="music_outline_20__Icons-20/music_outline_20"><g id="music_outline_20__music_outline_20"><path d="M0 0h20v20H0z"/><path d="M14.73 2.05a2.28 2.28 0 0 1 2.75 2.23v7.99c0 3.57-3.5 5.4-5.39 3.51-1.9-1.9-.06-5.38 3.52-5.38h.37V6.76L8 8.43v5.82c0 3.5-3.35 5.34-5.27 3.62l-.11-.1c-1.9-1.9-.06-5.4 3.51-5.4h.37V6.24c0-.64.05-1 .19-1.36l.05-.13c.17-.38.43-.7.76-.93.36-.26.7-.4 1.41-.54ZM6.5 13.88h-.37c-2.32 0-3.34 1.94-2.45 2.82.88.89 2.82-.13 2.82-2.45v-.37Zm9.48-1.98h-.37c-2.32 0-3.34 1.94-2.46 2.82.89.89 2.83-.13 2.83-2.45v-.37Zm-.02-7.78a.78.78 0 0 0-.92-.6L9.06 4.77c-.4.09-.54.15-.68.25a.8.8 0 0 0-.27.33c-.08.18-.1.35-.1.88v.67l7.97-1.67V4.2Z" id="music_outline_20__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></g></svg>',name:"music_outline_20"}}a.d(t,{getIcon20MusicOutline:()=>i})},212233:(e,t,a)=>{function i(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 20 20"><path d="M13.53 9.28a.75.75 0 0 0-1.06-1.06L9 11.69l-1.47-1.47a.75.75 0 1 0-1.06 1.06l2 2a.75.75 0 0 0 1.06 0l4-4Z"/><path fill-rule="evenodd" d="M6.25 1a.75.75 0 0 1 .75.75v.27C7.51 2 8.11 2 8.82 2h.43v-.25a.75.75 0 0 1 1.5 0V2h.43c.7 0 1.3 0 1.82.02v-.27a.75.75 0 0 1 1.5 0v.46c.24.06.46.14.68.25a4.25 4.25 0 0 1 1.86 1.86c.25.5.36 1.04.41 1.67.05.61.05 1.37.05 2.33v3.86c0 .96 0 1.72-.05 2.33a4.39 4.39 0 0 1-.41 1.67 4.25 4.25 0 0 1-1.86 1.86c-.5.25-1.04.36-1.67.41-.61.05-1.38.05-2.33.05H8.82c-.96 0-1.72 0-2.33-.05a4.39 4.39 0 0 1-1.67-.41 4.25 4.25 0 0 1-1.86-1.86 4.39 4.39 0 0 1-.41-1.67c-.05-.61-.05-1.38-.05-2.33V8.32c0-.96 0-1.72.05-2.33.05-.63.16-1.17.41-1.67a4.25 4.25 0 0 1 1.86-1.86c.22-.1.44-.19.68-.25v-.46A.75.75 0 0 1 6.25 1Zm4.9 2.5c.77 0 1.37 0 1.85.02v.23a.75.75 0 0 0 1.5.05A2.75 2.75 0 0 1 15.7 5c.13.25.21.57.26 1.11.04.55.04 1.25.04 2.24v3.8c0 1 0 1.7-.04 2.24a2.9 2.9 0 0 1-.26 1.1 2.75 2.75 0 0 1-1.2 1.21c-.25.13-.57.21-1.11.25-.55.05-1.25.05-2.24.05h-2.3c-1 0-1.7 0-2.24-.05a2.9 2.9 0 0 1-1.1-.25 2.75 2.75 0 0 1-1.21-1.2 2.94 2.94 0 0 1-.26-1.11C4 13.84 4 13.14 4 12.15v-3.8c0-1 0-1.7.04-2.24.05-.53.13-.86.26-1.1A2.75 2.75 0 0 1 5.5 3.8.75.75 0 0 0 7 3.75v-.23a45.88 45.88 0 0 1 1.85-.02h.4v.25a.75.75 0 0 0 1.5 0V3.5h.4Z" clip-rule="evenodd"/></svg>',name:"notebook_check_outline_20"}}a.d(t,{getIcon20NotebookCheckOutline:()=>i})},431861:(e,t,a)=>{function i(){return{icon:'<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g id="place_outline_20__Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="place_outline_20__Icons-20/place_outline_20"><g id="place_outline_20__place_outline_20"><path opacity=".4" d="M0 0h20v20H0z"/><path d="M10 1c4.15 0 7.5 3.43 7.5 7.5 0 2.85-1.84 6.17-5.43 10.1a2.8 2.8 0 0 1-4.14 0C4.34 14.66 2.5 11.34 2.5 8.5 2.5 4.43 5.85 1 10 1Zm0 1.5c-3.38 0-6 2.83-6 6 0 2.38 1.68 5.41 5.04 9.08a1.3 1.3 0 0 0 1.92 0C14.32 13.91 16 10.88 16 8.5c0-3.17-2.62-6-6-6ZM10 5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 0 1 0-7Zm0 1.5a2 2 0 1 0 0 4 2 2 0 0 0 0-4Z" id="place_outline_20__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></g></svg>',name:"place_outline_20"}}a.d(t,{getIcon20PlaceOutline:()=>i})},310964:(e,t,a)=>{function i(){return{icon:'<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g id="podcast_outline_20__Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="podcast_outline_20__Icons-20/podcast_outline_20"><g id="podcast_outline_20__podcast_outline_20"><path id="podcast_outline_20__Shape" opacity=".4" d="M0 0h20v20H0z"/><path d="M10 5a4 4 0 0 1 4 4v3a4 4 0 0 1-3.25 3.93v1.32a.75.75 0 1 1-1.5 0v-1.32A4 4 0 0 1 6 12V9a4 4 0 0 1 4-4Zm0 1.5A2.5 2.5 0 0 0 7.5 9v3a2.5 2.5 0 0 0 4.5 1.5H10.45a.75.75 0 1 1 0-1.5h2.05v-1.5h-2.05a.75.75 0 1 1 0-1.5h2.05A2.5 2.5 0 0 0 10 6.5ZM10 2a7 7 0 0 1 6.94 6.07A1.5 1.5 0 0 1 18 9.5v3a1.5 1.5 0 0 1-3 0v-3c0-.43.18-.81.47-1.09a5.5 5.5 0 0 0-5.25-4.9L10 3.5a5.5 5.5 0 0 0-5.47 4.91c.29.28.47.66.47 1.09v3a1.5 1.5 0 0 1-3 0v-3c0-.68.45-1.25 1.06-1.43A7 7 0 0 1 10 2Z" id="podcast_outline_20__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></g></svg>',name:"podcast_outline_20"}}a.d(t,{getIcon20PodcastOutline:()=>i})},894801:(e,t,a)=>{function i(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 20 20"><path d="M10.75 6.41a.75.75 0 0 0-1.5 0v7.18a.75.75 0 0 0 1.5 0V6.4ZM6.5 8.3a.75.75 0 0 1 .75.75v4.55a.75.75 0 0 1-1.5 0V9.04a.75.75 0 0 1 .75-.75Zm7.75 2.5a.75.75 0 0 0-1.5 0v2.8a.75.75 0 0 0 1.5 0v-2.8Zm-10.5-8.8c.8-.43 1.57-.61 3.38-.61h5.74c1.8 0 2.58.18 3.38.6a4.26 4.26 0 0 1 1.77 1.77c.42.8.6 1.57.6 3.38v5.74c0 1.8-.18 2.58-.6 3.38a4.26 4.26 0 0 1-1.77 1.77c-.8.42-1.57.6-3.38.6H7.13c-1.8 0-2.58-.18-3.38-.6a4.26 4.26 0 0 1-1.77-1.77c-.42-.8-.6-1.57-.6-3.38V7.13c0-1.8.18-2.58.6-3.38a4.26 4.26 0 0 1 1.77-1.77Zm3.38.89c-1.7 0-2.19.17-2.67.43-.5.26-.89.65-1.15 1.15-.26.48-.44.98-.44 2.67v5.74c0 1.7.18 2.19.43 2.67.27.5.66.89 1.16 1.15.48.26.98.43 2.67.43h5.74c1.7 0 2.19-.17 2.67-.43a2.76 2.76 0 0 0 1.15-1.15c.26-.48.43-.98.43-2.67V7.13c0-1.7-.17-2.19-.43-2.67a2.76 2.76 0 0 0-1.15-1.15c-.48-.26-.98-.44-2.67-.44H7.13Z" clip-rule="evenodd"/></svg>',name:"poll_outline_20"}}a.d(t,{getIcon20PollOutline:()=>i})},365823:(e,t,a)=>{function i(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18.5 10a8.5 8.5 0 1 0-17 0 8.5 8.5 0 0 0 17 0ZM3 10a7 7 0 1 1 14 0 7 7 0 0 1-14 0Zm6.75-4a.75.75 0 0 1 .75.75v3.29l3.08 1.54a.75.75 0 1 1-.66 1.34l-3.5-1.75A.75.75 0 0 1 9 10.5V6.75A.75.75 0 0 1 9.75 6Z" clip-rule="evenodd"/></svg>',name:"recent_outline_20"}}a.d(t,{getIcon20RecentOutline:()=>i})},560006:(e,t,a)=>{function i(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M11.76 7.7c-.28-.27-.52-.51-.7-.73a2.3 2.3 0 0 1-.47-.77 2.25 2.25 0 0 1 0-1.4c.1-.3.27-.54.46-.77.19-.22.45-.48.73-.76l.25-.24.24-.25c.28-.28.54-.54.76-.73.23-.19.47-.36.77-.46.46-.14.94-.14 1.4 0 .3.1.54.27.77.46.22.19.46.43.74.7l.26.28.27.26c.28.28.52.52.7.74.2.23.37.47.47.77.14.46.14.94 0 1.4-.1.3-.27.54-.46.77-.19.22-.45.48-.73.76l-.25.24-.24.25c-.28.28-.54.54-.76.73-.23.19-.47.36-.77.46-.46.14-.94.14-1.4 0a2.3 2.3 0 0 1-.77-.46 13.4 13.4 0 0 1-.74-.7l-.26-.28-.27-.26zm4.4-1.03-.25.24-.24.25c-.3.3-.5.5-.67.64a.85.85 0 0 1-.27.18.75.75 0 0 1-.46 0A.86.86 0 0 1 14 7.8c-.16-.14-.36-.33-.67-.64l-.24-.25-.25-.24c-.3-.3-.5-.5-.64-.67a.85.85 0 0 1-.18-.27.75.75 0 0 1 0-.46.85.85 0 0 1 .18-.27c.14-.16.33-.36.64-.67l.25-.24.24-.25c.3-.3.5-.5.67-.64a.86.86 0 0 1 .27-.18.75.75 0 0 1 .46 0c.04.01.11.05.27.18.16.14.36.33.67.64l.24.25.25.24c.3.3.5.5.64.67.13.16.17.23.18.27.05.15.05.31 0 .46a.86.86 0 0 1-.18.27c-.14.16-.33.36-.64.67zM11 14.12c0-.4 0-.74.02-1.02.03-.3.08-.59.23-.87.21-.42.56-.77.98-.98.28-.15.58-.2.87-.23.28-.02.65-.02 1.05-.02h.7c.4 0 .77 0 1.05.02.3.03.59.08.87.23.42.21.77.56.98.98.15.28.2.58.23.87.02.28.02.63.02 1.02v.76c0 .4 0 .74-.02 1.02a2.25 2.25 0 0 1-1.2 1.86c-.3.14-.59.2-.88.22-.28.02-.65.02-1.05.02h-.7c-.4 0-.77 0-1.05-.02-.3-.03-.59-.08-.87-.23a2.25 2.25 0 0 1-.98-.98 2.3 2.3 0 0 1-.23-.87c-.02-.28-.02-.63-.02-1.02v-.38zm3.85 2.38h-.7c-.43 0-.71 0-.92-.02a.86.86 0 0 1-.32-.06.75.75 0 0 1-.33-.33.86.86 0 0 1-.06-.32c-.02-.2-.02-.49-.02-.92v-.7c0-.43 0-.71.02-.92.01-.2.04-.28.06-.32a.75.75 0 0 1 .33-.33.85.85 0 0 1 .32-.06c.2-.02.49-.02.92-.02h.7c.43 0 .71 0 .92.02.2.01.28.04.32.06.14.07.26.19.33.33.02.04.05.11.06.32.02.2.02.49.02.92v.7c0 .43 0 .71-.02.92a.86.86 0 0 1-.06.32.75.75 0 0 1-.33.33.86.86 0 0 1-.32.06c-.2.02-.49.02-.92.02zM2 5.12v.76c0 .4 0 .74.02 1.02a2.25 2.25 0 0 0 1.2 1.86c.3.14.59.2.88.22.28.02.65.02 1.05.02h.7c.4 0 .77 0 1.05-.02a2.25 2.25 0 0 0 1.86-1.2c.14-.3.2-.59.22-.88C9 6.62 9 6.27 9 5.88v-.76c0-.4 0-.74-.02-1.02a2.3 2.3 0 0 0-.23-.87 2.25 2.25 0 0 0-.98-.98 2.3 2.3 0 0 0-.87-.23C6.62 2 6.25 2 5.85 2h-.7c-.4 0-.77 0-1.05.02a2.25 2.25 0 0 0-1.86 1.2c-.14.3-.2.59-.22.88C2 4.38 2 4.73 2 5.12zM5.5 7.5h.35c.43 0 .71 0 .92-.02.2-.01.28-.04.32-.06a.75.75 0 0 0 .33-.33.85.85 0 0 0 .06-.32c.02-.2.02-.49.02-.92v-.7c0-.43 0-.71-.02-.92a.85.85 0 0 0-.06-.32.75.75 0 0 0-.33-.33.86.86 0 0 0-.32-.06c-.2-.02-.49-.02-.92-.02h-.7c-.43 0-.71 0-.92.02a.86.86 0 0 0-.32.06.75.75 0 0 0-.33.33.85.85 0 0 0-.06.32c-.02.2-.02.49-.02.92v.7c0 .43 0 .71.02.92.01.2.04.28.06.32.07.14.19.26.33.33.04.02.11.05.32.06.2.02.49.02.92.02zM2 14.12c0-.4 0-.74.02-1.02.03-.3.08-.59.23-.87.21-.42.56-.77.98-.98.28-.15.58-.2.87-.23.28-.02.65-.02 1.05-.02h.7c.4 0 .77 0 1.05.02.3.03.59.08.87.23.42.21.77.56.98.98.15.28.2.58.23.87.02.28.02.63.02 1.02v.76c0 .4 0 .74-.02 1.02a2.25 2.25 0 0 1-1.2 1.86c-.3.14-.59.2-.88.22-.28.02-.65.02-1.05.02h-.7c-.4 0-.77 0-1.05-.02a2.25 2.25 0 0 1-1.86-1.2 2.3 2.3 0 0 1-.22-.88C2 15.62 2 15.27 2 14.88v-.38zm3.85 2.38h-.7c-.43 0-.71 0-.92-.02a.86.86 0 0 1-.32-.06.75.75 0 0 1-.33-.33.85.85 0 0 1-.06-.32c-.02-.2-.02-.49-.02-.92v-.7c0-.43 0-.71.02-.92.01-.2.04-.28.06-.32a.75.75 0 0 1 .33-.33.85.85 0 0 1 .32-.06c.2-.02.49-.02.92-.02h.7c.43 0 .71 0 .92.02.2.01.28.04.32.06.14.07.26.19.33.33.02.04.05.11.06.32.02.2.02.49.02.92v.7c0 .43 0 .71-.02.92a.85.85 0 0 1-.06.32.75.75 0 0 1-.33.33.86.86 0 0 1-.32.06c-.2.02-.49.02-.92.02z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"services_outline_20"}}a.d(t,{getIcon20ServicesOutline:()=>i})},539112:(e,t,a)=>{function i(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5.47 6.78a.75.75 0 0 0 1.06 0l2.72-2.72v8.2a.75.75 0 1 0 1.5 0v-8.2l2.72 2.72a.75.75 0 1 0 1.06-1.06l-4-4a.75.75 0 0 0-1.06 0l-4 4a.75.75 0 0 0 0 1.06Zm-.97 4.97a.75.75 0 0 0-1.5 0v1.05c0 .76 0 1.37.04 1.87.04.52.13.97.35 1.4a3.55 3.55 0 0 0 1.55 1.55c.42.21.88.3 1.4.34.49.04 1.1.04 1.86.04h3.6c.76 0 1.37 0 1.87-.04.52-.04.97-.13 1.4-.34a3.55 3.55 0 0 0 1.54-1.56c.22-.42.3-.87.35-1.39.04-.5.04-1.1.04-1.86v-1.06a.75.75 0 0 0-1.5 0v1.02c0 .8 0 1.35-.03 1.78-.04.42-.1.66-.2.83-.19.39-.5.7-.89.9-.17.09-.41.15-.83.19-.43.03-.98.03-1.78.03H8.23c-.8 0-1.35 0-1.78-.03-.42-.04-.65-.1-.83-.2a2.05 2.05 0 0 1-.9-.89 2.17 2.17 0 0 1-.18-.83c-.04-.43-.04-.98-.04-1.78v-1.02Z" clip-rule="evenodd"/></svg>',name:"share_external_outline_20"}}a.d(t,{getIcon20ShareExternalOutline:()=>i})},913961:(e,t,a)=>{function i(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M10 17a7 7 0 1 1 0-14 7 7 0 0 1 0 14zm-8.5-7a8.5 8.5 0 1 1 17 0 8.5 8.5 0 0 1-17 0zm8.65 3.38 2.7-1.56a2.1 2.1 0 0 0 0-3.64l-2.7-1.56A2.1 2.1 0 0 0 7 8.44v3.12a2.1 2.1 0 0 0 3.15 1.82zm1.95-3.9c.4.23.4.8 0 1.04l-2.7 1.56a.6.6 0 0 1-.9-.52V8.44c0-.46.5-.75.9-.52z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"video_circle_outline_20"}}a.d(t,{getIcon20VideoCircleOutline:()=>i})},914008:(e,t,a)=>{function i(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" viewBox="0 0 28 28"><path d="M19 1a1 1 0 0 1 1 1v1.16c.84.13 1.38.35 1.93.64a5.45 5.45 0 0 1 2.27 2.27c.47.89.75 1.77.8 3.93v7.92c-.05 2.22-.32 3.11-.8 4.01a5.45 5.45 0 0 1-2.27 2.27c-.98.52-1.95.8-4.62.8h-7.22c-2.23-.05-3.12-.32-4.02-.8a5.45 5.45 0 0 1-2.27-2.27c-.5-.94-.78-1.87-.8-4.3V10c.05-2.16.33-3.04.8-3.93A5.45 5.45 0 0 1 6.07 3.8 5.68 5.68 0 0 1 8 3.16V2a1 1 0 0 1 2 0v1h8V2a1 1 0 0 1 1-1Zm4 11H5v5.6l.01.56c.04 1.5.2 2.16.56 2.83.33.63.81 1.1 1.44 1.45.75.4 1.48.55 3.4.56h7.18l.57-.01c1.5-.04 2.16-.2 2.83-.55a3.45 3.45 0 0 0 1.45-1.45c.4-.75.55-1.48.56-3.4V12Zm-5.4-7H10v1a1 1 0 0 1-2 0v-.8c-.38.08-.68.2-.99.36a3.45 3.45 0 0 0-1.44 1.45c-.38.7-.53 1.37-.56 2.99h17.98v-.16c-.04-1.5-.2-2.16-.56-2.83A3.45 3.45 0 0 0 21 5.57a3.83 3.83 0 0 0-.99-.38V6a1 1 0 1 1-2 0V5h-.4Z"/></svg>',name:"calendar_outline_28"}}a.d(t,{getIcon28CalendarOutline:()=>i})},536247:(e,t,a)=>{function i(){return{icon:'<svg fill="none" height="36" viewBox="0 0 36 36" width="36" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path d="M10 10.5a8 8 0 1 1 16 0h-2.5a5.5 5.5 0 1 0-11 0zM24.5 16a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM10 17.5a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0z"/><path clip-rule="evenodd" d="M8.86 10.5h18.01c1.79 0 2.43.19 3.08.53.66.35 1.17.86 1.52 1.52.34.65.53 1.3.53 3.08v8.03c0 3.07-.37 4.44-1.07 5.75a7.27 7.27 0 0 1-3.02 3.02c-1.3.7-2.68 1.07-5.75 1.07h-8.32c-3.07 0-4.44-.37-5.75-1.07-1.3-.7-2.32-1.72-3.02-3.02S4 26.73 4 23.66v-8.03c0-1.79.19-2.43.53-3.08.35-.66.86-1.17 1.52-1.52.61-.33 1.23-.51 2.8-.53zM8.9 13h-.38c-.76.03-1.03.1-1.3.24-.21.11-.37.27-.48.49l-.06.12c-.12.28-.17.63-.18 1.55v8.26c0 2.46.22 3.53.77 4.57a4.77 4.77 0 0 0 2 2c.95.5 1.93.73 3.96.76l.61.01h8.92c2.04-.04 3.02-.26 3.97-.77a4.77 4.77 0 0 0 2-2c.5-.95.73-1.93.76-3.96l.01-.61v-8.03c0-1.25-.06-1.58-.24-1.9a1.14 1.14 0 0 0-.49-.5l-.12-.05A4.02 4.02 0 0 0 27.1 13z" fill-rule="evenodd"/></g></svg>',name:"market_outline_36"}}a.d(t,{getIcon36MarketOutline:()=>i})},485682:(e,t,a)=>{function i(){return{icon:'<svg fill="none" height="56" viewBox="0 0 56 56" width="56" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path clip-rule="evenodd" d="M26.5 19.5c0-.83.67-1.5 1.5-1.5a10 10 0 0 1 10 10 1.5 1.5 0 0 1-3 0 7 7 0 0 0-7-7 1.5 1.5 0 0 1-1.5-1.5zM6.13 14.42A11.86 11.86 0 0 0 4 21.44V34c0 .58.08 1.8.23 3.04.14 1.18.37 2.63.75 3.53.53 1.29 1.29 2.58 2.3 3.63 1.14 1.36 2.8 2.3 4.47 2.89 1.71.6 3.58.91 5.25.91h21c2.79 0 4.98-.35 6.8-1.08l3.64 3.64a1.5 1.5 0 0 0 2.12-2.12l-42-42a1.5 1.5 0 1 0-2.12 2.12l3.15 3.16a7.75 7.75 0 0 0-3.46 2.7zm5.87-.14c-1.32 0-2.53.67-3.46 1.92A8.88 8.88 0 0 0 7 21.44V34c0 .42.07 1.5.2 2.68.15 1.22.35 2.28.55 2.75.42 1.02 1 1.98 1.77 2.77a7.2 7.2 0 0 0 3.23 2.06c1.39.5 2.92.74 4.25.74h21c1.83 0 3.26-.17 4.42-.46l-8.49-8.49a10 10 0 0 1-13.98-13.98l-7.8-7.8zM21 28a7 7 0 0 0 10.78 5.9l-9.68-9.68A6.96 6.96 0 0 0 21 28z" fill-rule="evenodd"/><path d="M22 5.5c-1.21 0-2.21.6-2.92 1.16-.72.58-1.33 1.28-1.74 1.77l-.3.38a1.5 1.5 0 1 0 2.35 1.86l.25-.32c.41-.48.85-.97 1.31-1.35.49-.38.83-.5 1.05-.5h12c.22 0 .56.12 1.05.5.5.4.94.9 1.33 1.39l.43.54 1.02 1.27a5.42 5.42 0 0 0 2.42 1.6c.88.3 1.86.48 2.75.48h1c1.32 0 2.53.67 3.46 1.92A8.88 8.88 0 0 1 49 21.44V34c0 .5 0 1.43-.1 2.48a9.84 9.84 0 0 1-1 3.6 1.5 1.5 0 0 0 2.67 1.36l.4-.82c.55-1.22.8-2.66.91-3.85.12-1.2.12-2.26.12-2.76V21.44c0-2.67-.76-5.16-2.13-7.02A7.26 7.26 0 0 0 44 11.28h-1c-.52 0-1.17-.1-1.74-.32-.61-.21-.96-.47-1.09-.63L39.2 9.1l-.53-.66c-.41-.49-1.02-1.2-1.74-1.77A4.74 4.74 0 0 0 34 5.5z"/></g></svg>',name:"camera_off_outline_56"}}a.d(t,{getIcon56CameraOffOutline:()=>i})},973243:(e,t,a)=>{a.d(t,{GROUPS_ADMIN_LEVEL_ADMINISTRATOR:()=>n,GROUPS_ADMIN_LEVEL_USER:()=>i,GROUPS_CLASS_EVENT:()=>s,USER_META_FIELD_IS_DONUT_PAID_MEMBER:()=>o});const i=0,n=3,o="is_donut_paid_member";const s=2},256891:(e,t,a)=>{a.d(t,{DateCalendar:()=>I,Datepicker:()=>M,Daypicker:()=>P,Timepicker:()=>E,dateFormat:()=>T,getMonths:()=>A,monthFormat:()=>C});var i=a(351118),n=a(754866),o=a(972332),s=a(866467),r=a(898848),l=a(593159),d=a(101148),c=a(939646),_=a(575753),p=a(672277),u=a(801875),h=a(493874),g=a(425936),m=a(298077),v=a(632683);const w={mn:[],mnOf:[],mnOfSm:[],days:["mon","tue","wed","thu","fri","sat","sun"]};let f=(0,s.getLang)("larr");"larr"===f&&(f="&larr;");let b=(0,s.getLang)("rarr");"rarr"===b&&(b="&rarr;");const k=["d","w","m"];for(let e=1;e<13;e++){const t=(0,v.getLangsForMonth)(e);w.mn.push(t[0]),w.mnOf.push(t[1]),w.mnOfSm.push(t[2])}for(let e=0;e<7;e++){let t;switch(e){case 0:t=(0,s.getLang)("events_mon");break;case 1:t=(0,s.getLang)("events_tue");break;case 2:t=(0,s.getLang)("events_wed");break;case 3:t=(0,s.getLang)("events_thu");break;case 4:t=(0,s.getLang)("events_fri");break;case 5:t=(0,s.getLang)("events_sat");break;case 6:t=(0,s.getLang)("events_sun")}t&&!t.startsWith("events")&&(w.days[e]=t)}const y=[31,0,31,30,31,30,31,31,30,31,30,31];window.cals||a._dG("cals",{list:{},getMonth:function(e,t,a,i){return window.cals.list[e]&&window.cals.list[e].getMonth(t,a,!1,i),!1},getDay:function(e,t,a,i){return window.cals.list[e]&&window.cals.list[e].getDay(t,a,i),!1}});const T=()=>{let e=(0,s.getLang)("datepicker_date_format");return"date format"===e&&(e="{day} {month} {year}"),e},C=()=>{let e=(0,s.getLang)("datepicker_month_format");return"month format"===e&&(e="{month} {year}"),e};class I{constructor(e){let t=e.container,a=Math.round(1e6*Math.random());if(!t)return;let o=null,s=null;if(e.time&&e.inlineTime){let a=(0,n.ge)(e.time,t);o=a?(0,n.domPN)(a):(0,n.ge)(e.time),s=e.inlineTimeContainerIdx}else s=window._ui.reg(this);window.cals.list[s]=this,t.innerHTML="<div></div>",t=t.firstElementChild;let r=(k[e.mode]||e.mode||"d").toString().replace(/(this|next|prev)/,""),l=e.hideAnotherMonth&&!0,p=this.parseDay=function(e){return e=e.toString(),{y:parseInt(e.substr(0,4),10),m:parseInt(e.substr(4,2),10),d:parseInt(e.substr(6,2),10)}},g=e.day||{d:-1,m:-1,y:-1};g.m||(g=p(g));let m=e.addRows||"",v=e.addRowsM||m;this.setDay=(e,t,a)=>{g=t?{d:e,m:t,y:a}:p(e),this.getMonth(g.m,g.y)},this.setMode=e=>{r=(k[e]||e||"d").replace(/(this|next|prev)/,""),this.getMonth(g.m,g.y,!0)},this.getDay=e.getDay||function(e,t,a){},this.getMonth=function(p,f,b,k){let T=w.mn,I=new Date(f,p-1,1),E=new Date(f,p,0),M=new Date(f,p-1,0);I.od=I.getDay(),0==I.od&&(I.od=7);let P="-1"==r,A=!1,S=P?new Date(3e3,1,1):new Date;S=new Date(S.getFullYear(),S.getMonth(),"m"===r?1:S.getDate());let D=new Date,x=0;e.activePeriod&&(e.pastActive?(D=new Date(e.activePeriodStart-e.activePeriod),x=new Date(e.activePeriodStart)):(D=new Date(e.activePeriodStart),x=new Date(e.activePeriodStart+e.activePeriod)),D=new Date(D.getFullYear(),D.getMonth(),"m"===r?1:D.getDate()),x=new Date(x.getFullYear(),x.getMonth(),"m"===r?1:x.getDate())),y[1]=(0,d.isLeapYear)(I.getFullYear())?29:28;let L,O,$=[],N=[],R=[],B='<table class="%cls%" cols="%cols%" cellpadding="0" border="0" cellspacing="0">%rows%</table>';if("m"===r){let i=f==g.y?g.m:0,o=f+1,r=f-1;const{icon:l}=(0,u.getIcon20ChevronRightOutline)(),{icon:d}=(0,h.getIcon20ChevronLeftOutline)();L='<tr><td align="center" class="month">'+f+'</td><td class="month_arr"><a class="arr left" onclick="return cals.getMonth('+s+",1,"+r+');">'+d+'</a></td><td class="month_arr"><a class="arr right" onclick="return cals.getMonth('+s+",1,"+o+');">'+l+"</a></td></tr>",$.push('<tr><td colspan="2">'),$.push((0,n.rs)(B,{cls:"cal_table_head",cols:"3",rows:L})),$.push("</td></tr>"),N.push("<tr>");for(let t=1;t<=12;t++){let n="";t%2==1&&(t>1&&N.push("</tr><tr>"),n=" day_left");let o=t==i?"day sel":"day",r=new Date(f,t-1,1);(!e.pastActive&&r<S||e.pastActive&&r>S||e.pastActive&&r<e.startDate)&&(o+=" inactive_day"),e.activePeriod&&(r>x||r<D)&&(o+=" inactive_day"),r.getTime()===S.getTime()&&(o+=" today"),N.push('<td class="'+o+n+'" id="day'+t+"_"+a+'" onclick="return cals.getDay('+s+", 1, "+t+", "+f+');">'+T[t-1]+"</td>")}N.push("</tr>"),R.push((0,n.rs)(B,{cls:"cal_table",cols:"2",rows:"<thead>"+$.join("")+'</thead><tbody class="month_selector">'+N.join("")+"</tbody>"})),b||(t.style.height=t.offsetHeight+"px"),(0,n.val)(t,R.join(""))}else{let o,d,b,U,V=!1,z=f==g.y&&p==g.m?g.d:0;z>0&&(V=!0),12==p?(o=1,d=f+1):(o=p+1,d=f),1==p?(b=12,U=f-1):(b=p-1,U=f),o==g.m&&(z=g.d+E.getDate(),V=!0),b==g.m&&(z=g.d-M.getDate(),V=!0);let F=C().replace("{month}",T[p-1]).replace("{year}",'<span class="year">'+f+"</span>"),H=(0,i.classNames)("cal_table",{disabled:P,unshown:k});const{icon:G}=(0,u.getIcon20ChevronRightOutline)(),{icon:j}=(0,h.getIcon20ChevronLeftOutline)();L='<tr><td class="month"><a class="cal_month_sel" onclick="return cals.getMonth('+s+","+p+","+f+',1);">'+F+'</a></td><td class="month_arr"><a class="arr left" onclick="return cals.getMonth('+s+","+b+","+U+');">'+j+'</a></td><td class="month_arr"><a class="arr right" onclick="return cals.getMonth('+s+","+o+","+d+');">'+G+"</a></td></tr>",O='<tr><td class="month">'+F+'</td><td class="month_arr"><span class="arr left">'+j+'</span></td><td class="month_arr"><span class="arr right">'+G+"</span></td></tr>",$.push('<tr><td colspan="7">'),$.push((0,n.rs)(B,{cls:"cal_table_head",cols:"3",rows:P?O:L})),$.push("</td></tr><tr>");for(let e=0;e<7;e++)$.push('<td class="daysofweek">'+w.days[e]+"</td>");$.push("</tr>"),N.push("<tr>");let Y=[];for(let t=1;t<=42;t++){let i,n=t%7==1?" day_left":"",o=t-I.od>=0&&t-I.od<y[p-1]?t-I.od+1:0,d=new Date(f,p-1,t-I.od+1),c=o,_=1;"w"===r&&(c=t-I.od-t%7+2,t%7==0&&(c-=7),z&&(_=8-(z+I.od-1)%7,8==_&&(_=1)));let u=n;if(u+=z>0&&o>=z&&o<z+_?" day sel":" day",(!e.pastActive&&d<S||e.pastActive&&d>S)&&(u+=" inactive_day"),e.activePeriod&&(d>x||d<D)&&(u+=" inactive_day"),d.getTime()==S.getTime()&&(u+=" today"),o>0)Y[t]=c,N.push('<td id="day'+o+"_"+a+'" class="'+u+'" onclick="return cals.getDay('+s+", "+c+", "+p+", "+f+');">'+o+"</td>");else if(36!=t){if(!A)if("w"===r&&(Y[t]=c),l)i="&nbsp",N.push('<td class="day no_month_day'+n+'">'+i+"</td>");else{Y[t]=c,i=d.getDate();let e=t<=7;e?(u+=" prev_month_day",u+=V&&M.getDate()+z===i?" sel":""):(u+=" next_month_day",u+=V&&z-E.getDate()===i?" sel":"");let n=e?p-1:p+1,r=f;n<1&&(n=12+n,r=f-1),n>12&&(n-=12,r=f+1),N.push(`<td id="day${o}_${a}" class="${u}" onclick="return cals.getDay(${s}, ${i}, ${n}, ${r});" >${i}</td>`)}}else A=!0;t%7==0&&t<36&&N.push("</tr><tr>")}N.push("</tr>"+m),N=N.join("").replace("<tr></tr>",""),R.push((0,n.rs)(B,{cls:H,cols:"7",rows:"<thead>"+$.join("")+"</thead><tbody>"+N+"</tbody>"})),$=[],N=[],S=new Date(S.getFullYear(),S.getMonth(),1),z=f==g.y?g.m:0,H="cal_table"+(P?" disabled":"")+(k?"":" unshown"),L='<tr><td class="month"><a class="cal_month_sel" onclick="return cals.getMonth('+s+","+p+","+f+');">'+f+'</a></td><td class="month_arr"><a class="arr left" onclick="return cals.getMonth('+s+","+p+","+(f-1)+',1);">'+j+'</a></td><td class="month_arr"><a class="arr right" onclick="return cals.getMonth('+s+","+p+","+(f+1)+',1);">'+G+"</a></td></tr>",O='<tr><td class="month">'+f+'</td><td class="month_arr"><span class="arr left">'+j+'</span></td><td class="month_arr"><span class="arr right">'+G+"</span></td></tr>",$.push('<tr><td colspan="2">'),$.push((0,n.rs)(B,{cls:"cal_table_head",cols:"3",rows:P?O:L})),$.push("</td></tr>"),N.push("<tr>");for(let t=1;t<=12;t++){let i="";t%2==1&&(t>1&&N.push("</tr><tr>"),i=" day_left");let n="day ",o=new Date(f,t-1,1);(!e.pastActive&&o<S||e.pastActive&&o>S)&&(n+=" inactive_day"),e.activePeriod&&(o.getMonth()>x.getMonth()||o.getMonth()<D.getMonth())&&(n+=" inactive_day"),o.getTime()==S.getTime()&&(n+=" today"),N.push('<td class="'+n+i+'" id="day'+t+"_"+a+'" onclick="return cals.getMonth('+s+", "+t+", "+f+');">'+T[t-1]+"</td>")}N.push("</tr>"+v),R.push((0,n.rs)(B,{cls:H,cols:"2",rows:"<thead>"+$.join("")+'</thead><tbody class="month_selector">'+N.join("")+"</tbody>"})),(0,n.val)(t,R.join("")),_.browser.opera&&!_.browser.mobile&&(0,c.animate)(t,{opacity:.99},20,c.animate.pbind(t,{opacity:1},20))}if(e.onMonthSelect&&e.onMonthSelect(),e.time&&e.inlineTime){(0,n.ge)(e.inlineTimeContainerId).appendChild(o)}},this.getMonth(g.m,g.y)}}class E{constructor(e,t={}){if(!(e=(0,n.ge)(e)))return;let a=e.id,i=e.name||"",o=e.value||"",s={onUpdate:function(e,t){},time:0,hour:0,min:0,minStep:5,resfmt:"ts",format:'{hour}<div class="timepicker_dots"> : </div>{min}',...t},r=e.parentNode;o&&(s.time=o),s.time&&(s.hour=Math.floor(s.time/3600),s.min=Math.floor((s.time-3600*s.hour)/60));let l=s.hour||0,c=s.min||0,_=s.resfmt;c-=c%s.minStep;const p=s.format.replace("{hour}",`<div class="fl_l datepicker_item"><input type="hidden" id="${a}_hour_input" value="${l}"/></div>`).replace("{min}",`<div class="fl_l datepicker_item"><input type="hidden" id="${a}_min_input" value="${c}"/></div>`);let u=(0,n.ce)("div",{id:a+"_timepicker_container",className:"timepicker_container",innerHTML:`\n      <input type="hidden" name="${i}" id="${a}" value="${o}"/>\n      ${p}\n      <div class="results_container">\n        <div class="result_list" style="display:none;"></div>\n        <div class="result_list_shadow">\n            <div class="shadow1"></div>\n            <div class="shadow2"></div>\n         </div>\n       </div>\n    `.trim()});r.replaceChild(u,e);const h=()=>{let e=this.hourDD.val(),t=this.minDD.val();"plain"===_?(0,n.ge)(a).value=e+":"+t:"ts"===_&&((0,n.ge)(a).value=3600*e+60*t),s.onUpdate(e,t)};let g=[],m=[];for(let e=0;e<24;e++)g.push([e,e]);for(let e=0;e<60;e+=s.minStep)m.push([e,(0,d.leadingZero)(e)]);this.hourDD=new window.Dropdown((0,n.ge)(a+"_hour_input"),g,{width:60,dark:1,multiselect:!1,onChange:h}),this.minDD=new window.Dropdown((0,n.ge)(a+"_min_input"),m,{width:60,dark:1,multiselect:!1,onChange:h})}}class M{constructor(e,t={}){if(!(e=(0,n.ge)(e)))return;let a,i,s,d={},c=this,u=!1,h=0,m=0,v=e.id,f=v+"_date_input",b=e.name||v,k=e.parentNode,y=v+"_cal_box",M=v+"_cal_div",P=v+"_cal_frame",A=!1,S={mode:"d",resfmt:"ts",width:145,addRows:"",noFuture:!1,noPast:!1,activePeriod:!1,activePeriodStart:Date.now(),pastActive:!1,onUpdate:function(e,t){},onMonthSelect:function(){},hideAnotherMonth:!1,updateCalendarOnPastDateSet:!1},D=(t={...S,...t}).mode,x=t.onUpdate,L=t.width,O=t.resfmt,$=t.addRows,N=t.addRowsM||$,R=()=>("h"===D||(u?this.hide():a(),(0,n.ge)(f).blur()),!1),B=function(){let e=(0,n.ge)(M),a=(0,n.ge)(y),i=(0,n.ge)(f),o=!1,s=(0,n.getSize)("page_header_cont")[1],l=t.sideTopOffset;if(!e||!a||!i)return;let d=(0,n.getSize)(e);(0,n.setStyle)(a,{marginTop:0}),o=t.sideTop?d[1]+l<(0,n.getXY)(e)[1]-(0,p.scrollGetY)()-s-3*l:(0,n.getXY)(e)[1]+d[1]>(0,p.scrollGetY)()+window.lastWindowHeight;let c=o?-d[1]-30-2*(0,r.intval)((0,n.getStyle)(a,"paddingTop")):0;(0,n.setStyle)(a,{marginTop:c}),t.onMonthSelect()};a=()=>{if(u)return;u=!0,t.inlineTime||window._ui.sel(this.guid),(0,n.show)(y);let e=new I({container:(0,n.ge)(M),day:d,mode:D,addRows:$,addRowsM:N,hideAnotherMonth:t.hideAnotherMonth,pastActive:t.pastActive,activePeriod:t.activePeriod,activePeriodStart:t.activePeriodStart,time:t.time,inlineTime:t.inlineTime,inlineTimeContainerId:t.inlineTimeContainerId,onMonthSelect:B,getDay:function(a,n,o){let s={d:a,m:n,y:o};if(i(s,D),t.inlineTime){if(!t.updateCalendarOnPastDateSet&&new Date(s.y,s.m-1,s.d,23,59)<new Date)return;e.setDay(a,n,o)}}}),a=(0,n.getSize)((0,n.ge)(M));(0,n.setStyle)((0,n.ge)(P),{width:a[0],height:a[1]}),B(),(0,n.ge)(f).focus()},i=function(e,a,i,o){if(!i&&t.noPast&&new Date(e.y,e.m-1,e.d,23,59)<new Date)return;if(!i&&t.noFuture&&new Date(e.y,e.m-1,e.d,0,0)>new Date)return;if(!i&&t.activePeriod){const i=new Date(e.y,e.m-1,e.d,0,0);let n,o;if(t.pastActive?(n=new Date(t.activePeriodStart-t.activePeriod),o=new Date(t.activePeriodStart)):(n=new Date(t.activePeriodStart),o=new Date(t.activePeriodStart+t.activePeriod)),n=new Date(n.getFullYear(),n.getMonth(),"m"===a?1:n.getDate()),o=new Date(o.getFullYear(),o.getMonth(),"m"===a?1:o.getDate()),i>o||i<n)return}d=e;let _=(0,n.geByClass1)("datepicker_control",s);if("h"===a)(0,n.addClass)(_,"disabled");else if((0,n.removeClass)(_,"disabled"),o){let e=(0,n.ge)(f);e&&(e.value="",t.placeholder&&(e.placeholder=t.placeholder))}else(0,n.ge)(f).value="m"===a?C().replace("{month}",(0,l.winToUtf)(w.mn[e.m-1])).replace("{year}",e.y):T().replace("{day}",e.d).replace("{month}",(0,l.winToUtf)(w.mnOf[e.m-1])).replace("{year}",e.y);t.inlineTime||c.hide(),o||("plain"===O?(0,n.ge)(v).value=e.d+"."+e.m+"."+e.y+(t.time?" "+h+":"+m:""):"ts"===O&&((0,n.ge)(v).value=Math.floor(new Date(e.y,e.m-1,e.d,h,m).getTime()/1e3)-(60*(new Date).getTimezoneOffset()+(0,r.intval)(vk.tz))-(0,r.intval)(vk.dt))),i||x(e,a)},this.hide=function(e){u&&(u=!1,t.inlineTime&&!e||(window._ui.sel(!1),(0,n.hide)(y)))},this.setMode=function(e){D=e,i(d,D)},this.destroy=()=>{t.inlineTime||(window._ui._uids[this.guid]={}),(0,o.removeEvent)((0,n.geByClass1)("datepicker_control",s),"mousedown",R)},this.setDate=function(e,a,n,o,s,r){let l=!1;if(e||a||n)"m"!==D&&(d.d=n),d.m=a,d.y=e;else{let e=new Date;"m"!==D&&(d.d=e.getDate()),d.m=e.getMonth()+1,d.y=e.getFullYear(),l=!0}void 0!==s&&void 0!==r&&(h=s,m=r),i(d,D,o,l&&t.allowEmpty)},this.toogle=R,this.setActivePeriodStart=function(e){t.activePeriodStart=e};let U,V=0;if(t.day||t.month||t.year)"m"!==D&&(d.d=t.day),d.m=t.month,d.y=t.year,t.time&&(h=t.hour||0,m=t.min||0);else if(U=(e.value||"").match(/(\d+)\.(\d+)(?:\.(\d+))?(?:\s+(\d+)\:(\d+))?/))"m"!==D&&(d.d=(0,r.intval)(U[3].length?U[1]:0)),d.m=(0,r.intval)(U[3].length?U[2]:U[1]),d.y=(0,r.intval)(U[3].length?U[3]:U[2]),t.time&&(h=U[4]||0,m=U[5]||0);else if(parseInt(e.value)){const t=parseInt(e.value)+(60*(new Date).getTimezoneOffset()+(0,r.intval)(vk.tz))+(0,r.intval)(vk.dt);V=new Date(1e3*t)}else if(t.date){const e=(0,r.intval)(t.date)+(60*(new Date).getTimezoneOffset()+(0,r.intval)(vk.tz))+(0,r.intval)(vk.dt);V=new Date(1e3*e)}else V=new Date,A=!0;V&&(d.d=V.getDate(),d.m=V.getMonth()+1,d.y=V.getFullYear(),h=V.getHours(),m=V.getMinutes());const{icon:z}=(0,g.getIcon20CalendarOutline)();if(s=(0,n.ce)("div",{id:v+"_datepicker_container",className:"datepicker_container",innerHTML:`\n      <input type="hidden" name="${b}" id="${v}"/>\n      <div class="datepicker_control">\n        <input readonly="1" type="text" class="datepicker_text" id="${f}"/>\n        <span class="datepicker_control_icon">${z}</span>\n      </div>\n      <div id="${y}" class="cal_box">\n        <iframe id="${P}" class="cal_frame"></iframe>\n        <div id="${M}" class="cal_div"></div>\n      </div>\n    `.trim()},{width:L}),k.replaceChild(s,e),(0,o.addEvent)((0,n.geByClass1)("datepicker_control",s),"mousedown",R),i(d,D,!0,A&&t.allowEmpty),t.inlineTime||(this.guid=window._ui.reg({container:s,onEvent:e=>{if("mousedown"===e.type){let t=!0,a=e.target;for(;a&&a!==a.parentNode;){if(a===s){t=!1;break}a=a.parentNode}t&&this.hide()}},_blur:()=>{this.hide()}})),t.time){let e=(0,n.ge)(t.time);this.timePicker=new E(e,{onUpdate:function(e,t){h=e,m=t,i(d,D)},resfmt:O,hour:h,min:m,minStep:t.minStep||5})}_.browser.mozilla&&(0,n.hide)(P)}}class P{constructor(e,t={}){if(!(e=(0,n.ge)(e)))return;let a=e.id,i=e.name||"",o=e.value||"";const r="padding:0 3px;width:4px;";let l,d,c,_={...{onUpdate:function(e,t,a){},date:0,year:0,month:0,day:0,format:`{day}<div class="fl_l datepicker_item" style="${r}">&nbsp;</div>{month}<div class="fl_l datepicker_item" style="${r}">&nbsp;</div>{year}`,width:0},...t},p=e.parentNode;if(o&&(_.date=o),_.date)if(_.date<3e7)_.year=Math.floor(_.date/1e4),_.month=Math.floor((_.date-1e4*_.year)/100),_.day=_.date-1e4*_.year-100*_.month;else{let e=new Date(1e3*_.date);_.year=e.getFullYear(),_.month=e.getMonth(),_.day=e.getDate()}const u=_.format.replace("{year}",`<div class="fl_l datepicker_item"><input type="hidden" id="${a}_year_input" value="${_.year}"/></div>`).replace("{month}",`<div class="fl_l datepicker_item"><input type="hidden" id="${a}_month_input" value="${_.month}"/></div>`).replace("{day}",`<div class="fl_l datepicker_item"><input type="hidden" id="${a}_day_input" value="${_.day}"/></div>`);let h=`<div class="fl_l datepicker_item"><input type="hidden" name="${i}" id="${a}" value="${o}"/>${u}</div>`,g=(0,n.ce)("div",{id:a+"_daypicker_container",className:"daypicker_container clear_fix",innerHTML:h});p.replaceChild(g,e);let m=function(e,t){let a=new Date(t||2004,e,0).getDate(),i=[[0,(0,s.getLang)("global_day_label")]];for(let e=1;e<=a;e++)i.push([e,e]);return i},v=function(){let e=parseInt(c.val()),t=parseInt(d.val()),i=parseInt(l.val());(0,n.ge)(a).value=1e4*e+100*t+i,l.setData(m(t,e)),_.onUpdate(e,t,i)};const f=new Date;let b=[[0,(0,s.getLang)("global_year_label")]],k=[[0,(0,s.getLang)("global_month_label")]];for(let e=f.getFullYear();e>=(_.startYear||1800);e--)b.push([e,e]);for(let e=0;e<12;e++)k.push([e+1,w.mnOf[e]]);if(l=new window.Dropdown((0,n.ge)(a+"_day_input"),m(_.month,_.year),{width:80,dark:1,zeroPlaceholder:_.zeroPlaceholder,onChange:v}),d=new window.Dropdown((0,n.ge)(a+"_month_input"),k,{width:120,dark:1,zeroPlaceholder:_.zeroPlaceholder,onChange:v}),c=new window.Dropdown((0,n.ge)(a+"_year_input"),b,{width:75,dark:1,zeroPlaceholder:_.zeroPlaceholder,onChange:v}),_.width){let e=(0,n.getSize)(g.firstElementChild)[0],t=_.width-e,a=(0,n.getSize)(d.container)[0];[d.container,d.resultList].forEach((e=>{(0,n.setStyle)(e,{width:parseInt(a+t)})}))}}}function A(e){const t=[0,1,2];t.includes(e)||((0,m.logError)(new Error(`getMonths should have format in ${t.join(",")}`)),e=0);const a=["null"];for(let t=1;t<=12;t++)a.push((0,v.getLangsForMonth)(t)[e]);return a}},138430:(e,t,a)=>{a.d(t,{showAttachNewProductBox:()=>o});var i=a(972332),n=a(699937);function o(e,t){return(0,n.showProductAttachModal)(t),(0,i.cancelEvent)(e)}},318227:(e,t,a)=>{a.d(t,{createPostTooltip:()=>d,getPostTooltipOptionText:()=>_,updatePostTooltipActionRadioBtn:()=>c});var i=a(754866),n=a(250598),o=a(683234),s=a(791947),r=a(342018),l=a(593159);const d=(e,t,a,o)=>{const s=t||"",d=e+s,c=(0,i.ge)(d),_=(0,i.geByClass1)("post_action_tt_content",c),p=(0,i.geByClass1)("post_action_btn_layout",c),u=_.children;window.radioBtns["post_settings_btn"+e+s]={val:!1,els:u};if((0,i.hasClass)(c,"disabled"))return;const h=[-12*(window.vk.rtl?-1:1),7],g=new n.ElementTooltip(p,(0,l.extend)({appendTo:c,forceSide:"bottom",autoShow:!1,cls:"eltt_fancy eltt_fancy_actions",noOverflow:!1,centerShift:0,offset:h,content:_,align:"left",onFirstTimeShow:()=>{(0,i.show)(_)}},o));return cur[e+s]=g,(0,r.pushNavDestroy)((()=>{g&&g.destroy()})),a&&(cur[e+s+"_onChange"]=a),{toooltip:g}},c=(e,t,a)=>{if(window.radioBtns[a]&&!(0,i.hasClass)(e,"disabled"))return window.radioBtns[a].els.forEach((t=>{if(t===e){if(e.querySelector(".FancyElementTT__checkIcon"))return;const{icon:a}=(0,s.getIcon16Done)(),i=`<span class="FancyElementTT__checkIcon">${a}</span>`;t.innerHTML=i+t.innerHTML}else{const e=t.querySelector(".FancyElementTT__checkIcon");e?.remove()}})),(0,o.radiobtn)(e,t,a)},_=e=>e.querySelector(".FancyElementTT__itemLabel")?.innerHTML},401397:(e,t,a)=>{a.d(t,{MEDIA_SELECTOR_ALBUM:()=>Je,MEDIA_SELECTOR_ARTICLE:()=>We,MEDIA_SELECTOR_AUDIO:()=>Ne,MEDIA_SELECTOR_DOC:()=>Re,MEDIA_SELECTOR_GROUP:()=>et,MEDIA_SELECTOR_MAP:()=>Be,MEDIA_SELECTOR_MARKET:()=>Ye,MEDIA_SELECTOR_PHOTO:()=>Le,MEDIA_SELECTOR_POLL:()=>Se,MEDIA_SELECTOR_PRODUCT:()=>at,MEDIA_SELECTOR_SHORT_VIDEO:()=>$e,MEDIA_SELECTOR_VIDEO:()=>Oe,MediaSelector:()=>xt});var i=a(105330),n=a(909436),o=a(575753),s=a(226220),r=a(191468),l=a(939646),d=a(261910),c=a(246429),_=a(972332),p=a(754866),u=a(683234),h=a(270959),g=a(342879),m=a(89833),v=a(265167),w=a(593159),f=a(414623),b=a(741791),k=a(254551),y=a(138430),T=a(58771),C=a(540462),I=a(367105),E=a(973243),M=a(479652),P=a(898848),A=a(825127),S=a(641608),D=a(914008),x=a(536247),L=a(485682),O=a(73245),$=a(706891),N=a(600222),R=a(722747),B=a(379505),U=a(533215),V=a(164475),z=a(305903),F=a(913961),H=a(979110),G=a(639949),j=a(369565),Y=a(431861),q=a(369476),W=a(894801),Z=a(580903),K=a(365823),X=a(877751),Q=a(957480),J=a(208850),ee=a(212233),te=a(113133),ae=a(975034),ie=a(539112),ne=a(491944),oe=a(310964),se=a(560006),re=a(845312),le=a(425936),de=a(318227),ce=a(952661),_e=a(866467),pe=a(432081),ue=a(256891),he=a(632683),ge=a(342018),me=a(810068),ve=a(723294),we=a(990787),fe=a(450927),be=a(700230),ke=a(351118),ye=a(115208),Te=a(806917),Ce=a(983567),Ie=a(842212);const Ee="app_action_mini_apps",Me="app_action_mini_apps_ab_direct",Pe="app_action_mini_apps_ab_chat",Ae="app_action_games",Se="poll",De="graffiti",xe="photos_list",Le="photo",Oe="video",$e="short_video",Ne="audio",Re="doc",Be="map",Ue="note",Ve="postpone",ze="mark_as_ads",Fe="share",He="pretty_cards",Ge="gift",je="money",Ye="market",qe="market_services",We="article",Ze="podcast",Ke="story",Xe="narrative",Qe="page",Je="album",et="group",tt="copyright",at="product",it=I.MEDIA_TYPE_DONUT_DURATION,nt="textlive",ot="situational_theme",st="online_booking",rt=1e3,lt=864e5,dt=30*lt,ct=lt,_t="anonymous",pt="answers",ut="question",ht="lang",gt="poll_id",mt="poll_fixed",vt="poll_closed",wt="poll_background_id",ft="poll_photo_id",bt="poll_until",kt="poll_is_multiple",yt="poll_disable_unvote",Tt="poll_is_board",Ct="poll_is_edit",It="poll_is_edited",Et="poll_backgrounds",Mt="poll_answers_limit",Pt="poll_question_length",At=/^invite\/[a-zA-Z0-9]{7}$|/,St=({src:e,alt:t="",title:a,onclick:i,description:n})=>`\n        <div class="page_doc_row">\n          ${e?`\n    <a target="_blank" rel="noopener" ${i} class="page_doc_thumb">\n      <img alt="${t}" src="${e}" class="page_doc_thumb__image" >\n    </a>`:`<a target="_blank" rel="noopener" ${i} class="page_doc_icon page_doc_icon3"></a>`}\n          <a target="_blank"  ${i} class="page_doc_title">${a}</a>\n          <div class="page_doc_description_row">\n            <div class="page_doc_size">\n                ${n}\n            </div>\n          </div>\n        </div>`,Dt=e=>{const t=e?.editable?.sizes??{},a=Object.values(t).find((e=>e[2]>100&&e[2]<140))??t.m;return a?.[0]??e.thumb},xt=function(e,t,lt,xt,Lt,Ot){const $t=(xt=xt||{}).initialAttachView;var Nt,Rt=[],Bt=xt.mediaHandlers||{};const Ut=xt.from;(0,w.each)(lt||[],(function(t,i){var o=i[0],s=i[1],r=i[2];if(!s)return;var l=!1,d=xt.toId||cur.postTo,m={to_id:d,blockPersonal:xt.blockPersonal};m.mail_add=xt.mail?1:"",m.from=xt.from;const v={},k=e=>{Nt?.emitter.emit(Nt.eventTypes.closePickerModal,{type:e})},T=e=>{Nt?.emitter.emit(Nt.eventTypes.pickerModalDone,{type:e})},C=(e,t)=>{Nt?.emitter.emit(Nt.eventTypes.pickerModalFail,{type:e,error:t})};switch(o){case De:l=()=>{(0,h.showBox)("al_wall.php",{act:"canvas_draw_box"},{stat:[window.jsc("web/graffiti_new.js")],cache:1,onDone:(e,t)=>{window.Graffiti.initDrawBox(e,t)}})};break;case xe:l=h.showBox.pbind("al_photos.php",(0,w.extend)(m,{act:"choose_photo"}),{cache:1,stat:[window.jsc("web/photos.js"),"photos.css",window.jsc("web/upload.js")],params:{onClose:()=>k(xe)}});break;case Le:l=Bt.photo?Bt.photo.pbind(xt):h.showBox.pbind("al_photos.php",(0,w.extend)(m,{act:"choose_photo",max_files:xt.limit||10,no_album_select:~(xt.disabledTypes||[]).indexOf("album")?1:""}),{cache:1,stat:[window.jsc("web/photos.js"),"photos.css",window.jsc("web/upload.js")],params:{onClose:()=>k(Le)},onDone:()=>T(Le),onFail:e=>C(Le,e)});break;case Oe:var I=(0,w.extend)(m,{act:"a_choose_video_box",max_files:xt.limit||10});l=function(){cur.chooseVideoBoxMedia=e,(0,h.showBox)("al_video.php",I,{cache:1,params:{onClose:()=>k(Oe)},onDone:()=>T(Oe),onFail:e=>C(Oe,e)})};break;case $e:l=async function(){await(0,fe.getVideoUploadModule)();var e;window.VideoUpload?.showBox({oid:m.to_id,disabled:0,is_short_video:!0,new_tpl:!0,onDone:()=>T($e),onFail:e=>C($e,e),ref:(e=cur.module,"profile"===e?"profile_plus":"feed"===e?"feed_plus":"groups"===e?"club_plus":"")})};break;case Ne:l=function(){window.stManager.add([window.jsc("web/audio.js"),window.jsc("web/indexer.js"),window.jsc("web/auto_list.js"),window.jsc("web/grid_sorter.js"),"audio.css"],(function(){var t=!1;(0,w.each)(Nt.chosenMedias||[],(function(){"audio_playlist"===this[0]&&(t=!0)})),cur.audioAttachOriginalOwnerId=!1,cur.audioAttachSwitchOwnerId=!1;var a=vk.id,i=parseInt((""+m.to_id||"").replace(/^board/,"-")),o=(0,p.domClosest)("_submit_post_box",e);(0,p.domData)(o,"from-oid")<0||"im"===cur.module&&cur.gid?(a=i,cur.audioAttachOriginalOwnerId=i,cur.audioAttachSwitchOwnerId=vk.id):cur.hasGroupAudioAccess&&(cur.audioAttachOriginalOwnerId=vk.id,cur.audioAttachSwitchOwnerId=i),AudioPage.showAttachBox(a,{canPlaylistAttach:!t&&!cur.editor&&!xt.promotedAudios,onAudioChoose:n.AudioUtils.onAudioChoose,onPlaylistChoose:n.AudioUtils.onPlaylistChoose,promotedAudios:xt.promotedAudios,audioSectionId:xt.audioSectionId,onClose:()=>k(Ne),onDone:()=>T(Ne),onFail:e=>C(Ne,e)})})).catch((e=>{C(Ne,e)}))};break;case Ae:case Me:case Pe:case Ee:if(!r)break;const t=o===Ae?"games":"mini_apps";l=()=>{(0,c.showBoxLoader)(),Promise.all([a.e(91498),a.e(89631),a.e(73035),a.e("langs/web/apps_attach_modal")]).then(a.bind(a,566635)).then((({initModal:e})=>{e({type:t,peer_id:cur.peer})}))};break;case Se:l=()=>Nt.chooseMedia(Se,"",r);break;case Re:l=Bt.doc?Bt.doc.pbind(xt):h.showBox.pbind("docs.php",Object.assign(m,xt.docParams,{act:"a_choose_doc_box"}),{stat:["docs.css"],onDone:()=>T(Re),onFail:e=>C(Re,e)});break;case Be:l=h.showBox.pbind("al_places.php",(0,w.extend)(m,{act:"a_choose_place_box"}),{stat:["places.css","map.css","maps.js","ui_controls.css","ui_controls.js","boxes.css"],width:640,bodyStyle:"padding: 0px;",onDone:()=>T(Be),onFail:e=>C(Be,e)});break;case Ue:l=f.showWiki.pbind({note:"new"},!0,!1,{queue:1});break;case Ve:l=e=>{if(Ot){if((0,p.hasClass)(e.target,"_close"))return Nt.unchooseMedia(Nt.postponeInd),void(0,_.cancelEvent)(e);const t=()=>{cur["postPostponeTT"+Nt.lnkId].show(),(0,_.triggerEvent)((0,p.geByClass1)("datepicker_control",cur["postPostponeTT"+Nt.lnkId]._ttel),"mousedown",!1,!0);const e=!Nt.postponeDate;Nt.postponeDate=(0,p.val)("postpone_date"+Nt.lnkId),e&&Nt.chooseMedia(Ve,Nt.postponeDate,r)};Nt.postponeDatepicker?"DP_PLACEHOLDER"!==Nt.postponeDatepicker&&t():(cur.postponedLastDate&&(r.date=(0,w.intval)(cur.postponedLastDate)+3600),Nt.postponeDatepicker="DP_PLACEHOLDER",Nt.setupPostpone(r,null,t))}else Nt.chooseMedia(Ve,s,r)};break;case it:const i=e=>{e.addMedia.donutVisibilityAddSelect&&e.addMedia.donutVisibilityAddSelect(e)};v.onMediaTypeInit=i,l=()=>{};break;case ze:l=()=>Nt.chooseMedia("mark_as_ads",s,r);break;case Fe:l=function(e){e=e||{},a._dG("onShareChooseUrlBoxInit",(function(){var e=(0,p.geByClass1)("share_url_input",(0,c.curBox)().bodyNode);(0,_.addEvent)(e,"keydown",(function(e){if(e.which==_.KEY.ENTER)return i((0,c.curBox)().btns.ok[0],e),!1}))}));var t=(0,h.showBox)("share.php",{act:"choose_url_box"});function i(a,i){var n=(0,p.geByClass1)("share_url_input",t.bodyNode),o=(0,p.val)(n);(0,u.lockButton)(a),(0,u.disable)(n,!0),(0,p.hide)("share_url_error"),Nt.chooseMedia("share",s,(0,w.extend)(r,{url:o,draft:!0,onSuccess:function(){(0,u.disable)(n,!1),(0,u.unlockButton)(a),t.hide(),e.videoId&&window.AdsEdit&&window.AdsEdit.showSnippetVideo&&window.AdsEdit.showSnippetVideo(e.videoId)},onError:function(e){var t="";e&&e!==(0,_e.getLang)("global_unknown_error")&&-1===e.indexOf("ERR_PAGE_GET_FAILED")&&(t=e+" "),(0,u.disable)(n,!1),(0,u.unlockButton)(a),(0,p.ge)("share_url_error").innerHTML=t+(0,_e.getLang)("global_share_link_failed"),(0,p.show)("share_url_error")}}))}t.removeButtons(),t.addButton((0,_e.getLang)("global_continue"),i)};break;case He:l=function(e){e&&e.replace_owner_id&&(r.editor.owner_id=e.replace_owner_id),Nt.chooseMedia("pretty_cards",s,r)};break;case Ge:l=function(){var e=(e=xt.peer<2e9?xt.peer:0)||cur.peer;xt.giftBoxPrepare&&xt.giftBoxPrepare(e),(0,h.showBox)("al_gifts.php",{act:"get_gift_box",mid:e,fr:e==vk.id?1:0,ref:"media_selector"},{stat:["gifts.css",window.jsc("web/wide_dd.js"),"wide_dd.css"]})};break;case je:l=function(){const e=cur.peer;me.Ranges.isGroupId(d)&&(m.owner_id=d),S.MoneyTransfer.showMoneyTransferBox((0,w.extend)(m,{to_id:e}),{},(e=>((0,c.curBox)()&&(0,c.curBox)().hide(),setTimeout((0,h.showFastBox)((0,_e.getLang)("global_error"),e).hide,2e3),!0)))};break;case Ye:d===vk.id?(l=()=>(0,y.showAttachNewProductBox)(null,{type:"market",refSource:"user-lenta"}),r.tt_words&&(cur.checkMessageHandler=function(e){if(!cur.marketIntroShown&&(e=" "+e+" ").match(new RegExp("\\s("+r.tt_words.join("|")+")\\s","i"))){var t=(0,p.getSize)(Nt.menu.moreWrap);(0,g.showTooltip)(Nt.menu.moreWrap,{text:r.tt_text,dir:"left",slideX:15,width:230,shift:[-t[0]-5,-t[1]/2],hasover:1}),cur.marketIntroShown=!0}})):l=()=>(0,y.showAttachNewProductBox)(null,{type:"market",refSource:"community-lenta"});break;case qe:l=()=>{const e=d===vk.id?"user-lenta":"community-lenta";return(0,y.showAttachNewProductBox)(null,{type:"services",refSource:e})};break;case We:l=()=>(0,b.openArticleEditor)(d,void 0,void 0,void 0,{onDone:()=>T(Be),onFail:e=>C(Be,e)});break;case Ze:l=function(){Promise.all([a.e(91498),a.e(89631),a.e(762),a.e(79210),a.e(63485),a.e(99242),a.e(65400),a.e(6827),a.e("langs/web/podcasts_web")]).then(a.bind(a,525166)).then((function(e){e.default.select()}))};break;case st:l=()=>{Nt.chooseMedia(st,s,r??{})}}l&&Rt.push([o,s,l,v])})),t=(0,p.ge)(t||"media_preview"),Lt=!1!==Lt&&(0,p.ge)(Lt||"post_settings_btn"),Ot=!1!==Ot&&(0,p.ge)(Ot||"post_actions_btns");var Vt=xt.limit||10,zt=cur.pbIsTextlive||Vt>1,Ft=xt.editable&&(!o.browser.msie||parseInt(o.browser.version)>8),Ht=xt.sortable&&(!o.browser.msie||parseInt(o.browser.version)>8);const Gt=!!Ot;var jt=function(e,t,i){if(e=(0,p.ge)(e),!e)return!1;i=i||{},window.__addMediaIndex||a._dG("__addMediaIndex",0);var n=++__addMediaIndex;e.innerHTML='<div class="media_selector clear_fix"></div>';var s,r=(0,p.domByClass)(e,"media_selector"),l=[],d={id:n,menuNode:r,types:t,lastTypes:t,activate:function(e){d.touched=!0===e,i.onActivate&&i.onActivate()},show:function(){if(s&&(clearTimeout(s),s=0),d.moreWrap&&!(0,p.hasClass)(d.moreWrap,"shown")){i.forceToUp||(0,p.replaceClass)(d.moreWrap,"to_up","to_down");var e=(0,p.domByClass)(d.moreWrap,"_more_items");((0,p.getClientRectOffsetY)(e)>0||i.forceToUp)&&(0,p.replaceClass)(d.moreWrap,"to_down","to_up"),setTimeout(p.addClass.pbind(d.moreWrap,"shown"),0)}},hide:function(e){if(!s){var t=function(){s=0,d.moreWrap&&(0,p.removeClass)(d.moreWrap,"shown")};if(e){var a=(0,p.domByClass)(d.moreWrap,"_more_items");(0,p.hide)(a),t(),setTimeout(p.show.pbind(a),0)}else s=setTimeout(t,300)}},setOptions:function(e){(0,w.extend)(i,e)},setItems:function(e){for(window.tooltips&&tooltips.destroyAll(r);r.firstChild;)(0,p.re)(r.firstChild);var t=void 0!==i.hideAfterCount?i.hideAfterCount:5,a=void 0!==i.maxShown?i.maxShown:4,n=!1,s=i.hideItem,c=(s||e.length>t)&&(!o.browser.mobile||i.ignoreMobile),u=i.hideLabel||(0,_e.getLang)("global_media_selector_more");function h(e,t,a,n,o,s){var r=(0,p.ce)("a",{innerHTML:n?t:'<span class="blind_label">'+t+"</span>",className:"ms_item ms_item_"+e+" _type_"+e});const c=document.createElement("span");if(c.classList.add("MediaSelector__mediaIcon"),c.innerHTML=function(e){switch(e){case Le:{const{icon:e}=(0,z.getIcon20CameraOutline)();return e}case Oe:{const{icon:e}=(0,F.getIcon20VideoCircleOutline)();return e}case $e:{const{icon:e}=(0,H.getIcon20LogoClipsOutline)();return e}case Ne:{const{icon:e}=(0,G.getIcon20MusicOutline)();return e}case Re:{const{icon:e}=(0,j.getIcon20DocumentOutline)();return e}case Be:{const{icon:e}=(0,Y.getIcon20PlaceOutline)();return e}case De:{const{icon:e}=(0,q.getIcon20BrushOutline)();return e}case Se:{const{icon:e}=(0,W.getIcon20PollOutline)();return e}case We:{const{icon:e}=(0,Z.getIcon20ArticlesOutline)();return e}case Ve:{const{icon:e}=(0,K.getIcon20RecentOutline)();return e}case Ue:{const{icon:e}=(0,X.getIcon20ArticleBoxOutline)();return e}case Ge:{const{icon:e}=(0,Q.getIcon20GiftOutline)();return e}case Ye:{const{icon:e}=(0,J.getIcon20MarketOutline)();return e}case qe:{const{icon:e}=(0,ee.getIcon20NotebookCheckOutline)();return e}case je:{const{icon:e}=(0,te.getIcon20MoneyTransferOutline)();return e}case ze:{const{icon:e}=(0,ae.getIcon20AdvertisingOutline)();return e}case Fe:{const{icon:e}=(0,ie.getIcon20ShareExternalOutline)();return e}case He:{const{icon:e}=(0,ne.getIcon20ColumnsSquare)();return e}case Ze:{const{icon:e}=(0,oe.getIcon20PodcastOutline)();return e}case Me:case Pe:case Ee:{const{icon:e}=(0,se.getIcon20ServicesOutline)();return e}case Ae:{const{icon:e}=(0,re.getIcon20GameOutline)();return e}case st:{const{icon:e}=(0,le.getIcon20CalendarOutline)();return e}}return""}(e),r.firstChild?r.insertBefore(c,r.firstChild):r.appendChild(c),!n&&d.moreWrap?(0,p.domInsertBefore)(r,d.moreWrap):(n||o).appendChild(r),r.setAttribute("tabindex",0),!n){r.setAttribute("data-title",t),r.setAttribute("aria-label",t),r.setAttribute("role","link");var u=function(){(0,g.showTitle)(this,!1,s||!1,{noZIndex:!0})};(0,_.addEvent)(r,"mouseover",u),l.push((function(){(0,_.removeEvent)(r,"mouseover",u)}))}if(a&&!cur.viewAsBox){let t=function(){return d.activate(),d.hide(!0),i.onItemClick&&!i.onItemClick(e)||a(),!1};(0,_.addEvent)(r,"click",t),l.push((function(){(0,_.removeEvent)(r,"click",t)}))}}d.moreWrap=!1,d.lastTypes=e,(0,w.each)(e,(function(e,t){let o=t[0],g=t[1],m=t[2];if(o===We){if(!(0,C.partConfigEnabled)("inline_attaches_icons"))return void((0,T.isArticleEditorAvailable)()&&h(o,g,m,!1,r,[6,8]));if(!(0,T.isArticleEditorAvailable)())return}if(o===Ve&&Gt&&!d.postponeBtn){const e=i.date?aa(i.date):(0,_e.getLang)("wall_publication_now"),{icon:t}=(0,N.getIcon12Dropdown)();d.postponeBtn=(0,p.se)(`<div class="post_action_btn has_cross post_postpone" id="post_postpone_btn${d.id}">\n                <div class="post_action_btn_layout">\n                  <span class="post_action_btn_text" role="button" aria-label="${(0,P.replaceEntities)(e)}">${e}</span>\n                  <span class="post_action_image_btn" role="button">${t}</span>\n                  <div class="post_action_tt_content _postpone" id="post_postpone_tt_content${d.id}" onclick="cancelEvent(event)"></div>\n                </div>\n               </div>`),(0,C.partConfigEnabled)("hide_unused_element_in_posting")&&i.actionsEl.classList.remove("force_unshown"),i.actionsEl.appendChild(d.postponeBtn);var v="post_postpone_btn"+d.id,w=(0,p.ge)(v),f=(0,p.geByClass1)("post_action_tt_content",w),b=(0,p.geByClass1)("post_action_btn_layout",w),k=[-4*(vk.rtl?-1:1),4],y=new ElementTooltip(b,{appendTo:(0,p.domPN)(w),forceSide:"bottom",autoShow:!1,customShow:!0,cls:"_postpone timer_in_tt",noOverflow:!1,centerShift:0,offset:k,content:f,noHideOnClick:!0,align:"left",onShow:()=>{Nt.activeState=!0},onHide:()=>{Nt.activeState=!1,setTimeout((()=>{Nt.postponeDatepicker&&Nt.postponeDatepicker.hide()}),ElementTooltip.FADE_SPEED)},onFirstTimeShow:function(){(0,p.show)(f)}});return cur["postPostponeTT"+d.id]=y,(0,ge.pushNavDestroy)((()=>{y&&y.destroy()})),(0,_.addEvent)(d.postponeBtn,"click",m),void l.push((function(){(0,_.removeEvent)(d.postponeBtn,"click",m)}))}if(o!==it){if(c&&(s?o==s:e==a)){let e=r.appendChild((0,p.ce)("div",{className:"ms_items_more_wrap"}));const t=function(){d.show()},a=function(e){0===e.detail&&(0,p.hasClass)(d.moreWrap,"shown")?d.hide():d.show()},o=function(){d.hide()};(0,_.addEvent)(e,"mouseenter",t),(0,_.addEvent)(e,"click",a),(0,_.addEvent)(e,"mouseleave",o),l.push((function(){(0,_.removeEvent)(e,"mouseenter",t),(0,_.removeEvent)(e,"click",a),(0,_.removeEvent)(e,"mouseleave",o)}));let s=u;if(i.vectorIcon)s='<span class="blind_label">'+u+"</span>",(0,p.addClass)(e,"ms_items_more_wrap_vector");else{const{icon:e}=(0,N.getIcon12Dropdown)();s+=`<span class="MediaSelector__moreIcon">${e}</span>`}let c=e.appendChild((0,p.ce)("a",{className:"ms_item_more",innerHTML:'<span class="ms_item_more_label">'+s+"</span>"}));c.setAttribute("tabindex",0),c.setAttribute("role","button"),c.setAttribute("aria-label",u);let h=(0,p.ce)("div",{className:"ms_items_more_helper"});n=(0,p.ce)("div",{className:"ms_items_more _more_items"}),h.appendChild(n),e.appendChild(h),d.moreWrap=e}h(o,g,m,n,r)}}))},enqueueOnAddMediaInit(e){},onAddMediaInit(e){}};t&&d.setItems(t),o.browser.msie&&((0,_.removeEvent)(e,"MSPointerDown"),(0,_.addEvent)(e,"MSPointerDown",d.activate.pbind(!0)));(0,_.removeEvent)(e,"mouseover"),(0,_.addEvent)(e,"mouseover click",d.activate),i.global||(0,ge.pushNavDestroy)((()=>{(0,_.removeEvent)(e,"mouseover click",d.activate)}));i.forceToUp&&(0,p.addClass)((0,p.geByClass1)("ms_items_more_wrap",r),"to_up");return d.handlersToClean=l,d}(e,Rt,{onActivate:function(){cur.attachCount=Nt.attachDataCount,cur.chooseMedia=Nt.chooseMedia,cur.getFrom=Nt.getFrom,cur.hasChosenMedia=Nt.hasChosenMedia,cur.lastAddMedia=Nt,cur.onMediaUploadStarted=xt.onMediaUploadStarted,cur.onMediaChange=xt.onMediaChange,cur.showMediaProgress=Nt.showMediaProgress,cur.unchooseMedia=Nt.unchooseMedia,cur.updateChosenMedia=Nt.updateChosenMedia},onItemClick:function(e){return Nt?.emitter.emit(Nt.eventTypes.mediaItemClick,{type:e}),!(zt&&Nt.attachDataCount()>=Vt&&"postpone"!==e&&"mark_as_ads"!==e&&e!==tt)||(vk.widget?(0,h.showBox)("blank.php",{code:1900,limit:Vt}):(0,h.showFastBox)((0,_e.getLang)("global_error"),(0,_e.getLang)("attachments_limit",Vt)),!1)},hideAfterCount:xt.hideAfterCount,topOffset:xt.topOffset,forceUp:xt.forceUp,global:xt.global,maxShown:xt.maxShown,forceToUp:xt.forceToUp,vectorIcon:xt.vectorIcon,ignoreMobile:xt.ignoreMobile,actionsEl:Ot,hideLabel:xt.hideLabel,date:xt.date});if(jt){var Yt=(0,w.intval)(jt.id);if(zt){t.innerHTML=`<div id="page_pics_preview${Yt}" class="page_pics_preview media_preview clear_fix"></div><div id="page_dpics_preview${Yt}" class="page_pics_preview post_thumbed_media page_media_sortable media_preview clear_fix"></div><div id="page_docs_preview${Yt}" class="page_docs_preview post_thumbed_media page_media_sortable media_preview clear_fix"></div><div id="page_pdocs_preview${Yt}" class="page_docs_preview media_preview clear_fix"></div><div id="page_ldocs_preview${Yt}" class="page_docs_preview media_preview clear_fix"></div><div id="page_adocs_preview${Yt}" class="page_docs_preview media_preview clear_fix"></div><div id="page_mpics_preview${Yt}" class="page_pics_preview media_preview clear_fix"></div><div id="page_ppdocs_preview${Yt}" class="page_docs_preview media_preview _page_ppdocs_preview clear_fix"></div><div id="page_progress_preview${Yt}" class="page_progress_preview media_preview clear_fix"></div>`;var qt=(0,p.domFC)(t),Wt=(0,p.domNS)(qt),Zt=(0,p.domNS)(Wt),Kt=(0,p.domNS)(Zt),Xt=(0,p.domNS)(Kt),Qt=(0,p.domNS)(Xt),Jt=(0,p.domNS)(Qt),ea=(0,p.domNS)(Jt),ta=(0,p.domNS)(ea);(0,p.removeClass)(t,"media_preview"),(0,p.removeClass)(Xt,"vk_mini_app_preview"),(0,p.removeClass)(Xt,"vk_mini_app_preview_fixed"),(0,p.addClass)(t,"multi_media_preview")}else(0,p.addClass)(t,"med_no_attach"),(0,p.show)(t);return Gt&&(ea=(0,p.ge)("post_postpone_tt_content"+Yt)),Nt={_cleanPhotoCacheIds:{},_attachView:$t,_prevMultiAttachViewOnOnePhoto:null,_carouselRatio:0,_isFirstTimeAddingThumbsMedia:xt?.isNotExistDraftThumbs,_loadingMediasCount:0,_ratioCrops:{},_addMediaLink:e,_autoRatio:0,lnkId:Yt,menu:jt,types:Rt,phLists:{},handlers:{},postponeIsTooltip:Gt,chosenMedias:[],limit:Vt,emitter:new A.default,eventTypes:{mediaUpdate:"mediaUpdate",previewUpdate:"previewUpdate",viewChanged:"viewChanged",viewDraw:"viewDraw",choosenMedia:"choosenMedia",carouselRedrawNeeded:"carouselRedrawNeeded",thumbUpdated:"thumbUpdated",mediaItemClick:"mediaItemClick",closePickerModal:"closePickerModal",pickerModalDone:"pickerModalDone",pickerModalFail:"pickerModalFail"},_showAddMedia:function(){jt.show()},_hideAddMedia:function(e){jt.hide(e)},cleanPhotoCache:e=>{Nt._cleanPhotoCacheIds[e]=!0},getThumbsCount:()=>xt?.getThumbsCount?.()||0,hasRestrictingAttach:function(){return(0,p.geByClass1)("medadd_c_story",Zt)},getFrom:()=>Ut,getAttachView:function(){return Nt._attachView},setAttachView:function(e){const t=Nt._attachView;Nt._attachView=e,t&&t!==e&&Nt.emitViewChanged(e)},isRatioSelectorVisible:function(){return((0,be.isCarouselCorridorEnabled)()?Nt.getThumbsCount()>0:Nt.getThumbsCount()>1)&&Nt._attachView===ve.ATTACHMENT_PRIMARY_MODE.carousel&&(!xt?.isOnlyNotPhotoThumbData?.()??!0)},clearCarouselRatio:function(){Nt._autoRatio=0,Nt._carouselRatio=0},getAutoRatio:function(){return Nt._autoRatio},getCarouselRatio:function(){return Nt._carouselRatio},setCarouselRatio:function(e,t){if(Nt._carouselRatio!==e){const a=Nt._carouselRatio;Nt._carouselRatio=e,t?Nt._autoRatio=e:(xt?.savePreviousRatioCropsAndGetCropsForNewRatio?.(a,e,Nt._ratioCrops),Nt.emitCarouselRedrawNeeded(qt))}},getThumbsMediaItems:function(){const e=(Nt?.getMedias()??[]).map((e=>e?[e[0],e[1],e[5]]:void 0)).filter(Boolean);return(0,ye.getThumbsMediaItems)(e)},getPrimaryAttachmentsRatioAnalyticsParam:function(){const e=Nt?.getThumbsMediaItems()??[];let t,a;1===e.length?(a=(0,be.getNearestRatioForThumb)(e[0]),t="auto"):e.length>1&&(a=Nt.getCarouselRatio(),t=Nt.getAutoRatio()===a?"auto":"manual");const i=a?Te.RatioShowValue[a]:void 0;if(i&&t)return{primary_attachments_ratio:`${i?.replace(":","_")}_${t}`}},checkNeedShowCarouselRatioHint:(0,ke.debounce)((e=>{const t=Nt.getThumbsCount();if(void 0!==t&&Nt._loadingMediasCount<=0&&Nt._isFirstTimeAddingThumbsMedia){if(t>2){const t=xt?.isFirstRatioNotEquelAllRatioThumbs?.();t&&e?.(t)}t>0&&(Nt._isFirstTimeAddingThumbsMedia=!1)}}),500),getLoadingMediasCount:function(){return Nt._loadingMediasCount},checkAttachViewForOnePhoto:function(){1===Nt.getThumbsCount()&&(Nt._prevMultiAttachViewOnOnePhoto=Nt._attachView)},checkAttachViewForOnePhoto:function(){Nt._attachView===ve.ATTACHMENT_PRIMARY_MODE.carousel&&xt?.isOnlyNotPhotoThumbData?.()&&Nt.clearCarouselRatio()},checkAttachViewFromOnePhoto:function(){const e=Nt.getThumbsCount();e>1&&Nt._prevMultiAttachViewOnOnePhoto&&(Nt.setAttachView(Nt._prevMultiAttachViewOnOnePhoto),xt?.setAttachViewControlValue?.(Nt._prevMultiAttachViewOnOnePhoto)),1!==e&&(Nt._prevMultiAttachViewOnOnePhoto=null)},getAttachViewInitialized:function(){return Boolean((0,w.getTemplate)("primary_attachments_view_template",{link_id:Nt.lnkId}))},updateChosenMedia:function(e,t,a){Nt.chooseMedia(e,t,a,null,null,null,!0)},emitPreviewUpdate:function(){Nt.emitter.emit(Nt.eventTypes.previewUpdate,Nt.getMediaUIViewSelectorAvailable(),Nt.isRatioSelectorVisible())},emitCarouselRedrawNeeded:function(e){Nt.emitter.emit(Nt.eventTypes.carouselRedrawNeeded,e)},emitThumbUpdated:function(e){Nt.emitter.emit(Nt.eventTypes.thumbUpdated,e)},emitViewDraw:function(){Nt.emitter.emit(Nt.eventTypes.viewDraw,Nt.getMediaUIViewSelectorAvailable(),Nt.isRatioSelectorVisible())},emitViewChanged:function(){Nt.emitter.emit(Nt.eventTypes.viewChanged,Nt.getAttachView())},getCarouselElement:function(){return t.querySelector(".PrimaryAttachmentCarousel")},getCarouselItems:function(){return Nt.getCarouselElement()?.querySelectorAll(".PrimaryAttachmentCarousel__item")??[]},getMediaUIViewSelectorAvailable:function(){return xt.getIsCarouselAllowed?.()&&xt.getIsGridAllowed?.()},addOrUpdateChosenMedia(...e){const[t,a]=e;return(Nt.hasChosenMedia(t,a)?Nt.updateChosenMedia.bind(Nt):Nt.chooseMedia.bind(Nt))(...e)},hasChosenMedia:function(e,t){var a=!1;return(0,w.each)(Nt.chosenMedias,(function(){if(this[0]===e&&this[1]===t)return a=!0,!1})),a},clearMedia:function({skipPoll:e=!1,skipPostpone:t=!1,skipNotifications:a=!1,skipCopyright:i=!1}={}){Nt.unchooseMedia(void 0,void 0,{skipPoll:e,skipNotifications:a,skipPostpone:t,skipCopyright:i}),qt&&(qt.innerHTML="",qt.classList.remove("editable_thumbs_wrap"),qt.style.display=null)},chooseMedia:function(e,t,a,...i){return Nt.emitter.emit(Nt.eventTypes.choosenMedia,[e,t,a]),Nt.chooseMediaNoNotify(e,t,a,...i)},chooseMediaNoNotify:function(i,o,s,r,l,c,_){if(cur.articleEditorLayer&&i!==We&&i!==Se)return;if(vk.widget&&(o=(0,w.clean)(o)),i===Ve&&Gt&&null!=Nt.postponeInd)return!1;if(xt.poster&&xt.poster.isOpen()&&i!==Ve&&i!==it&&i!==tt&&i!==ot&&xt.poster.closeEditor(),(Nt.attachCount()>=Vt&&void 0===s.upload_ind&&i!==Ve&&i!==it&&i!==ot&&i!==ze||Nt.hasRestrictingAttach())&&i!==tt){if(zt)return!1;Nt.unchooseMedia()}if(xt.skipDuplicates){const e=Nt.chosenMedias.find((e=>{if(!e)return!1;const[t,a]=e;return t===i&&a===e}));if(e)return!1}if(Nt.onChange&&!1===Nt.onChange(i,o,s,r))return void 0!==s.upload_ind&&(0,p.re)("upload"+s.upload_ind+"_progress_wrap"),!1;if(i===Ue&&(cur.pbNoteAdded=!1),(0,w.inArray)(i,xt.disabledTypes||[]))return!1;var h=!1,g={},m=null;if(zt&&((0,w.each)(Nt.chosenMedias,(function(e){if(m=e,this[0]==i&&this[1]==o)return h=!0,!1;g[this[0]]=g[this[0]]?g[this[0]]+1:1})),h&&!_||_&&!h))return!1;var v,f,b="",k="",y=!1,T=Zt,I="",M="";let A=!1;function S(e,t){return(0,P.isString)(e)?e=(0,w.clean)((0,w.unclean)((0,w.unclean)(e))):((0,P.isObject)(e)||(0,P.isArray)(e))&&(e=L(e,t)),e}function L(e,t){if(!vk.widget)return e;if((t=(0,P.positive)(t))>5)return e;if((0,P.isArray)(e))e.forEach((function(a,i){e[i]=S(a,t+1)}));else if((0,P.isObject)(e))for(let a in e)e.hasOwnProperty(a)&&(e[a]=S(e[a],t+1));return e}function O(e){let t=340,a=127;return"im"!==cur.module&&(t=Math.min(e.parentElement.offsetWidth,510)||452,a=Math.min(t/2,200),((0,p.hasClass)(e.parentElement,"reply_media_preview")||"wpe_media_preview"===e.parentElement.id)&&a>120&&(a=120)),{width:t,height:a}}let $="";switch(i){case De:if(g.pretty_cards)return!1;(0,P.isObject)(s)||(s={thumb:s||""}),b=`<div class="fl_l page_preview_graffiti"><img class="page_preview_graffiti" src="${(s=L(s)).thumb}" /></div>`,T=y=Jt;break;case xe:if(vk.widget||g.pretty_cards)return!1;(0,p.hide)(this._addMediaLink),(0,P.vkImage)().src=s[1],(N=s[3].replace(/^{|}$/g,""))&&(N+=","),N+='"queue":1';const l=s[5];l&&l.restrictionBlur&&($+=" PostPhotoRestriction--blur PostPhotoRestriction--photosList PostPhotoRestriction--smallIcon"),l&&l.restrictionGeo&&($+=" PostPhotoRestriction--geo PostPhotoRestriction--photosList PostPhotoRestriction--smallIcon"),b=`<div${xt.nocl?"":` onclick="return showPhoto('${s[4]}', '${s[2]}', '${(0,w.clean)(N)});"`} class="fl_l page_preview_photo${$}"><img class="page_preview_photo" src="${s[1]}" /></div>`,T=y=qt;break;case Le:if(g.pretty_cards)return!1;(0,P.isObject)(s)||(s={thumb_m:s[0]||"",thumb_s:s[1]||"",list:s[2]||"",view_opts:s[3]||"",upload_ind:s.upload_ind||void 0}),s=L(s),(0,P.vkImage)().src=s.thumb_m;var N=s.view_opts.replace(/^{|}$/g,"");if(vk.widget&&(N=N.replace(/&quot;/g,'"')),N&&(N+=","),N+='"queue":1',Nt.phLists[o]=s.list,Ft){if(!s.editable)return!1;if(!xt.nocl){let e="{"+N+"}";e=JSON.parse(e),s.editable.click=Nt.showPhoto.pbind(o,s.list,e)}}let _=(0,d.parseJSON)(s.view_opts);$="",_.temp&&_.temp.restrictionGeo&&($+=" PostPhotoRestriction--geo"),_.temp&&_.temp.restrictionBlur&&($+=" PostPhotoRestriction--blur"),b=`<div ${xt.nocl?"":` onclick="return cur.addMedia[${Nt.lnkId}].showPhoto('${o}', '${s.list}', {${(0,w.clean)(N)}});"`} class="fl_l page_preview_photo${c?" page_preview_ph_graff":""}${$}"><img class="page_preview_photo" src="${s.thumb_m}" /></div>`,y=1,T=qt;break;case Oe:if((0,P.isEmpty)(s)||g.pretty_cards)return!1;if((0,P.isObject)(s)||(s={thumb:s||""}),Ft){if(!s.editable)return!1;xt.nocl||(s.editable.click=pe.showVideo.pbind(o,s.list_id,{queue:1,autoplay:1}))}(s=L(s)).preview&&!vk.widget?(b=s.preview,s.editable.preview=b):b=`\n              <div ${xt.nocl?"":`onclick="return showVideo('${o}', '${s.list_id}', {queue:1,autoplay:1});"`} class="fl_l page_preview_video">\n                <img class="page_preview_video" src="${s.thumb}" />\n              </div>\n            `,y=1,T=qt,f=s.list_id;break;case"donut_link":if(!s||g.donut_link)return!1;b='<div class="medadd_h medadd_h_pretty_cards inl_bl">'+(0,_e.getLang)("groups_donut_snippet_link_title")+"</div>",k=s.snippet_html;break;case st:{if(!s)return!1;const{icon:e}=(0,D.getIcon28CalendarOutline)(),t=s.owner_name?`<span class="medadd_c_online_booking__content_description">\n                ${s.owner_name}\n              </span>`:"";b=`<div class="medadd_c_online_booking inl_bl">\n            <div class="medadd_c_online_booking__icon">${e}</div>\n            <div class="medadd_c_online_booking__content">\n              <span class="medadd_c_online_booking__content_title">${(0,_e.getLang)("wall_online_booking_title")}</span>\n              ${t}\n            </div>\n          </div>`,(0,p.hide)((0,p.domByClass)(jt.menuNode,"_type_online_booking"));break}case We:if(vk.widget||g.article||g.page||g.pretty_cards||!s)return!1;b='<div class="medadd_h medadd_h_pretty_cards inl_bl">'+(0,_e.getLang)("global_article")+"</div>",k=s.snippet_html,o=s.url,s.rev&&(o+="?rev="+s.rev),T=Xt;break;case Ne:if(g.pretty_cards)return!1;s=L(s),b=Page.addAudioPreview((0,w.clean)(o),s),I=` id="pam${Yt}_audio${(0,w.clean)(o)}"`;break;case"audio_playlist":if(g.audio_playlist)return!1;(s=L(s)).id=(0,w.intval)(s.id),s.ownerId=(0,w.intval)(s.ownerId),vk.widget&&s.authorHref&&!s.authorHref.match(/^(https?:\/\/|\/)/)&&(s.authorHref=`https://${s.authorHref}`),vk.widget&&s.coverUrl&&!s.coverUrl.match(/^(https?:\/\/|\/)/)&&(s.coverUrl=`https://${s.coverUrl}`);var R=s.coverUrl?`background-image:url('${s.coverUrl}'); background-size: cover;`:"",B="";B=s.authorHref?`<a href="${s.authorHref}" onclick="return nav.go(this)">${s.authorName}</a>`:s.authorName;var U="'"+(s.accessHash||"")+"'";k='<div class="audio_pl_attach_preview _audio_pl _audio_pl_'+s.ownerId+"_"+s.id+' clear_fix"><div class="audio_pl_attach_preview__play" onclick="return getAudioPlayer().playPlaylist('+s.ownerId+", "+s.id+", "+U+')"></div><div class="audio_pl_attach_preview__cover" style="'+R+'">'+(s.gridCovers||"")+'</div><div class="audio_pl_attach_preview__title">'+s.title+'</div><div class="audio_pl_attach_preview__info_line">'+B+"</div></div>",b='<span class="medadd_h">'+(0,_e.getLang)("global_audio_playlist")+"</span>",T=Xt;break;case"artist":if(g.artist)return!1;let h=s.coverUrl?`background-image:url('${s.coverUrl}');`:"",m="",S="";s.blockId&&(m=`<div class="MusicAuthorSnippet__play" onclick="return getAudioPlayer().playBlock('${s.ownerId}', 'artist${s.blockId}', '', '', 'artist')">${(0,_e.getLang)("audio_listen_snippet")}</div>`,S="_audio_pl _audio_pl_${data.ownerId}_artist${data.blockId}"),k=`<div class="MusicAuthor_attach_preview _MusicAuthor ${S} clear_fix">\n              <div class="MusicAuthorSnippet__cover" style="${h}"></div>\n              <div class="MusicAuthorSnippet__info">\n                ${m}\n                <div class="MusicAuthorSnippet__title">${s.title}</div>\n                <div class="MusicAuthorSnippet__subtitle">${(0,_e.getLang)("global_artist")}</div>\n              </div>\n            </div>`,b='<span class="medadd_h">'+(0,_e.getLang)("global_artist")+"</span>",T=Xt;break;case"curator":if(g.curator)return!1;let re="",le="",de=s.coverUrl?`background-image:url('${s.coverUrl}');`:"";s.blockId&&(re=`<div class="MusicAuthorSnippet__play" onclick="return getAudioPlayer().playBlock('${s.ownerId}', '${s.blockId}', '', '', 'curator')">${(0,_e.getLang)("audio_listen_snippet")}</div>`,le="_audio_pl _audio_pl_${data.ownerId}_curator${data.blockId}"),k=`<div class="MusicAuthor_attach_preview _MusicAuthor ${le} clear_fix">\n              <div class="MusicAuthorSnippet__cover" style="${de}"></div>\n              <div class="MusicAuthorSnippet__info">\n                ${re}\n                <div class="MusicAuthorSnippet__title">${s.title}</div>\n                <div class="MusicAuthorSnippet__subtitle">${(0,_e.getLang)("global_curator")}</div>\n              </div>\n            </div>`,b='<span class="medadd_h">'+(0,_e.getLang)("global_curator")+"</span>",T=Xt;break;case"video_playlist":if(vk.widget||g.video_playlist||!s.snippet_html)return!1;k=(s=L(s)).snippet_html,b='<span class="medadd_h">'+(0,_e.getLang)("global_audio_playlist")+"</span>",T=Xt;break;case Re:if(vk.widget||g.pretty_cards)return!1;const ue=(0,C.partConfigEnabled)("attachments_primary_mode_web_feature")&&"gif"===s.ext&&!(0,ye.isPrimaryGifAndOtherDocSecondaryEnabled)();if((0,C.partConfigEnabled)("attachments_primary_mode_web_feature")&&s.editable&&!(0,ye.isDocSecondaryEnabled)()&&(!(0,ye.isPrimaryGifAndOtherDocSecondaryEnabled)()&&"gif"!==s.ext||(0,ye.isPrimaryGifAndOtherDocSecondaryEnabled)()&&"gif"===s.ext)){let e="stopEvent(event);";(s=L(s)).hasBox&&(s.editable.click=e=>{Page.showGifBox(s.id,s.ownerId,(0,w.intval)(s.postId),(0,w.intval)(s.postOwnerId),s.hash,e)},e=`Page.showGifBox(${(0,w.intval)(s.id)}, ${(0,w.intval)(s.ownerId)}, ${(0,w.intval)(s.postId)}, ${(0,w.intval)(s.postOwnerId)}, '${s.hash}', event);`),M+=" page_preview_doc_as_photo_wrap";let[t]=s.editable.sizes.m||s.editable.sizes.s;b=`<a href="${s.editable.href}" onclick="${xt.nocl?"":e}" class="page_preview_doc_as_photo" target="_blank" rel="noopener" style="background-image: url('${t}');"><img class="page_preview_doc_as_photo" src="${t}" />${s.editable.label}</a>`,y=1,T=qt}else if(ue){const e=xt.nocl?"":`onclick="Page.showGifBox(${(0,w.intval)(s.id)}, ${(0,w.intval)(s.ownerId)}, ${(0,w.intval)(s.postId)}, ${(0,w.intval)(s.postOwnerId)}, '${s.hash}', event);"`,[t,a]=s.title.replace("fl_l","").replace("fl_r","page_doc_size").split("&nbsp;"),[i]=s?.editable?.sizes?.s??[];b="",k=St({title:t,src:i,data:s,onclick:e,description:a}),I=' id="pam'+Yt+"_doc"+o+'"'}else s.thumb&&s.thumb_s?(b="gif"==s.ext?'<a onclick="if (cur.cancelClick) return (cur.cancelClick = false);" target="_blank" rel="noopener" href="'+s.href+'" class="pam_dpic"><div class="page_preview_doc_photo"><img src="'+s.thumb+'" align="center" /></div><div class="page_preview_doc_photo_hint doc_gif">'+s.title+"</div>":'<a onclick="if (cur.cancelClick) return (cur.cancelClick = false);" target="_blank" rel="noopener" href="'+s.href+'" class="pam_dpic"><div class="page_preview_doc_photo"><img src="'+s.thumb+'" align="center" /></div><div class="page_preview_doc_photo_hint">'+s.title+"</div>",k='</a><div class="pam_bg"></div>',T=y=Wt,I=' id="pam'+Yt+"_doc"+o+'"'):(b="",k='<div class="page_doc_row"><a target="_blank" rel="noopener" href="'+s.href+'" class="page_doc_icon page_doc_icon'+(0,w.intval)(s.type)+'"></a><a target="_blank" href="'+s.href+'" class="page_doc_title">'+s.title+'</a><div class="page_doc_description_row"><div class="page_doc_size">'+s.size_str+"</div></div></div>",I=' id="pam'+Yt+"_doc"+o+'"');break;case Ke:if(vk.widget||g.pretty_cards)return!1;b='<div class="medadd_c_story"><a target="_blank" rel="noopener" '+s.attr+'"><div class="medadd_c_story_thumb fl_l" style="background-image:url('+s.thumb+')"></div></a><div class="medadd_c_story_info fl_l"><a class="medadd_c_story_title" target="_blank" '+s.attr+'">'+s.title+'</a><div class="medadd_c_story_desc">'+s.date_string+"</div></div>",(0,p.hide)(e);break;case Xe:if(g.narrative)return!1;b='<span class="medadd_h">'+(0,_e.getLang)("global_type_narrative")+"</span>",k=s.snippet_html;break;case"mask":if(vk.widget||g.pretty_cards)return!1;b='<div class="medadd_c_mask"><div class="medadd_c_story_thumb fl_l" style="background-image:url(/images/landings/vkmasks/masksSnippet_2x.png)"></div></a><div class="medadd_c_story_info fl_l"><div class="medadd_c_story_title">'+s.share.title+'</div><div class="medadd_c_story_desc">'+s.share.desc+"</div></div>";break;case Fe:if(g.share||g.page||g.pretty_cards||g.market||!s.lang)return!1;if((0,P.isArray)(s)&&(s={domain:s[0],url:s[1],initialPattern:s[2],title:s[3],description:s[4],images:[s[5]],user_id:s[6],photo_id:s[7]}),A=s.is_vk_mini_app,s.draft){var V={onSuccess:s.onSuccess,onError:s.onError};return Nt.checkURL(s.url,void 0,s.checkUrlAdditionalParams||{},V),!1}if(!s.title&&!(cur.options.share||{}).allow_preview_empty_links)return(s.onError||function(){})(),!1;A?(s.title=(0,w.clean)((0,w.unclean)((0,w.unclean)((s.title||"").replace(/\n/g,"\\n")))),s.description=(0,w.unclean)((s.description||"").replace(/\n/g,"\\n"))):(s.title=(0,w.clean)((0,w.unclean)((0,w.unclean)((s.title||"").replace(/<br>/g,"\n")))),s.description=(0,w.unclean)((s.description||"").replace(/<br>/g,"\n")),s.description_short=(0,w.unclean)((s.description_short||"").replace(/<br>/g,"\n")),s.description_narrow=(0,w.unclean)((s.description_narrow||"").replace(/<br>/g,"\n"))),cur.options=cur.options||{},cur.options.share&&cur.options.share.max_title_len&&(s.title=(s.title||"").substr(0,cur.options.share.max_title_len)),cur.options.share&&cur.options.share.max_desc_len&&(s.description=(s.description||"").substr(0,cur.options.share.max_desc_len),s.description_short=(s.description_short||"").substr(0,cur.options.share.max_desc_len),s.description_narrow=(s.description_narrow||"").substr(0,cur.options.share.max_desc_len)),s.media=s.media||o,s.lang&&(cur.lang=(0,w.extend)(cur.lang||{},s.lang));let he={};if(vk.widget&&s.images_proxy_url&&s.images_proxy&&s.images_proxy.length&&(he={images_proxy_url:s.images_proxy_url,images_proxy:s.images_proxy.slice()}),s=(0,w.extend)(L(s),he),b='<a target="_blank" rel="noopener" href="/away.php?to='+encodeURIComponent(s.url)+'" class="medadd_h medadd_h_link inl_bl">'+(0,w.clean)((0,w.unclean)(s.is_vk_mini_app?s.is_game&&s.lang.apps_snippet_game?s.lang.apps_snippet_game:s.lang.global_vk_mini_app:s.lang.profile_choose_link))+"</a>",A&&(0,p.addClass)(Xt,"vk_mini_app_preview vk_mini_app_preview_fixed"),!s.prometheus&&!s.verification&&s.map_data){let e=O(Xt),t="";t=s.map_data[3]?s.map_data[3].replace("size=0,0","size="+e.width+","+e.height):"/maps?lat="+(0,P.floatval)(s.map_data[0])+"&lng="+(0,P.floatval)(s.map_data[1])+"&z=11&"+((0,P.isRetina)()?"w="+2*e.width+"&h="+2*e.height:"w="+e.width+"&h="+e.height);var z="";(0,C.partConfigEnabled)("maps_no_referrer")&&(z='referrerpolicy="no-referrer"'),b+=`<div class="medadd_c_share_map"><a onclick="return showBox('al_places.php', {act: 'geo_box', lat: ${(0,P.floatval)(s.map_data[0])}, long: ${(0,P.floatval)(s.map_data[1])}, provider: ${(0,w.intval)(s.map_data[3])}}, {dark: 1});"><div class="page_media_map_point"></div><img class="page_preview_map" ${z} width="${e.width}" height="${e.height}" src="${t}" /></a></div>`}if(Nt.shareData=(0,w.extend)(Nt.shareData||{},s,{imagesStyles:[""]}),T=Xt,(s.onSuccess||function(){})(),(cur.options.share||{}).button_exclusive&&s.shareButtons)(0,p.hide)(e),(F=(0,p.ge)("signed"))&&(0,u.disable)(F);(0,p.hide)((0,p.domByClass)(jt.menuNode,"_type_share")),(0,p.hide)((0,p.domByClass)(jt.menuNode,"_type_market"));break;case He:if(g.share||g.pretty_cards||vk.widget)return!1;var F;b='<div class="medadd_h medadd_h_pretty_cards inl_bl">'+s.lang.global_wall_pretty_cards+"</div>",(F=(0,p.ge)("signed"))&&(0,u.disable)(F),(0,p.hide)((0,p.domByClass)(jt.menuNode,"_type_pretty_cards")),(0,p.hide)(e),T=Xt;break;case Se:if(!s.lang||vk.vidget||g.poll||!Kt||g.pretty_cards)return!1;(0,p.hide)((0,p.domByClass)(jt.menuNode,"_type_poll")),T=Kt;break;case Be:if(vk.widget||g.pretty_cards)return!1;let ge=O(Jt);z="";(0,C.partConfigEnabled)("maps_no_referrer")&&(z='referrerpolicy="no-referrer"'),b=`<span class="medadd_h medadd_h_link inl_bl">${(0,w.clean)((0,w.unclean)(s[4]))}</span><div class="fl_l medadd_c_map"><a onclick="return showBox('al_places.php', {act: 'geo_box', lat: ${(0,P.floatval)(s[0])}, long: ${(0,P.floatval)(s[1])}, provider: ${(0,w.intval)(s[3])}}, {dark: 1});"><div class="page_media_map_point"></div><img class="page_preview_map" ${z} width="${ge.width}" height="${ge.height}" src="/maps?lat=${(0,P.floatval)(s[0])}&lng=${(0,P.floatval)(s[1])}&z=11&w=${ge.width}&h=${ge.height}" /></a></div>`,T=y=Jt,(0,p.hide)((0,p.domByClass)(jt.menuNode,"_type_map"));break;case Qe:if(g.share||g.page||!s.lang||vk.widget||g.pretty_cards)return!1;var H=s.media.split("_");b='<a href="/page'+s.media+'" onclick="return showWiki({oid: '+H[0]+", id: "+H[1]+'}, false, event, {queue: 1})" class="medadd_h medadd_h_page inl_bl">'+s.lang.profile_choose_page+"</a>",T=Xt;break;case Je:if(vk.widget||g.pretty_cards)return!1;if(s.is_private_album){(0,w.extend)(s.editable,{title:s.title,size:0}),(0,C.partConfigEnabled)("attachments_primary_mode_web_feature")?(y=!1,T=Jt):(y=1,T=qt);break}if(s.thumb.match(/^\/images\//)&&(s.thumb=""),Ft){if(!s.editable)return!1;(0,w.extend)(s.editable,{title:s.title,size:s.count,click:!xt.nocl&&nav.change.pbind({z:"album"+o})})}let me=s.thumb;if((0,C.partConfigEnabled)("attachments_primary_mode_web_feature")&&(me=Dt(s)),(0,P.vkImage)().src=me,b=`<a class="${"fl_l page_album_link"+(me?"":" page_album_nocover")}" ${v=xt.nocl?"":' href="/album'+o+'" onclick="return nav.change({z: \'album'+o+"'}, event)\""}>\n              ${me?`<div class="page_album_thumb_wrap"><img class="page_album_thumb" src="${me}"/></div>`:""}\n              <div class="page_album_title">\n                <div class="page_album_size">${s.count}</div>\n                <div class="page_album_title_text">${s.title}</div>\n              </div>\n            </a>`,(0,C.partConfigEnabled)("attachments_primary_mode_web_feature")){const[e]=s?.editable?.sizes?.s??[];b="",k=St({title:s.title,src:e,data:s,onclick:v,description:(0,_e.getLang)("wall_edit_album_description",s.count)}),y=!1,T=Zt}else y=1,T=qt;break;case Ue:if(!s.lang||vk.widget||g.pretty_cards)return!1;b="<a onclick=\"showWiki({w: 'note"+s.raw+'\', edit: 1}, true, event, {queue: 1})" class="medadd_h medadd_h_note inl_bl">'+s.lang.profile_choose_note+"</a>",k='<div class="medadd_c medadd_c_note"><a onclick="showWiki({w: \'note'+s.raw+'\', edit: 1}, true, event, {queue: 1})" id="share_note_title'+s.raw+'">'+s.title+"</a></div>",T=Xt;break;case Ye:if(vk.widget||g.pretty_cards||g.share||g.market||g.market_services)return!1;const{icon:ve}=(0,x.getIcon36MarketOutline)(),we=s.thumb?`<img class="medadd_c_market_thumb fl_l" src="${s.thumb}" alt="" />`:`<span class="medadd_c_market_default_image fl_l">${ve}</span>`,fe=s.title.replaceAll(">","&gt;").replaceAll("<","&lt;");b='<div class="medadd_c_market">'+`<a target="_blank" rel="noopener" href="${s.href}" aria-label="${fe}">${we}</a>`+'<div class="medadd_c_market_info fl_l">'+`<a class="medadd_c_market_title" data-testid="medadd_market_item_title" target="_blank" href="${s.href}">${fe}</a>`+`<div class="medadd_c_market_price">${s.price}</div>`+"</div></div>",(0,p.hide)((0,p.domByClass)(jt.menuNode,"_type_market")),(0,p.hide)((0,p.domByClass)(jt.menuNode,"_type_market_services")),I=' id="pam'+Yt+"_market"+o+'"';break;case"market_album":if(vk.widget||g.pretty_cards)return!1;if(s.is_private_album){(0,w.extend)(s.editable,{title:s.title,msize:""}),(0,C.partConfigEnabled)("attachments_primary_mode_web_feature")?(y=!1,T=Jt):(y=1,T=qt);break}if(Ft){if(!s.editable)return!1;(0,w.extend)(s.editable,{title:s.title,msize:(0,_e.langNumeric)(s.count,s.lang.profile_X_market_items),click:!1})}H=o.split("_");const be=(0,C.partConfigEnabled)("attachments_primary_mode_web_feature")?Dt(s):s.thumb;if((0,P.vkImage)().src=be,b=`<a class="${"fl_l page_preview_album wall_album_cover_wrap wall_market_album_cover"+(be?"":" page_album_nocover")}" ${v=xt.nocl?"":' href="/market'+H[0]+"?section=album_"+H[1]+'"'}>\n              ${be?`<img class="wall_album_cover" src="${be}"/>`:""}\n              <div class="wall_album_caption">\n                <div class="wall_album_title_wrap clear_fix">\n                  <div class="wall_album_count fl_r">${s.count}</div>\n                  <div class="wall_album_title">${s.title}</div>\n                </div>\n              </div>\n            </a>`,(0,C.partConfigEnabled)("attachments_primary_mode_web_feature")){b="";const[e]=s?.editable?.sizes?.s??[];k=St({title:s.title,src:e,data:s,onclick:v,description:(0,_e.getLang)("wall_market_album_compact_description").replace("{group_name}",s?.editable?.msize)}),y=!1,T=Zt}else y=1,T=qt;break;case tt:if(vk.widget)return!1;Nt.copyrightCreate(s);break;case Ve:if(vk.widget)return!1;let ke="";if(cur.editingPost&&!zt)o=(0,w.intval)(o),s.date=o||(0,w.intval)(cur.editingPost[7]),ce.FlatButton.setLabel((0,p.ge)("wpe_save"),(0,_e.getLang)("global_save")),ke=(0,_e.getLang)("global_save");else if(cur.editingPost&&"wpe_media_preview"==t.id){o=(0,w.intval)(o),s.date=o||(0,w.intval)(cur.editingPost[7]);var G=(0,p.geByClass1)("medadd_c_timersett",ea);if(G){var j=(0,p.domPN)(G);G=j.innerHTML,(0,p.re)(j)}else G="";ce.FlatButton.setLabel((0,p.ge)("wpe_save"),(0,_e.getLang)("global_save")),ke=(0,_e.getLang)("global_save")}else{s.draft?s.date=(0,w.intval)(o):cur.postponedLastDate&&(s.date=(0,w.intval)(cur.postponedLastDate)+3600);var Y=(0,p.ge)("official");if(!(se=(0,p.gpeByClass)("_submit_post_box",Y))&&xt.poster&&(0,p.domClosest)("poster",Y)&&(se=(0,p.ge)("submit_post_box")),Y&&se){var q=(0,p.domData)(se,"from-oid"),W=(0,p.domData)(se,"oid");q==vk.id&&W&&wall.setReplyAsGroup(Y,{from:W}),(0,u.disable)(Y);var Z=(0,p.data)(Y,"tt");if(Z&&Z.rdBtns){var K=Z.rdBtns[1],X=Z.rdBtnsGroup,Q=(0,p.domData)(K,"as");(0,u.radiobtn)(K,Q,X)}}const e=(0,p.ge)("like_share_send")||(0,p.ge)("send_post");e&&s.lang&&(ce.FlatButton.setLabel(e,s.lang.profile_wall_postpone_btn),ke=s.lang.profile_wall_postpone_btn)}Gt?(Nt.updatePostponeBtn(!1,s.date),Nt.postponeDate=s.date):b=`<div class="medadd_h medadd_h_timer inl_bl">${s.lang.profile_choose_timer}<span id="postpone_preview${Yt}"></span></div>`,!Nt.postponeDatepicker&&Gt&&Nt.setupPostpone(s,G),xt.poster&&xt.poster.changeBtnText(ke);var J=Math.round((new Date).getTime()/rt);(0,w.intval)(s.date)<J&&(s.date=J+3600),(0,p.hide)((0,p.domByClass)(jt.menuNode,"_type_postpone")),T=ea;break;case it:if(vk.widget)return!1;break;case ze:if(vk.widget)return!1;b='<div class="medadd_h medadd_h_mark_as_ads inl_bl">'+s.lang.global_ads_wall_post_mark_as_ads_action+"</div>",(0,p.hide)((0,p.domByClass)(jt.menuNode,"_type_mark_as_ads")),T=ea;break;case"wall":if(vk.widget||g.pretty_cards)return!1;b='<div class="medadd_c_wall"><a target="_blank" rel="noopener" href="'+s.href+'"><img class="medadd_c_wall_thumb fl_l" src="'+s.thumb+'" /></a><div class="medadd_c_wall_info fl_l"><a class="medadd_c_wall_author" target="_blank" href="'+s.href+'">'+s.author+'</a><div class="medadd_c_wall_type">'+s.lang.title+"</div></div>",I=' id="pam'+Yt+"_wall"+o+'"',(0,p.hide)(e);break;case"wall_reply":if(vk.widget||g.pretty_cards)return!1;b='<div class="medadd_c_wall"><a target="_blank" rel="noopener" href="'+s.href+'"><img class="medadd_c_wall_thumb fl_l" src="'+s.thumb+'" /></a><div class="medadd_c_wall_info fl_l"><a class="medadd_c_wall_author" target="_blank" href="'+s.href+'">'+s.author+'</a><div class="medadd_c_wall_type">'+s.lang.title+"</div></div>",I=' id="pam'+Yt+"_wall_reply"+o+'"',(0,p.hide)(e);break;case Ze:if(vk.widget||g.pretty_cards)return!1;var ee="_im_media_preview"===(0,p.domPN)(T).id,te=!ee&&cur.editingPost&&"wpe_media_preview"===(0,p.domPN)(T).id;if(ee)b='<div class="medadd_c_podcast"><a target="_blank" rel="noopener" href="'+s.href+'"><img class="medadd_c_podcast_thumb fl_l" src="'+s.thumb+'" /></a><div class="medadd_c_podcast_info fl_l"><a class="medadd_c_podcast_title" target="_blank" href="'+s.href+'">'+s.title+'</a><div class="medadd_c_podcast_type">'+s.lang.title+"</div></div>";else{var ae=!1;(0,w.each)(Nt.chosenMedias||[],(function(e,t){(0,P.isArray)(t)&&t[0]===Ze&&(cur.addMedia[Nt.lnkId].unchooseMedia(e),ae=!0)})),ae&&Nt.onChange&&Nt.onChange(i,o,s,r),b='<div class="podcast_preview_title">'+(0,_e.getLang)("audio_podcast_attach_media")+"</div>";var ie=s.audio[n.AudioUtils.AUDIO_ITEM_INDEX_OWNER_ID]+"_"+s.audio[n.AudioUtils.AUDIO_ITEM_INDEX_ID];cur.podcastEditData={audioId:ie,ref:"post",onCreate:function(e,t){Nt.chooseMedia(Ze,e[n.AudioUtils.AUDIO_ITEM_INDEX_OWNER_ID]+"_"+e[n.AudioUtils.AUDIO_ITEM_INDEX_ID],{audio:e,coverUrl:t})}};var ne="<span class=\"podcast_snippet__edit\" onclick=\"cur.chooseMedia = cur.podcastEditData.chooseMedia; stManager.add([jsc('web/podcast.js')], function() { Podcast.edit('"+ie+"'); });\"></span>";b+='<div class="podcast_snippet_loading" id="podcast_loading'+o[0]+'"></div>',Promise.all([a.e(91498),a.e(89631),a.e(762),a.e(79210),a.e(63485),a.e(99242),a.e(65400),a.e(6827),a.e("langs/web/podcasts_web")]).then(a.bind(a,525166)).then((function(e){(0,p.domReplaceEl)((0,p.ge)("podcast_loading"+o[0]),e.default.drawSnippet(s.audio,s.coverUrl,ne))}))}if(T=Qt,(s.onSuccess||function(){})(),(0,p.hide)((0,p.domByClass)(jt.menuNode,"_type_podcast")),!ee&&!te){var oe=(0,p.ge)("official"),se=oe&&(0,p.gpeByClass)("_submit_post_box",oe);if(oe&&se)(q=(0,p.domData)(se,"from-oid"))!==(W=(0,p.domData)(se,"oid"))&&(M=" attach_disabled")}break;case et:if(vk.widget||g.pretty_cards||g[et])return!1;let Te="",Ce=Number(s.type);if(Ce===E.GROUPS_CLASS_EVENT&&(Te=s.private?(0,w.getTemplate)("event_snippet_private_info"):""),!(b=(0,w.getTemplate)("event_snippet",(0,w.extend)({bottom:Te},s))))return(s.onError||function(){})(),!1;let Ie="";Ie=Ce===E.GROUPS_CLASS_EVENT?(0,_e.getLang)("events_media_type"):(0,_e.getLang)("groups_media_type_community"),b='<div class="event_preview_title">'+Ie+"</div>"+b,T=Xt,(s.onSuccess||function(){})();break;case nt:if(g[nt])return!1;b=(0,w.getTemplate)("textlive_snippet",s);break;case ot:if(g[ot])return!1;break;case at:b=this.getProductPreview(s)}if(zt){var re=Nt.chosenMedias,le=h?m:re.length,de="";if(Ft&&1===y)de=!1;else if(i===xe)de=(0,p.se)('<div class="page_preview_'+i+"_wrap"+M+'" style="position: relative">'+b+'<div class="page_photos_count">'+o.split(",").length+"</div></div>");else if(i==Ve&&Gt||i===tt||i===it||i===ot)de=!1;else{let e=null;i===Fe&&s.map_data&&(e=Be),de=(0,p.se)('<div class="page_preview_'+(e||i)+"_wrap"+M+(A?" page_preview_vk_mini_app":"")+'"'+(xt.nocl?' style="cursor: default"':"")+I+'><div nosorthandle="1" class="page_media_x_wrap inl_bl" data-title="'+(0,_e.getLang)("dont_attach")+'" aria-label="'+(0,_e.getLang)("dont_attach")+'" role="button" onmouseover="showTitle(this)" '+`onclick="cur.addMedia[${Nt.lnkId}].unchooseMedia(${le}, undefined, { source: 'close' }); return cancelEvent(event);"><div class="page_media_x" nosorthandle="1"></div></div>`+b+k+"</div>")}if((0,p.addClass)(de,y?"fl_l":"clear_fix"),void 0!==s.upload_ind&&(0,p.re)("upload"+s.upload_ind+"_progress_wrap"),xt.toggleLnk&&!h){var ue=Nt.attachCount()+1<Vt;(0,p.toggle)(e,ue),xt.onToggleBlock&&xt.onToggleBlock(ue)}if(Ft&&1===y){const a=Nt.getAttachView();Nt.getAttachViewInitialized()&&(0,C.partConfigEnabled)("attachments_primary_mode_web_feature")&&a===ve.ATTACHMENT_PRIMARY_MODE.carousel&&xt?.getIsCarouselAllowed?.({skipClipsCheck:!0})?(Nt?.emitCarouselRedrawNeeded(T),T.classList.remove("media_preview"),(0,p.show)(T),Nt?.emitPreviewUpdate()):(T.classList.add("media_preview"),(0,p.addClass)(T,"editable_thumbs_wrap"),T=(0,p.domLC)(T)&&(0,p.hasClass)((0,p.domLC)(T),"editable_thumbs")?(0,p.domLC)(T):T.appendChild((0,p.ce)("div",{id:"thumbs_edit"+Yt,className:"editable_thumbs"})),window.stManager.add(["thumbs_edit.css",window.jsc("web/thumbs_edit.js")],(()=>{if(!re[le]||re[le].type!==i&&re[le].media===o)return;if(xt.toggleLnk&&!h){var a=Nt.attachCount()+1<Vt;(0,p.toggle)(e,a),xt.onToggleBlock&&xt.onToggleBlock(a)}s.editable.remove=Nt.unchooseMedia.pbind(le),(0,p.show)((0,p.domPN)(T));let n=ThumbsEdit.convert(i,o,s.editable);(0,p.domData)(T,"te-inited")?h?ThumbsEdit.updateMedia(T,i,o,s):ThumbsEdit.addMedia(T,n):ThumbsEdit.init(T,[n],{width:xt.teWidth,height:xt.teHeight,nocl:xt.nocl,force:!0,onMove:xt.onAddMediaChange,onIndexChanged:xt.onIndexChanged,onDelete:xt.onDelete,onUpdate:xt.onChangedSize,deferred:!0}),(0,p.toggleClass)(t,"media_preview_has_medias",Nt.hasVisibleRows()&&((0,p.hasClass)(t,"reply_media_preview")||(0,p.isVisible)(e)||!(0,p.hasClass)("signed","disabled"))),xt.onChangedSize&&xt.onChangedSize(),Nt?.emitPreviewUpdate()}),!0))}else(i==Ve||i==tt||i===it)&&Gt||i===ot||((0,p.show)(T),h?T.replaceChild(de,re[m][2]):T.appendChild(de)),i!==at&&Ht&&(T==Zt?window.stManager.add([window.jsc("web/sorter.js")],(function(){var e=(0,p.getXY)(Zt),t=(0,p.getSize)(Zt),a=function(){Zt.sorter?sorter.added(Zt):T.childNodes.length>1&&sorter.init(Zt,{onReorder:xt.onAddMediaChange})};e[0]||e[1]||t[0]||t[1]?a():cur.sorterClbk=a,xt.onChangedSize&&xt.onChangedSize()}),!0):T==Wt&&window.stManager.add([window.jsc("web/qsorter.js")],(function(){Wt.qsorter?qsorter.added(Wt):T.childNodes.length>1&&qsorter.init(Wt,Nt.qsorterOpts()),xt.onChangedSize&&xt.onChangedSize()}),!0)),xt.onChangedSize&&xt.onChangedSize();h?re[m]=[i,o,de,r,f,s]:re.push([i,o,de,r,f,s])}else{le=0;if(i===Ve?le=1:"mark_as_ads"===i&&(le=2),i==Ve&&Gt||i===tt||i===it||i===ot)de=!1;else{let e=(!1===y?"page_docs_preview":"page_pics_preview")+(le?"":" post_thumbed_media");e+=y?" fl_l":" clear_fix";let t=null;i===Fe&&s.map_data&&(t=Be),de=(0,p.se)(`\n            <div class="${e}">\n              <div class="${"page_preview_"+(t||i)+"_wrap"} ${M}" ${(xt.nocl?'style="cursor: default"':"")+I}>\n                ${b}\n                <div nosorthandle="1" class="page_media_x_wrap inl_bl" data-title="${(0,_e.getLang)("dont_attach")}" aria-label="${(0,_e.getLang)("dont_attach")}" role="button" onmouseover="showTitle(this)" onclick="cur.addMedia[${Nt.lnkId}].unchooseMedia(${le}); return cancelEvent(event);">\n                  <div class="page_media_x" nosorthandle="1"></div>\n                </div>\n                ${k}\n              </div>\n            </div>`)}void 0!==s.upload_ind&&(0,p.re)("upload"+s.upload_ind+"_progress_wrap"),"postpone"!==i&&i!==it&&"mark_as_ads"!==i&&i!==tt&&(Nt.chosenMedia=[i,o],Nt.chosenMedia[5]=s,Nt.chosenMediaData=s),Nt.singleAdded(de,i)}i==Fe?!s.title||r||s.url?s.video?(cur.shareShowImg=0,Nt.bigLink=!0,Nt.showExternalPreview()):Nt.showExternalPreview():(cur.shareShowImg=0,Nt.showPreview(!0),Nt.shareData.images=!1):i==Qe?s.nopreview||(cur.shareShowImg=0,Nt.shareData=(0,w.extend)(Nt.shareData||{},s,{images:!1}),Nt.showPreview()):i===Se?Nt.pollCreate(s):i==Ve?Gt?Nt.postponeInd=le:Nt.setupPostpone(s,G):i==ze?Nt.markAsAds=1:i==He&&Nt.createPrettyCards(s),Nt._loadingMediasCount>0&&Nt._loadingMediasCount--,(0,p.toggleClass)(t,"media_preview_has_medias",Nt.hasVisibleRows()&&((0,p.isVisible)(e)||!(0,p.hasClass)("signed","disabled"))),xt.onChangedSize&&xt.onChangedSize();var he=window.event;return he&&"click"==he.type&&(he.ctrlKey||he.metaKey||he.shiftKey)&&Nt.attachCount()+1<=Vt&&(l=!0),cur.fileApiUploadStarted&&void 0!==s.upload_ind||s.upload_new||cur.preventBoxHideWithSharedBox||cur.preventBoxHide||!0===l||(0,w.inArray)(i,[Se,"share","page","postpone","mark_as_ads","pretty_cards",tt,at])||boxQueue.hideLast(),cur.lastPostMsg=!1,xt.onMediaAdd&&xt.onMediaAdd({type:i,media:o,data:s,url:r}),(0,Ce.getAudioPlayer)().updateCurrentPlaying(),cur.onMediaChanged&&cur.onMediaChanged(Nt.chosenMedias),window.mvcur&&mvcur.onMediaChanged&&mvcur.onMediaChanged(),xt.onMediaChanged&&xt.onMediaChanged(),Nt.emitter&&Nt.emitter.emit(Nt.eventTypes.mediaUpdate),void 0!==s.upload_ind&&delete s.upload_ind,i===Oe&&s?.editable?.is_short_video&&Nt.getAttachView()===ve.ATTACHMENT_PRIMARY_MODE.carousel&&(Nt.setAttachView(ve.ATTACHMENT_PRIMARY_MODE.grid),xt?.setAttachViewControlValue(ve.ATTACHMENT_PRIMARY_MODE.grid)),!1},unchooseMedia:function(a,i,{source:n="manual",isReset:o=!1,skipPoll:s=!1,skipPostpone:r=!1,skipNotifications:l=!1,skipCopyright:d=!1}={}){const c=Nt.chosenMedias,_=i??(c[a]?.[0]?[c[a]?.[0]]:[]),h=c[a];if(s&&h?.[0]===Se)return!1;if(r&&h?.[0]===Ve)return!1;if(d&&h?.[0]===tt)return!1;if(Nt.onChange&&!1===Nt.onChange(!1,a,void 0,void 0))return!1;!l&&h?.[0]&&h?.[1]&&xt?.onDataDelete?.({type:h?.[0],id:h?.[1],isReset:o}),Nt?.emitPreviewUpdate();const g=qt?.querySelector(".PrimaryAttachmentCarousel"),m=Boolean(g&&g.parentElement),v=xt.copy&&(0,C.partConfigEnabled)("wall_posting_share_media_hidden");if(zt){if(_.includes(at)||(cur.checkURLDomainRequest&&cur.checkURLDomainRequest.abort(),clearTimeout(cur.showLoaderTimeout),clearInterval(cur.shareImgInterval),clearTimeout(cur.shareImgInterval2),clearTimeout(cur.imgLoadTimeout),clearTimeout(cur.checkURLDomainTO)),void 0===a){window.ThumbsEdit&&ThumbsEdit.removeAll("thumbs_edit"+Yt);const e=qt.querySelector(".PrimaryAttachmentCarousel");if(m&&((0,be.isCarouselCropEnabled)()?Nt.emitCarouselRedrawNeeded(qt):e.parentElement.innerHTML=""),(0,w.each)(Nt.chosenMedias,(function(e,t){!t||void 0===e||i&&!(0,w.inArray)(t[0],i)||Nt.unchooseMedia(e,void 0,{source:n,isReset:o,skipPoll:s,skipPostpone:r,skipNotifications:l,skipCopyright:d})})),Nt.urlsCancelled=[],xt.onChangedSize){xt.onChangedSize();var f=setInterval(xt.onChangedSize,50);setTimeout(clearTimeout.bind(null,f),500)}return void(Nt.copyrightToggle&&Nt.copyrightToggle(!0))}if(c[a]){var b;switch(c[a][0]===Ze&&(b=cur.editingPost&&!cur.editingPost[3].reply&&"wpe_media_preview"===(0,p.gpeByClass)("multi_media_preview",c[a][2]).id),c[a][2]?((P=(0,p.geByClass1)("page_media_x_wrap",c[a][2],"div"))&&P.tt&&P.tt.el&&P.tt.destroy(),(0,p.domPN)(c[a][2])==Zt&&Zt.sorter?((0,w.each)(Zt.sorter.elems,(function(){(0,p.setStyle)(this,{top:"auto",left:"auto",cursor:"auto"})})),Zt.sorter.destroy(),(0,p.re)(c[a][2]),Zt.childNodes.length>1&&sorter.init(Zt,{onReorder:xt.onAddMediaChange})):(0,p.domPN)(c[a][2])==Wt&&Wt.qsorter?((0,w.each)(Wt.qsorter.elems,(function(){(0,p.setStyle)((0,p.domFC)(this),{top:"auto",left:"auto"}),(0,p.setStyle)(this,{cursor:"auto"})})),Wt.qsorter.destroy(),(0,p.re)(c[a][2]),Wt.childNodes.length>1&&qsorter.init(Wt,Nt.qsorterOpts())):(0,p.re)(c[a][2])):c[a][0]!=Le&&c[a][0]!=Oe&&c[a][0]!=Je||window.ThumbsEdit&&ThumbsEdit.removeById("thumbs_edit"+Yt,c[a][0]+c[a][1]),c[a][0]){case"page":case"share":Nt.shareData={},(0,p.re)(Nt.sharePreview),(0,p.hide)("medadd_c_linkimg_loader"),delete Nt.sharePreview,(0,p.show)((0,p.domByClass)(jt.menuNode,"_type_share")),(0,p.show)(e),(k=(0,p.ge)("signed"))&&(0,u.disable)(k,!(0,u.isChecked)("official")),(0,p.show)((0,p.domByClass)(jt.menuNode,"_type_market"));break;case"pretty_cards":var k;(0,p.re)(Nt.prettyCardGallery.el),delete Nt.prettyCardGallery,(k=(0,p.ge)("signed"))&&(0,u.disable)(k,!(0,u.isChecked)("official")),(0,p.show)((0,p.domByClass)(jt.menuNode,"_type_pretty_cards")),(0,p.show)(e);break;case Se:if(s)break;(0,p.re)(Nt.pollPreview),delete Nt.pollPreview,(0,p.show)((0,p.domByClass)(jt.menuNode,"_type_poll"));break;case"map":(0,p.show)((0,p.domByClass)(jt.menuNode,"_type_map"));break;case Ze:var y=!0;if(b)+cur.editingPost[0].split("_")[0]!==cur.oid&&(y=!1);else{var T=(I=(0,p.ge)("official"))&&(0,p.gpeByClass)("_submit_post_box",I);if(I&&T)(0,p.domData)(T,"from-oid")!==(0,p.domData)(T,"oid")&&(y=!1)}(0,p.toggle)((0,p.domByClass)(jt.menuNode,"_type_podcast"),y);break;case Ye:(0,p.show)(e),(0,p.show)((0,p.domByClass)(jt.menuNode,"_type_market")),(0,p.show)((0,p.domByClass)(jt.menuNode,"_type_market_services"));break;case st:(0,p.show)((0,p.domByClass)(jt.menuNode,"_type_online_booking"));break;case"wall":case"wall_reply":case Ke:case Xe:(0,p.show)(e);break;case"postpone":var I,E=(0,p.geByClass1)("medadd_c_timersett",Nt.postponePreview);cur.editingPost&&E&&!Gt?(0,p.re)((0,p.domFC)(Nt.postponePreview)):(ea.innerHTML="",Nt.postponeDatepicker=null,Nt.postponeDate=null,Nt.postponeInd=null),Nt.postponePreview=!1,(I=(0,p.ge)("official"))&&(0,u.disable)(I,!1);let t=xt.poster,a="";if(cur.editingPost)if(cur.editingPost[6]&&(0,w.intval)(cur.editingPost[6].getAttribute("data-suggest"))){a=(0,_e.getLang)("wall_publish_suggest");let e=(0,p.ge)("wpe_save");e&&ce.FlatButton.setLabel(e,a)}else{a=(0,_e.getLang)("wall_publish_suggest");let e=(0,p.ge)("wpe_save");e&&ce.FlatButton.setLabel(e,a)}else{a=(0,_e.getLang)("wall_send");const e=(0,p.ge)("like_share_send")||(0,p.ge)("send_post");e&&ce.FlatButton.setLabel(e,a)}t&&t.changeBtnText(a),Gt?Nt.updatePostponeBtn(!0):(0,p.show)((0,p.domByClass)(jt.menuNode,"_type_postpone"));break;case"mark_as_ads":(0,p.show)((0,p.domByClass)(jt.menuNode,"_type_mark_as_ads")),Nt.markAsAds=!1;break;case tt:Nt.copyrightRemove();break;case Le:case Oe:case Re:m&&(0,be.isCarouselCropEnabled)()&&Nt.emitCarouselRedrawNeeded(qt)}c[a]=!1}if(xt.toggleLnk&&!v){y=Nt.attachCount()<Vt;(0,p.toggle)(e,y),xt.onToggleBlock&&xt.onToggleBlock(y)}_.includes(at)||((0,p.toggle)(qt,!!(Ft?qt?.querySelector(".thumb_wrap, .PrimaryAttachmentCarousel"):(0,p.domFC)(qt))),(0,p.toggle)(Wt,!!(0,p.domFC)(Wt)),(0,p.toggle)(Kt,!!(0,p.domFC)(Kt)),(0,p.toggle)(Xt,!!(0,p.domFC)(Xt)),(0,p.toggle)(Qt,!!(0,p.domFC)(Qt)),(0,p.toggle)(Jt,!!(0,p.domFC)(Jt))),(0,p.toggle)(Zt,!!(0,p.domFC)(Zt)),Gt||(0,p.toggle)(ea,!!(0,p.domFC)(ea)),Nt.emitter&&Nt.emitter.emit(Nt.eventTypes.previewUpdate,Nt.getMediaUIViewSelectorAvailable(),Nt.isRatioSelectorVisible()),(0,p.toggle)(ta,!!(0,p.domFC)(ta))}else{var M,P;if(null==a&&(a=0),(P=(0,p.geByClass)("page_media_x_wrap",t,"div")[a])&&P.tt&&P.tt.el&&P.tt.destroy(),1==a){if(Gt)ea.innerHTML="",Nt.postponeDatepicker=null,Nt.postponeDate=null,Nt.updatePostponeBtn(!0);else if(Nt.postponePreview){(0,p.show)((0,p.geByClass1)("add_media_type_"+Yt+"_postpone",jt.menuNode,"a"));var A=(0,p.domPN)(Nt.postponePreview);if(window.tooltips&&tooltips.destroyAll(A),(0,p.re)(A),!cur.editingPost){const e=cur.shButtonLabelBackup||(0,_e.getLang)("wall_send"),t=(0,p.ge)("like_share_send")||(0,p.ge)("send_post");t&&ce.FlatButton.setLabel(t,e)}Nt.postponePreview=!1;var S=jt.lastTypes;(0,w.each)(jt.types,(function(e,t){"postpone"===t[0]&&S.push(t)})),jt.setItems(S)}}else if(2==a&&Nt.markAsAds){Nt.markAsAds=!1;var D=(0,p.geByClass1)("page_preview_mark_as_ads_wrap",t);window.tooltips&&D&&tooltips.destroyAll(D),(0,p.re)(D);S=jt.lastTypes;(0,w.each)(jt.types,(function(e,t){"mark_as_ads"===t[0]&&S.push(t)})),jt.setItems(S)}else if(3===a)Nt.copyrightRemove();else{if(Nt.postponePreview||Nt.markAsAds){A=Nt.postponePreview&&(0,p.domPN)(Nt.postponePreview),D=Nt.markAsAds&&(0,p.domPN)((0,p.geByClass1)("page_preview_mark_as_ads_wrap",t));for(var x=[],L=0;L<t.childNodes.length;L++){var O=t.childNodes[L];"DIV"==O.nodeName&&O!=A&&O!=D&&x.push(O)}(0,w.each)(x,(function(e,t){(0,p.re)(t)}));S=[];(0,w.each)(jt.types,(function(e,t){"postpone"===t[0]&&Nt.postponePreview||"mark_as_ads"===t[0]&&Nt.markAsAds||S.push(t)})),jt.setItems(S)}else(0,p.val)(t,""),(0,p.addClass)(t,"med_no_attach"),jt.setItems(jt.types);Nt.chosenMedia&&(Nt.chosenMedia=!1,Nt.chosenMediaData=!1),(M=Nt.shareData)&&(M.url&&Nt.urlsCancelled.push(M.url),M.initialPattern&&Nt.urlsCancelled.push(M.initialPattern),Nt.shareData={}),(0,w.each)([Nt.sharePreview,Nt.pollPreview],(function(){(0,p.re)(this)})),Nt.sharePreview=Nt.pollPreview=!1}xt.toggleLnk&&!v&&(0,p.show)(e)}if(Xt&&Xt.classList.remove("vk_mini_app_preview"),(0,p.toggleClass)(t,"media_preview_has_medias",Nt.hasVisibleRows()&&((0,p.hasClass)(t,"reply_media_preview")||(0,p.isVisible)(e)||!(0,p.hasClass)("signed","disabled"))),Nt.copyrightToggle&&Nt.copyrightToggle(!0),cur.onMediaChanged&&cur.onMediaChanged(c),window.mvcur&&mvcur.onMediaChanged&&mvcur.onMediaChanged(),xt.onMediaChanged&&xt.onMediaChanged(),xt.onMediaRemove&&xt.onMediaRemove({removedTypes:_,source:n,isReset:o}),Nt.emitter&&Nt.emitter.emit(Nt.eventTypes.mediaUpdate),cur.lastPostMsg=!1,Nt.onChange&&Nt.onChange(!1),xt.onChangedSize){xt.onChangedSize();f=setInterval(xt.onChangedSize,50);setTimeout(clearTimeout.bind(null,f),500)}},findChosenMedia:e=>Nt.chosenMedias.find((t=>t&&t[0]===e)),findChosenMediaAllIndices:e=>(0,M.findAllIndices)(Nt.chosenMedias,(t=>t[0]===e)),chosenMediaToObject(e){const[t,a,,,,i]=e;return{type:t,media:a,data:i}},unchooseMediaForType(e){Nt.findChosenMediaAllIndices(e).forEach((e=>{Nt.unchooseMedia(e)}))},unchooseMediaByTypeAndId(e,t){const a=Nt.chosenMedias.findIndex((a=>{if(!a)return!1;const[i,n]=a;return e===i&&t===n}));a>-1&&this.unchooseMedia(a);(Nt?.getThumbsMediaItems()??[]).length||Nt?.clearCarouselRatio?.()},singleAdded:function(a,i){if(i!==tt){if(i===Ve){if(Gt)return;t.appendChild(a)}else if("mark_as_ads"===i)Nt.postponePreview?t.insertBefore(a,(0,p.domLC)(t)):t.appendChild(a);else{if(i===it||i===ot)return;(0,p.domFC)(t)?t.insertBefore(a,(0,p.domFC)(t)):t.appendChild(a)}(0,p.removeClass)(t,"med_no_attach");var n=[];(0,w.each)(jt.lastTypes,(function(e,t){("postpone"!==t[0]||!Nt.postponePreview&&"postpone"!==i)&&("mark_as_ads"!==t[0]||!Nt.markAsAds&&"mark_as_ads"!==i)&&((0,w.inArray)(i,["postpone","mark_as_ads"])||(0,w.inArray)(t[0],["postpone","mark_as_ads"]))&&n.push(t)})),jt.setItems(n),xt.toggleLnk&&!n.length&&(0,p.hide)(e)}},getMedias:function(e){if(zt){var t=window.ThumbsEdit?ThumbsEdit.getMedias("thumbs_edit"+Yt):[],a={},i=Nt.chosenMedias||[],n=[],o=function(e,t,i){if(i[0]+i[1]==e)return n.push(i),a[e]=!0,!1};return(0,w.each)(t,(function(e,t){(0,w.each)(i,o.pbind(t[0]+t[1]))})),(0,w.each)(Wt.childNodes,(function(e,t){var a=(t.id||"").match(/^pam\d+_([a-z]+)(-?\d+_\d+)/);a&&(0,w.each)(i,o.pbind(a[1]+a[2]))})),(0,w.each)(Zt.childNodes,(function(e,t){var a=(t.id||"").match(/^pam\d+_([a-z]+)(-?\d+_\d+)/);a&&(0,w.each)(i,o.pbind(a[1]+a[2]))})),(0,w.each)(i,(function(e,t){t&&(0,P.isArray)(t)&&t.length&&!a[t[0]+t[1]]&&n.push(t)})),n}return(i=Nt.chosenMedia)?[e?i:i[0]+i[1]]:[]},showPhoto:function(e,t,a,i){for(var n in!cur.pvData||cur.pvShown&&cur.pvListId==t||delete cur.pvData[t],ajaxCache)n.toString().match(/^\/al_photos\.php\#act=show&draft_photos/)&&delete ajaxCache[n];var o=Nt.getMedias(),s=[];(0,w.each)(o,(function(e,t){t&&"photo"==t[0]&&s.push(t[1]+"/"+(Nt.phLists[t[1]]||""))})),a.additional={},a.additional.open_pe=(0,w.intval)(cur.openEditor),cur.openEditor||(a.additional.draft_photos=s.join(";")),delete cur.openEditor;const r=Nt._cleanPhotoCacheIds[e];return Nt._cleanPhotoCacheIds[e]=void 0,(0,k.showPhoto)(e,t,(0,w.extend)(a,{queue:1,noCache:r}),i)},showMediaProgress:function(t,a,i,n){if(Nt.onProgress&&!1===Nt.onProgress(t,a,i))return!1;var o=i.loaded/i.total,s=(0,w.intval)(100*o),r=(i.fileName||i.name||"").replace(/[&<>"']/g,""),l=r?a+"_"+r:a,d=r?r.length>33?r.substr(0,30)+"...":r:"",c=(0,p.ge)("upload"+l+"_progress");if(c){(0,p.show)(c);g=(0,p.geByClass1)("ui_progress_bar",c);(0,p.setStyle)(g,{width:s+"%"})}else{const t=n?`window.__upload_callback['${l}'] && window.__upload_callback['${l}']()`:`Upload.terminateUpload(${a}, '${r||a}', this);`,i=`<div\n            class="progress_x fl_l"\n            onmouseover="animate(this, {opacity: 1}, 200);showTooltip(this, {text: '${(0,_e.getLang)("dont_attach")}', shift: [16, 8, 8], black: 1})"\n            onmouseout="animate(this, {opacity: 0.6}, 200);"\n            onclick="${t}" />`;cur.attachMediaIndexes||(cur.attachMediaIndexes={}),cur.attachMediaIndexes[l]=Yt;var _=`\n          <div class="fl_l">\n            <div class="page_attach_progress_wrap" style="margin-top: 3px; margin-bottom: 4px;">\n              <div id="upload${l}_progress" class="page_attach_progress ui_progress">\n                <div class="ui_progress_back"></div>\n                <div class="ui_progress_bar"></div>\n              </div>\n            </div>\n          </div>\n          ${d?'<div class="attach_label fl_l">'+d+"</div>":""}\n          ${i}\n          `;if(zt){if(ta.appendChild((0,p.ce)("div",{id:"upload"+l+"_progress_wrap",innerHTML:_,className:"clear_fix upload_"+a+"_progress"},{marginTop:"6px"})),(0,p.show)(ta),xt.toggleLnk){var u=Nt.attachCount()<Vt;(0,p.toggle)(e,u),xt.onToggleBlock&&xt.onToggleBlock(u)}Nt._loadingMediasCount++}else{var h=(0,p.ce)("div",{id:"upload"+l+"_progress_wrap",innerHTML:_,className:"clear_fix upload_"+a+"_progress"});Nt.chosenMedia="progress",Nt.singleAdded(h,"progress")}xt.onChangedSize&&xt.onChangedSize(),c=(0,p.ge)("upload"+l+"_progress");var g=(0,p.geByClass1)("ui_progress_bar",c);s?(0,p.setStyle)(g,{width:s+"%"}):((0,p.setStyle)(g,{width:"1px"}),(0,p.hide)(c))}},hasVisibleRows:function(){if((0,be.isCarouselCropEnabled)()){const e=t?.querySelectorAll("[style].media_preview:not(.page_progress_preview)")??[];return Boolean([...e].some((e=>"none"!==e?.style?.display)))}var e=!1;return(0,w.each)((0,p.geByClass)("media_preview",t),(function(){if((0,p.isVisible)(this))return e=!0,!1})),e},attachDataCount:function(){return Nt.attachCount(xt?.getThumbsCount?.())},attachCount:function(e){if(Nt.attachedCount)return Nt.attachedCount();if(!t)return 0;if(!zt)return t.childNodes.length-(Nt.postponePreview?1:0)-(Nt.markAsAds?1:0);let a=(Ft&&window.ThumbsEdit?Nt.getThumbsEditPreviews():qt.childNodes).length;Ft&&!isNaN(e)&&(a=e);var i=a+Wt.childNodes.length+Jt.childNodes.length+Xt.querySelectorAll(".page_preview_article_wrap").length+Zt.childNodes.length/(Zt.sorter?2:1)+ta.childNodes.length;return Nt.sharePreview&&++i,Nt.pollPreview&&++i,i},onMediaTypesInit(){const e={actionsEl:Ot,addMedia:Nt,onMediaChange:xt.onMediaChange};Nt.types.forEach((t=>{const a=t[3],i=a&&a.onMediaTypeInit;i&&i(e)}))},getProductPreview:function(e){const{icon:t}=(0,L.getIcon56CameraOffOutline)();let a="",i="",n="MedaddProduct__img",o="";return e.price&&(a=`\n          <div class="MedaddProduct__price">\n            ${e.price/100} &#8381;\n          </div>\n        `),e.description&&(i=`\n          <div class="MedaddProduct__description">\n            ${e.description}\n          </div>\n        `),e.img?o=`style="background-image: url(${e.img});"`:n+=" MedaddProduct__img--empty",`\n        <div class="MedaddProduct">\n          <div class="MedaddProduct__widgetTitle">\n            ${(0,_e.getLang)("classifieds_post_edit_product_snippet_title")}\n          </div>\n          <div class="MedaddProduct__widget">\n            <div class="${n}" ${o}>\n              <div class="MedaddProduct__imgIcon">\n                ${t}\n              </div>\n            </div>\n            <div class="MedaddProduct__widgetRight">\n              <div class="MedaddProduct__title">\n                ${e.title}\n              </div>\n              ${a}\n              ${i}\n            </div>\n          </div>\n        </div>\n      `},pollCreate:function(e){let t=e.poll_html;if(cur.addMedia[Yt].pollInputData=e,Kt)if(t){let e=`<div class="medadd_c" id="poll_dummy${Yt}">${t}</div>`;Nt.pollPreview=Kt.appendChild((0,p.domFC)((0,p.cf)(e)))}else window.stManager.add(["ui_controls.css","ui_controls.js","datepicker.css",window.jsc("web/datepicker.js")],(()=>{let t=e[Pt],a=e[ut],i=e[ht],n=e[_t],s=e[pt],r=e[mt],d=e[vt],c=e[wt],u=e[ft],h=e[bt],g=e[kt],m=e[Tt],v=e[Ct],f=e.poll_is_not_posted,b=e[Et],k=e[Mt]||10;const y=e.poll_no_animate_opening||e[ut],T=e[yt],C=e.poll_show_caps_warning;let I=`\n            <div class="medadd_h medadd_h_poll inl_bl">\n              ${i.question}\n              <span class="medadd_poll_question_warning"></span>\n            </div>\n            <input onkeydown="cur.addMedia[%lnkid%].pollKeydown(this, event)" oninput="cur.addMedia[%lnkid%].pollChangeQuestion(this)" maxlength="${t}" onkeyup="cur.addMedia[%lnkid%].pollKeyup(this, event)" class="text dark medadd_poll_question${m&&v?" disabled":""}"${m&&v?' readonly="readonly"':""} id="create_poll_question%lnkid%" value="%question%" ${C?' data-task-keyup="Ads/caps_warning"':""} />\n            <div class="medadd_h">${i.answers}</div>\n            <div class="medadd_poll_answers" id="create_poll_answers%lnkid%">\n              %answers%\n            </div>\n            ${m&&v?"":`<div class="medadd_poll_answer_add_wrap" id="create_poll_add%lnkid%">\n              <div class="medadd_poll_answer_add fakeinput dark" onclick="cur.addMedia[%lnkid%].pollAnswerAdd()">${i.answer_add}</div>\n            </div>`}\n            %backgrounds%\n            %settings%\n            <div class="checkbox medadd_datepicker_checkbox medadd_poll_cb%classuntil%" id="create_poll_until%lnkid%" onclick="checkbox(this);cur.addMedia[%lnkid%].pollChanged();">${i.until}</div>\n            <div class="medadd_datepicker">\n              <input type="text" class="medadd_datepicker_date dark" id="create_poll_untildate%lnkid%"/><div class="medadd_datepicker_at datepicker_at">${i.at}</div><input type="text" class="medadd_datepicker_time dark" id="create_poll_untiltime%lnkid%"/>\n            </div>\n            ${m?`\n            <div class="checkbox medadd_poll_cb%classonmain%" id="create_poll_onmain%lnkid%" onclick="checkbox(this);cur.addMedia[%lnkid%].pollChanged();">${i.add_to_main}</div>\n            `:""}\n            ${m&&v?`\n            <div class="checkbox medadd_poll_cb%classclosed%" id="create_poll_closed%lnkid%" onclick="checkbox(this);cur.addMedia[%lnkid%].pollChanged();">${i.close}</div>\n            `:""}\n          `,E=`\n            <div class="medadd_h">${i.settings}</div>\n            ${v&&!f||m?"":`<div class="checkbox medadd_poll_cb%classanon%" id="create_poll_anonymous%lnkid%" onclick="checkbox(this);cur.addMedia[%lnkid%].pollChanged();">${i.anonymous}</div>`}\n            ${v?"":`<div class="checkbox medadd_poll_cb%classmulty%" id="create_poll_multy%lnkid%" onclick="checkbox(this);cur.addMedia[%lnkid%].pollChanged();">${i.multy}</div>`}\n            ${v?"":`<div class="checkbox medadd_poll_cb%classdisableunvote%" id="create_poll_disable_unvote%lnkid%" onclick="checkbox(this);cur.addMedia[%lnkid%].pollChanged();">${i.disable_unvote}</div>`}\n          `,M=`\n            <div class="medadd_poll_answer_wrap">\n              <input onkeydown="cur.addMedia[%lnkid%].pollKeydown(this, event)" onkeyup="cur.addMedia[%lnkid%].pollKeyup(this, event)" class="text dark medadd_poll_answer${m&&v?" disabled":""}"${m&&v?' readonly="readonly"':""} ${C?' data-task-keyup="Ads/caps_warning"':""} %attrs%/>\n              <div class="page_media_x_wrap medadd_poll_answer_remove" data-title="${i.answer_remove}" aria-label="${i.answer_remove}" role="button" onmouseover="showTitle(this)" onclick="cur.addMedia[%lnkid%].pollAnswerRemove(this)">\n                <div class="page_media_x"></div>\n              </div>\n            </div>\n          `,A=`\n            <div class="medadd_h">${i.background}</div>\n            <div class="medadd_poll_backgrounds_wrap" id="create_poll_backgrounds_wrap%lnkid%">\n              <div class="medadd_poll_backgrounds_arrow_prev" onclick="cur.addMedia[%lnkid%].pollBackgroundsPaging('prev')"></div>\n              <div class="medadd_poll_backgrounds_arrow_next" onclick="cur.addMedia[%lnkid%].pollBackgroundsPaging('next')"></div>\n              <div class="medadd_poll_backgrounds" id="create_poll_backgrounds%lnkid%">\n                %backgrounds%\n              </div>\n            </div>\n          `;cur.addMedia[Yt].answersLimit=k,cur.addMedia[Yt].tplAnswer=M;let S="";m||(S+=cur.addMedia[Yt].pollBackgroundGetHtml(),b&&b.forEach((e=>{S+=cur.addMedia[Yt].pollBackgroundGetHtml(e)})),S+=(0,p.rs)('\n            <div class="medadd_poll_background medadd_poll_background_uploader" onclick="cur.addMedia[%lnkid%].pollBackgroundUpload(this);">\n              <div class="medadd_poll_background_preview"></div>\n            </div>\n          ',{lnkid:Yt}),S=(0,p.rs)(A,{lnkid:Yt,backgrounds:S}));let D="";if(!s||(0,P.isArray)(s)&&!s.length){let t=[];for(let a in e)if(e.hasOwnProperty(a)){let i=8;if(a.substr(0,i)===`${pt}[`){let n=(0,w.intval)(a.slice(i,-1));t.push([n,e[a]])}}t.length?(s=[],t.sort(((e,t)=>e[0]<0&&t[0]<0?e[0]<t[0]:e[0]>=0&&t[0]>=0?e[0]>t[0]:t[0]<0)).forEach((e=>{s.push([e[0]<0?e[0]:0,e[1]])}))):s=[[0,""],[0,""]]}s.forEach(((e,t)=>{let[a,i]=e;D+=(0,p.rs)(M,{attrs:(a?` id="create_poll_ans${a}"`:"")+(i?` value="${(0,w.clean)((0,w.unclean)(i))}"`:""),lnkid:Yt})})),Nt.pollPreview=Kt.appendChild((0,p.ce)("div",{className:"medadd_c medadd_poll",innerHTML:(0,p.rs)(I,{lnkid:Yt,question:a?(0,w.clean)((0,w.unclean)(a)):"",classuntil:h?" on":"",settings:(0,p.rs)(E,{lnkid:Yt,classanon:n?" on":"",classmulty:g?" on":"",classdisableunvote:T?" on":""}),backgrounds:S,answers:D,classonmain:r?" on":"",classclosed:d?" on":""})})),s.length==k&&(0,p.hide)(`create_poll_add${Yt}`);const x=`create_poll_untildate${Yt}`,L=new ue.Datepicker(x,{time:`create_poll_untiltime${Yt}`,width:157,noPast:!0,activePeriod:dt,minStep:1,date:h||Math.round(((new Date).getTime()+ct)/rt),onUpdate:()=>{const e=new Date,t=new Date(1e3*(0,P.positive)((0,p.val)(x)));t.getTime()>=e.getTime()+dt&&(L.timePicker.hourDD.val(e.getHours()),t.getMinutes()>e.getMinutes()&&L.timePicker.minDD.val(e.getMinutes()),L.setDate(t.getFullYear(),t.getMonth()+1,t.getDate(),!0,e.getHours(),e.getMinutes())),cur.addMedia[Yt].pollChanged()}});if(cur.addMedia[Yt].pollBackgroundsPos=0,cur.addMedia[Yt].pollBackgroundSelect(u?-u:(0,w.intval)(c)),cur.addMedia[Yt].pollChangeQuestion((0,p.ge)(`create_poll_question${Yt}`)),y)(0,p.elfocus)(`create_poll_question${Yt}`),xt.onChangedSize&&xt.onChangedSize(),cur.addMedia[Yt].pollUpdateArrows();else{Nt.pollPreview.style.position="absolute",Nt.pollPreview.style.visibility="hidden";let e=Nt.pollPreview.offsetHeight;Nt.pollPreview.style.height=0,Nt.pollPreview.style.position="",Nt.pollPreview.style.visibility="",(0,l.animate)(Nt.pollPreview,{height:e},xt.mail?0:200,(()=>{Nt.pollPreview.style.height="",(0,p.elfocus)(`create_poll_question${Yt}`),xt.onChangedSize&&xt.onChangedSize(),cur.addMedia[Yt].pollUpdateArrows()}))}const O=(0,p.ge)(`create_poll_backgrounds_wrap${Yt}`);function $(){(0,_.addEvent)(O,o.browserFeatures.wheelEvent,cur.addMedia[Yt].pollMouseWheel)}function N(){(0,_.removeEvent)(O,o.browserFeatures.wheelEvent,cur.addMedia[Yt].pollMouseWheel)}(0,_.addEvent)(O,"mouseenter",$),(0,_.addEvent)(O,"mouseleave",N),(0,ge.pushNavDestroy)((()=>{(0,_.removeEvent)(O,o.browserFeatures.wheelEvent,cur.addMedia[Yt].pollMouseWheel),(0,_.removeEvent)(O,"mouseenter",$),(0,_.removeEvent)(O,"mouseleave",N)}))}))},pollMouseWheel:function(e){(0,_.cancelEvent)(e);const t=Math.abs(e.deltaY)>Math.abs(e.deltaX)?e.deltaY:e.deltaX;cur.addMedia[Yt].pollBackgroundsPaging(t,!0)},pollBackgroundsPaging:function(e,t){const a=(0,p.ge)(`create_poll_backgrounds_wrap${Yt}`),i=(0,p.ge)(`create_poll_backgrounds${Yt}`),n=a.offsetWidth;let o=cur.addMedia[Yt].pollBackgroundsPos;(0,P.isNumeric)(e)?o+=e:"next"===e?o+=n:o-=n,cur.addMedia[Yt].pollBackgroundsPos=Math.max(0,Math.min(o,i.scrollWidth-n)),t?(0,p.removeClass)(i,"animated"):(0,p.addClass)(i,"animated"),(0,p.setStyle)(i,"transform","translateX("+cur.addMedia[Yt].pollBackgroundsPos*(vk.rtl?1:-1)+"px)"),cur.addMedia[Yt].pollUpdateArrows()},pollUpdateArrows:function(){const e=(0,p.ge)(`create_poll_backgrounds_wrap${Yt}`),t=(0,p.ge)(`create_poll_backgrounds${Yt}`);if(!e)return;const a=e.offsetWidth,i=t.scrollWidth-a;(0,p.toggleClass)(e,"medadd_poll_backgrounds_arrow_prev_disabled",0===cur.addMedia[Yt].pollBackgroundsPos),(0,p.toggleClass)(e,"medadd_poll_backgrounds_arrow_next_disabled",cur.addMedia[Yt].pollBackgroundsPos===i||i<=0)},pollUntilGet:function(){let e=(0,u.isChecked)(`create_poll_until${Yt}`)?(0,P.positive)((0,p.val)(`create_poll_untildate${Yt}`)):0;return Math.min(e,(new Date).getTime()+dt)},pollBackgroundChange:function(e,t){let a=(0,p.gpeByClass)("medadd_poll_backgrounds",e),i=(0,p.geByClass1)("medadd_poll_background_radio",e);(0,p.geByClass)("medadd_poll_background_radio",a).forEach((e=>{(0,u.checkbox)(e,e===i)})),cur.addMedia[Yt].pollChanged()},pollAnswerAdd:function(){let e=(0,p.ge)("create_poll_answers"+Yt),t=(0,p.geByClass)("medadd_poll_answer_wrap",e).length,a=cur.addMedia[Yt].answersLimit;if(t<a){let t=(0,p.cf)((0,p.rs)(cur.addMedia[Yt].tplAnswer,{lnkid:Yt}));e.appendChild(t);let a=(0,p.geByClass)("medadd_poll_answer",e).pop();(0,p.elfocus)(a)}xt.onChangedSize&&xt.onChangedSize(),(0,p.toggle)("create_poll_add"+Yt,t<a-1)},pollAnswerRemove:function(e){e.tt&&e.tt.el&&e.tt.destroy(),(0,p.re)((0,p.domPN)(e)),xt.onChangedSize&&xt.onChangedSize(),cur.addMedia[Yt].pollChanged(),(0,p.show)("create_poll_add"+Yt)},pollKeydown:function(e,t){if((t=t||window.event)&&(10==t.keyCode||t.keyCode==_.KEY.ENTER||t.keyCode==_.KEY.TAB)){let a=(0,p.hasClass)(e,"medadd_poll_question"),i=t.shiftKey;if(a&&i)return;let n=a?(0,p.domFC)((0,p.domNS)((0,p.domNS)(e))):(i?p.domPS:p.domNS)((0,p.domPN)(e));return n?(0,p.elfocus)((0,p.geByTag1)("input",n)):i?(0,p.elfocus)((0,p.geByClass1)("medadd_poll_question",(0,p.domPN)((0,p.domPN)((0,p.domPN)(e))))):this.pollAnswerAdd(),(0,_.cancelEvent)(t)}},pollKeyup:function(e,t){(!(t=t||window.event)||10!=t.keyCode&&t.keyCode!=_.KEY.ENTER&&t.keyCode!=_.KEY.TAB)&&(cur.addMedia[Yt].pollChangedTimeout&&clearTimeout(cur.addMedia[Yt].pollChangedTimeout),cur.addMedia[Yt].pollChangedTimeout=setTimeout((()=>cur.addMedia[Yt].pollChanged()),100))},pollBackgroundGetHtml:function(e){let t="",[a]=e||[0];if(a<0){let[,i,n,o,s]=e;t=`\n          <div class="medadd_poll_background" onclick="cur.addMedia[${Yt}].pollBackgroundChange(this);">\n            <div class="medadd_poll_background_preview">\n              <div class="medadd_poll_background_preview_lines1"></div>\n              <div class="medadd_poll_background_preview_lines2"></div>\n              <div class="medadd_poll_background_photo" style="background: rgb(${n}, ${o}, ${s});">\n                <div class="medadd_poll_background_photo_holder">\n                  <div class="medadd_poll_background_photo_gradient" style="background: linear-gradient(0, rgba(${n}, ${o}, ${s}, 1) 0, rgba(${n}, ${o}, ${s}, 0) 50%)"></div>\n                  <img src="${i}" class="medadd_poll_background_photo_img"/>\n                </div>\n              </div>\n            </div>\n            <div class="medadd_poll_background_radio radiobtn" data-id="${a}" data-photo-r="${n}" data-photo-g="${o}" data-photo-b="${s}" data-photo-url="${i}"></div>\n          </div>\n        `}else{let i="",n="";if(a){let[,t]=e;if("gradient"===t){let[,,t,a]=e,n=[];a.forEach((e=>{let[t,a]=e;n.push(`#${a} ${Math.round(100*t)}%`)})),i=`background: linear-gradient(${t-90}deg, ${n.join(",")});"`}else if("tile"===t){let[,,t,a,n]=e;i=`background: url(${n}) top center;background-size: ${t}px ${a}px;"`}}else n=" medadd_poll_background_default";t=`\n          <div class="medadd_poll_background${n}" onclick="cur.addMedia[${Yt}].pollBackgroundChange(this);">\n            <div class="medadd_poll_background_preview"${i?` style="${i}"`:""}>\n              <div class="medadd_poll_background_preview_lines1"></div>\n              <div class="medadd_poll_background_preview_lines2"></div>\n            </div>\n            <div class="medadd_poll_background_radio radiobtn" data-id="${a}"></div>\n          </div>\n        `}return t},pollBackgroundAdd:function(e){let t=(0,p.ge)("create_poll_backgrounds"+Yt),a=(0,p.geByClass1)("medadd_poll_background_uploader",t),i=(0,p.cf)(cur.addMedia[Yt].pollBackgroundGetHtml(e));i=(0,p.domFC)(i),t.insertBefore(i,a)},pollBackgroundSelect:function(e){let t=(0,p.ge)("create_poll_backgrounds"+Yt);if(t){let a=(0,p.domQuery1)(`.radiobtn[data-id="${e}"]`,t)||(0,p.domQuery1)('.radiobtn[data-id="0"]',t);if(a){let e=(0,p.domPN)(a);cur.addMedia[Yt].pollBackgroundsPos=(e.offsetLeft-t.offsetWidth/2+e.offsetWidth/2)*(vk.rtl?-1:1),cur.addMedia[Yt].pollBackgroundsPaging(0,!0),cur.addMedia[Yt].pollBackgroundChange(e)}}},pollBackgroundGet:function(){let e=(0,p.domQuery1)(`#create_poll_backgrounds${Yt} .radiobtn.on`);return(0,w.intval)((0,p.domData)(e,"id"))},pollBackgroundUploaded:function(e,t,a){let i=-(0,w.intval)(e);cur.addMedia[Yt].pollBackgroundAdd([i,(0,w.clean)(t),(0,w.intval)(a.r),(0,w.intval)(a.g),(0,w.intval)(a.b)]),setTimeout((()=>{cur.addMedia[Yt].pollBackgroundSelect(i)}),0)},pollBackgroundUpload:function(){let e=cur.addMedia[Yt].pollInputData;(0,h.showBox)("al_page.php",{act:"owner_photo_box",oid:e&&e.poll_owner_id||(xt.mail?cur.gid?-cur.gid:vk.id:cur.oid||vk.id),lnk_id:Yt,is_voting:1},{stat:["owner_photo.css",window.jsc("web/owner_photo.js")]})},pollChanged:function(){xt.onMediaChange&&xt.onMediaChange()},pollBackgroundsGet:function(){let e=cur.addMedia[Yt].pollInputData,t=[];e&&e[Et]&&e[Et].forEach((e=>{let[a]=e;a>0&&t.push(e)}));let a=(0,p.ge)("create_poll_backgrounds"+Yt);return(0,p.geByClass)("radiobtn",a).forEach((function(e){let a=(0,w.intval)((0,p.domData)(e,"id"));a&&a<0&&t.push([a,(0,p.domData)(e,"photo-url"),(0,w.intval)((0,p.domData)(e,"photo-r")),(0,w.intval)((0,p.domData)(e,"photo-g")),(0,w.intval)((0,p.domData)(e,"photo-b"))])})),t},pollData:function(e,t){let a=cur.addMedia[Yt],i={};if(a&&(0,p.ge)("create_poll_question"+Yt)){let n=(0,p.ge)("create_poll_answers"+Yt),o=!1,s=0;for(let e=(0,p.domFC)(n);e;e=(0,p.domNS)(e)){let t=(0,w.trim)((0,p.val)((0,p.domFC)(e)));if(t){let a=-(0,w.intval)(((0,p.domFC)(e).id.match(/^create_poll_ans(\d+)$/)||[0,-s++])[1]);i[`${pt}[${a}]`]=t,o=!0}}if(!o)return(0,p.domFC)(n)||a.pollAnswerAdd(),!0!==e&&(0,u.notaBene)((0,p.domFC)((0,p.domFC)(n))),!1;let r=(0,w.trim)((0,p.val)("create_poll_question"+Yt));if(!r)return!0!==e&&(0,u.notaBene)("create_poll_question"+Yt),!1;i[ut]=r,i[bt]=a.pollUntilGet();let l=a.pollBackgroundGet();if(l<0?(i[ft]=-l,i[wt]=0):l>=0&&(i[ft]=0,i[wt]=l),i[_t]=(0,u.isChecked)("create_poll_anonymous"+Yt)?1:0,i[mt]=(0,u.isChecked)("create_poll_onmain"+Yt)?1:0,i[vt]=(0,u.isChecked)("create_poll_closed"+Yt)?1:0,i[kt]=(0,u.isChecked)("create_poll_multy"+Yt)?1:0,i[yt]=(0,u.isChecked)("create_poll_disable_unvote"+Yt)?1:0,a.pollInputData&&t){i[Et]=a.pollBackgroundsGet();let e=[Tt,Ct,gt,Mt];xt.mail&&e.push(ht),e.forEach((e=>{a.pollInputData[e]&&(i[e]=a.pollInputData[e])})),xt.mail&&(i[It]=0,i["answers[0]"]||i[ut]!=a.pollInputData[ut]?i[It]=1:[_t,mt,vt,kt,bt,ft,wt,yt].forEach((e=>{(0,w.intval)(i[e])!==(0,w.intval)(a.pollInputData[e])&&(i[It]=1)})),i[It]||a.pollInputData.answers.forEach((e=>{let[t,a]=e;void 0!==i[`answers[${-t}]`]&&i[`answers[${-t}]`]==a||(i[It]=1)})))}}else a&&(0,p.ge)("poll_dummy"+Yt)&&a.pollInputData&&a.pollInputData[gt]&&(i.poll_id=a.pollInputData[gt]);return i},pollChangeQuestion:function(e){const t=cur.addMedia[Yt].pollInputData,a=t[Pt]-e.value.length,i=(0,p.geByClass1)("medadd_poll_question_warning");i.innerHTML=a<=20?(0,_e.langNumeric)(a,t.lang.question_length):""},markAsAdsInit(){const e=this.markAsAdsGetCheckboxEl();e&&(0,p.attr)(e,"onclick",`cur.addMedia[${this.lnkId}].markAsAdsChanged();`)},markAsAdsGetCheckboxEl:()=>!!Lt&&Lt.querySelector(".Post__markAsAdsButton"),markAsAdsData(e){let t=!!e&&{},a=this.markAsAds||(0,u.isChecked)(this.markAsAdsGetCheckboxEl());return!a&&this.chosenMedias&&(a=this.chosenMedias.some((e=>{if((0,P.isArray)(e)){const[t]=e;if(t===ze)return!0}}))),(a||e)&&(t={mark_as_ads:a?1:0}),t},markAsAdsChanged(){const e=this.markAsAdsGetCheckboxEl();if(e&&!(0,p.hasClass)(e,"disabled")){(0,u.checkbox)(e),Wall&&Wall.togglePostMarkAsAds(e,e.dataset.muteId);const t=this.markAsAdsData(!0).mark_as_ads;Nt.copyrightToggle&&Nt.copyrightToggle(!t),Nt.donutUpdateVisibility(),xt.onMediaChange&&xt.onMediaChange()}},copyrightInit(){const e=this.copyrightGetBtnEl();e&&(0,p.attr)(e,"onclick",`cur.addMedia[${this.lnkId}].copyrightShowBox();`),this.markAsAdsData(!0).mark_as_ads&&this.copyrightToggle(!1)},copyrightToggle(e){const t=document.querySelector(`#post_copyright_btn${this.lnkId}`);(0,p.toggle)(t,e);const a=this.copyrightGetBtnEl();if(a){const t=a.querySelector(".Post__copyrightButtonIcon"),i=a.querySelector(".Post__copyrightButtonText");if(e){if(this.copyrightData(!0).copyright){const{icon:e}=(0,O.getIcon20WriteOutline)();t.innerHTML=e,i.innerHTML=(0,_e.getLang)("wall_post_copyright_edit_button")}else{const{icon:e}=(0,$.getIcon20Add)();t.innerHTML=e,i.innerHTML=(0,_e.getLang)("wall_post_copyright_add_button")}a.classList.remove("Post__copyrightButton--disabled")}else{a.classList.add("Post__copyrightButton--disabled");const{icon:e}=(0,$.getIcon20Add)();t.innerHTML=e,i.innerHTML=(0,_e.getLang)("wall_post_copyright_add_button")}}},copyrightGetBtnEl:()=>!!Lt&&Lt.querySelector("#post-copyright-button"),copyrightCreate(e){if(!(0,C.partConfigEnabled)("posting_hide_copyright_button_web")){if(this.copyrightInputData=e,Ot&&e&&e.copyright){const e=`post_copyright_btn${this.lnkId}`;let t=document.querySelector(`#${e}`);if(!t){const a=(0,_e.getLang)("wall_post_copyright_source_text"),{icon:i}=(0,N.getIcon12Dropdown)();t=(0,p.cf)(`<div class="post_action_btn on" id="${e}" onclick="cur.addMedia[${this.lnkId}].copyrightShowBox();">\n              <div class="post_action_btn_layout">\n                <span class="post_action_btn_text" role="button" aria-label="${(0,P.replaceEntities)(a)}">${a}</span>\n                <span class="post_action_image_btn" role="button">${i}</span>\n              </div>\n             </div>`),Ot.appendChild(t)}}this.copyrightChanged()}},copyrightRemove(){let e=document.querySelector(`#post_copyright_btn${this.lnkId}`);e&&e.parentNode.removeChild(e),this.copyrightInputData&&(this.copyrightInputData.copyright=""),this.copyrightChanged()},copyrightUnchoose(){this.chosenMedias&&this.chosenMedias.forEach(((e,t)=>{(0,P.isArray)(e)&&e[0]===tt&&this.unchooseMedia(t)})),this.multi||this.copyrightRemove()},copyrightBoxAccept(e){const t=e.btns.ok[0],a=document.querySelector(".PostCopyrightBox__input"),i=document.querySelector(".PostCopyrightBox__error");if((0,p.hide)(i),(0,u.isButtonLocked)(t))return;const n=(0,p.val)(a);if(!n)return(0,u.notaBene)(a);ajax.post("al_wall.php",{act:"copyright_check_link",link:n},{onDone:()=>{this.copyrightInputData||(this.copyrightInputData={}),this.copyrightInputData.copyright=n,this.chooseMedia(tt,"",this.copyrightInputData),e.hide()},onFail:e=>((0,p.val)(i,e),(0,p.show)(i),!0),showProgress:()=>(0,u.lockButton)(t),hideProgress:()=>(0,u.unlockButton)(t)})},copyrightBoxDecline(e,t){t&&this.copyrightUnchoose(),e.hide()},copyrightShowBox(){(0,h.showBox)("al_wall.php",{act:"copyright_box"},{cache:!0,onDone:e=>{cur.postCopyrightFeatureTT&&cur.postCopyrightFeatureTT.hide();const t=this.copyrightData(!0);e.removeButtons(),t.copyright?(e.setOptions({width:400,title:(0,_e.getLang)("wall_post_copyright_mb_title_text_edit")}),e.setButtons((0,_e.getLang)("wall_post_copyright_edit_button"),(()=>this.copyrightBoxAccept(e)),(0,_e.getLang)("global_cancel"),(()=>this.copyrightBoxDecline(e))),e.setControlsText(`<a onclick="cur.addMedia[${this.lnkId}].copyrightBoxDecline(curBox(), true);">${(0,_e.getLang)("global_delete")}</a>`)):(e.setOptions({width:400,title:(0,_e.getLang)("wall_post_copyright_mb_title_text")}),e.setButtons((0,_e.getLang)("wall_post_copyright_add_button"),(()=>this.copyrightBoxAccept(e)),(0,_e.getLang)("global_cancel"),(()=>this.copyrightBoxDecline(e))),e.setControlsText("")),e.show();const a=document.querySelector(".PostCopyrightBox__input");(0,p.val)(a,t.copyright?(0,w.unclean)(t.copyright):""),(0,_.addEvent)(a,"keypress",(t=>(0,v.onEnter)((()=>{this.copyrightBoxAccept(e)}),t))),a.focus()}})},copyrightChanged(){const e=this.markAsAdsData(!0).mark_as_ads;this.copyrightToggle(!e),xt.onMediaChange&&xt.onMediaChange()},copyrightData(e){let t=!!e&&{};return(this.copyrightInputData&&this.copyrightInputData.copyright||e)&&(t={copyright:this.copyrightInputData&&this.copyrightInputData.copyright||""}),t},urlsCancelled:[],shareData:{},checkMessageURLs:function(e,t,a){if(cur.noCheckMessageURLs||Nt.chosenMedia||Nt.urlAttachmentLoading&&Nt.urlAttachmentLoading[0]>(0,P.vkNow)()-1e4||Nt.attachCount()>=Vt)return;if(cur.checkMessageHandler&&(0,P.isFunction)(cur.checkMessageHandler)&&cur.checkMessageHandler(e),cur.reply_to&&cur.reply_to[0]){var n=Wall.getReplyName(cur.reply_to[0]);if(n=n&&(0,P.isArray)(n)&&n[1]?n[1]:""){var o=(0,w.extractUrls)(n,t);for(var s in o)if(o.hasOwnProperty(s)){var r=o[s].url;r.match(/^https?:\/\//)||(r="http://"+r),(0,w.inArray)(r,Nt.urlsCancelled)||Nt.urlsCancelled.push(r)}}}const l=(0,w.extractUrls)(e,t).map((function(e){let t=e.url;const a=e.query,n=e.domain;let o=t,s={};t.match(/^https?:\/\//)||(t="http://"+t);let r=(0,w.inArray)(t,Nt.urlsCancelled)||(0,w.inArray)(o,Nt.urlsCancelled),l=!0,d=!1;r||n.match(new RegExp(String.raw`(^|\.|\/\/)${i.VK_HOST_REGEX_UNSAFE.source}`,"i"))&&(l=!!a.match(/(#photo|^\/(photo|video|album|page|audio|doc|mask|poll|podcast)|z=(album|photo|video|audio_playlist|podcast)|w=(page|product|poll))(-?\d+_)?\d+|app\d+(?:_-\d+)?|\.(jpg|png|gif)$|artist\/([^\/]+).*$|market-?\d+\?section=album_\d+|^\/stickers\/.+$|\?w\=story(\d+)_(\d+)$|stor(y|ies)(\d+)_(\d+)$|^(\/dev)?\/(blog|press|education)\/.+$|^\/jobs\?w=job\d+$|^\/landings\/.+$|^\/fellowship$|^\/talents$|^\/play_safe_at_home$|^\/services$|^\/vk_apps_contest$|^\/home(\/.+)?$|^\/2020(\/.+)?$|^\/2021(\/.+)?$|^\/notify(\/.+)?$|^\/ahmatova(\/.+)?$|^\/backendoffer(\/.+)?$|^\/frontendoffer(\/.+)?$|^\/cppoffer(\/.+)?$|^\/video-calls(\/.+)?$|^\/calls-sdk(\/.+)?$|^\/monetization(\/.+)?$|^\/grants(\/.+)?$|^\/ecosystem(\/.+)?$|^\/video-event(\/.+)?$|^\/mini-apps(\/.+)?$|^\/durer_hermitagemuseum(\/.+)?$|^\/messengerforbusiness(\/.+)?$|^\/mestovstrechi(\/.+)?$|^\/mestovstrechiny(\/.+)?$|^\/content_makers(\/.+)?$|^\/vkstreamers(\/.+)?$|^\/qaoffer(\/.+)?$|^\/video_faq(\/.+)?$|^\/business-subscription(\/.+)?$|^\/mloffer(\/.+)?$|^\/donuts(\/.+)?$|^\/iosoffer(\/.+)?$|^\/vkgameplatform(\/.+)?$|^\/new(\/.+)?$|^\/javaoffer(\/.+)?$|^\/vksainthighload2022(\/.+)?$|^\/17birthday(\/.+)?$|^\/fandomtickets(\/.+)?$|^\/w24(\/.+)?$|^\/safespace(\/.+)?$|^\/governmentedu(\/.+)?$|^\/2022(\/.+)?$|^\/2023(\/.+)?$|^\/2024(\/.+)?$|^\/vknewyear2025(\/.+)?$|^\/mywish2025(\/.+)?$|^\/like2022(\/.+)?$|^\/gamejam(\/.+)?$|^\/chatbots(\/.+)?$|^\/open(\/.+)?$|^\/vk_authors(\/.+)?$|^\/original-authors(\/.+)?$|^\/vkfest2023(\/.+)?$|^\/datingapp(\/.+)?$|^\/art_protect(\/.+)?$|^\/technologies(\/.+)?$|^\/watch(\/.+)?$|^\/mobile$|^\/miniapps_2019$|^\/data_protection(\?section=(rules|requests|principles|copyright))?$|^\/safety(\?section=(gov|social|parents|youth|tips|health|standards|money|misinformation))?$|^\/ads(\/([a-zA-Z0-9\_]+))?$|^http:\/\/instagram\.com\/p\/.+/),(0,we.isValidVmojiAvatarUrlPath)(a)&&(l=!0),a.match(At)&&(l=!0),a.match(/narrative(-?\d+_\d+(?:_\d+)?)$/)&&(l=!0),a.match(/^\/business(\/.+)?$/)&&(l=!0),a.match(/^\/about\/business(\/.+)?$/)&&(l=!0),a.match(/^\/(s|r)\/.+$/)&&(l=!0),a.match(/^(\/@[._a-zA-Z0-9-]+)([\?|\&]rev=[_a-z0-9]+|[\?|\&]anchor=[-a-zа-я0-9]+)*$/)&&(s=nav.fromStr(t),delete s[0],l=!0),!l&&a.match(/music\/(album|playlist)\/(-?\d+_\d+)(_[a-z0-9]+)?/)&&(l=!0,d=!1),!l&&a.match(/[a-zA-Z0-9_\.-]{2,32}/)&&(l=!0,d=!0),a.match(/market\/product\/([-a-z\d]*)?(-\d+)-(-?\d+)/)&&(l=!0));return e.url=t,e.canceled=r,e.valid=l,e.initialUrl=o,e.params=s,e.needsCheckDomain=d,e})).filter((function(e){return!e.canceled&&e.valid})).sort((function(e,t){return e.needsCheckDomain-t.needsCheckDomain}));if(l.length){const e=l[0];e.needsCheckDomain?Nt.checkURLDomain(e.query,e.initialUrl,a):Nt.checkURL(e.initialUrl,a,e.params)}},checkURLDomain:function(e,t,a){cur.checkURLDomainTO&&clearTimeout(cur.checkURLDomainTO),cur.checkURLDomainTO=setTimeout(function(e,t,a){cur.checkURLDomainRequest=ajax.post("share.php",{act:"id_by_link",url:e,to_mail:xt.mail},{onDone:function(e,i){(e||i)&&Nt.checkURL(t,a)},onFail:function(){return!0}})}.pbind(e,t,a),100)},clearCheckURL:function(){clearTimeout(cur.checkURLTO),(0,p.re)(Nt.urlAttachmentLoading[2]),zt?(0,p.toggle)(ta,ta.childNodes>0):(0,p.toggleClass)(t,"med_no_attach",!t.childNodes),Nt.urlAttachmentLoading=!1,(0,p.setStyle)(document.body,{cursor:"default"})},onCheckURLDone:function(e,t,a){var i="";t=t||{},Nt.urlAttachmentLoading&&(i=Nt.urlAttachmentLoading[1],Nt.clearCheckURL()),e?Nt.chooseMedia(a[0],a[1],(0,w.extend)({},a[2],t),i,!0):((xt.onCheckURLDone||function(){})(e,a),(t.onError||function(){})(a))},cancelCheckUrl:function(){(0,p.re)(Nt.checkURLForm)},_getShareTimeHash:function(){var e=cur.share_timehash||((cur.options||{}).share||{}).timehash||"";let t=Math.floor(Date.now()/1e3);var a=-1;return e&&(a=parseInt(e.split("_",1)[0])+36e3),a-t<60?(0,m.post)("share.php?act=renew_url_attachment_hash",{act:"renew_url_attachment_hash",hash:e}).then((function(e){const t=e[0];return cur.share_timehash=t,t})):Promise.resolve(e)},checkURL:function(e,t,i={},n={}){(0,C.partConfigEnabled)("feed_remove_parsing_links_in_comments")&&!cur.isAdsPage||(e?this._getShareTimeHash().then((function(o){Nt.urlsCancelled.push(e),Nt.urlAttachmentLoading=[(0,P.vkNow)(),e],(0,p.re)(Nt.checkURLForm),Nt.checkURLForm=(0,p.ce)("div",{innerHTML:'<iframe name="share_parse_iframe'+Yt+'"></iframe>'}),utilsNode.appendChild(Nt.checkURLForm);var s=Nt.checkURLForm.appendChild((0,p.ce)("form",{action:(0,Ie.isAtBookmakerHost)()?(0,Ie.getAbsoluteUrl)("/share.php?act=url_attachment"):"/share.php?act=url_attachment",method:"post",target:"share_parse_iframe"+Yt}));(0,w.each)((0,w.extend)({hash:o,allowed_share_buttons:((cur.options||{}).share||{}).allowed_buttons||"",index:Yt,url:e,to_mail:xt.mail?1:"",from:xt.from,module:cur.module},i),(function(e,t){s.appendChild((0,p.ce)("input",{type:"hidden",name:e,value:t}))})),(0,p.setStyle)(document.body,{cursor:"wait"}),a._dG("onUploadDone",Nt.onCheckURLDone.pbind(!0,n)),a._dG("onUploadFail",Nt.onCheckURLDone.pbind(!1,n)),t&&(cur.checkURLTO=setTimeout((function(){Nt.urlAttachmentLoading.length>0&&Nt.clearCheckURL()}),t)),s.submit()})):(n.onError||function(){})())},addPreview:function(e,t){let a=t?" medadd_c_link_hidden":"";return Nt.sharePreview=Xt.appendChild((0,p.ce)("div",{className:"medadd_c medadd_c_link"+a,innerHTML:'<div class="medadd_c_linkcon"><div></div>'+(e?'<div class="medadd_c_linkprg">'+(0,s.getProgressHtml)("","medadd_c_linkprg_inner")+"</div>":"")+"</div>"}))},shareImgUrl:function(e){var t=Nt.shareData;if((0,P.isArray)(t.preview_images)&&t.preview_images[e])return t.preview_images[e];if(t.images_proxy&&t.images_proxy[e])return t.images_proxy_url+t.images_proxy[e];if(t.images){var a=t.images[e];return(0,P.isArray)(a)&&(a=a[0]?a[0]:""),a}return""},initSnippetVideoFunctions:function(){cur.selectSnippetVideo=function(){var e={to_id:xt.toId||cur.postTo,act:"a_choose_video_box",snippet_video:1,from:this.getFrom()};(0,h.showBox)("al_video.php",e,{cache:1})},cur.chooseSnippetVideo=function(e,t){var a=Nt.shareData,i=e.split("_");a.video_owner_id=i[0],a.video_id=i[1],a.video_full_id=e,a.video=t;var n=!1;for(let e of Object.keys(t.editable.sizes))(n&&t.editable.sizes[e][1]>t.editable.sizes[n][1]||!n)&&(n=e);if(n){var o=t.editable.sizes[n];a.images[a.images.length-1]=[o[0],i[0],i[1],"video",t.editable.duration],cur.shareShowNext(0,1)}Nt.showVideoSnippetPreview()}},showPreview:function(e){var a,i,n=Nt.shareData,o=Nt.sharePreview||Nt.addPreview(),d=(0,p.domFC)(o);const c=n.is_vk_mini_app,u=n.is_vk_mini_app&&n.is_game,h=window.wkcur&&window.wkcur.shown&&window.wkLayerWrap&&(0,p.isVisible)(window.wkLayerWrap)||window.Videoview?.isLayerShown()||cur.pvLayerCreated,g="ads"===cur.module||n.ads_post,m="im"===cur.module,v=n.is_sticker_pack,f=n.is_vmoji_avatar;n.is_product?(0,p.addClass)(d,"medadd_c_link_product"):(0,p.removeClass)(d,"medadd_c_link_product"),(0,p.toggleClass)(d,"medadd_c_link_special",!(!n.prometheus&&!n.verification)),"comment"!==xt.from||c||(n.images=[]),n.prometheus||n.verification||!n.images||(a=n.images[cur.shareShowImg],i=!(!Nt.bigLink&&!n.big_link||n.force_small_link));var b=!(!cur.options.share||!cur.options.share.allow_snippet_video)||g,k=n.video&&b,y="",T={};if(n.failed)y=(0,_e.getLang)("page_not_loaded");else if(n.prometheus)y="im"===cur.module?'<a target="_blank" href="'+n.url+'">'+n.title+"</a>":(0,w.getTemplate)("prometheus_snippet",{author_img:n.prometheus_author_image_url}),e=!0;else if(n.verification)y="im"===cur.module?'<a target="_blank" href="'+n.url+'">'+n.title+"</a>":(0,w.getTemplate)("verification_snippet",{author_img:n.verification_author_image_url}),e=!0;else if(n.template){const{template:e}=n;e&&(y=(0,w.getTemplate)(e,n))}else{var C="",I=(0,w.clean)(Nt.shareImgUrl(cur.shareShowImg));if(b&&Nt.initSnippetVideoFunctions(),!I&&c&&n.images&&n.images[cur.shareShowImg]&&(I=n.images[cur.shareShowImg]),c&&h&&2!==n.images.length&&([,I]=n.images),c&&n.edit_video&&(I=n.edit_video.thumb),n.images&&n.images[cur.shareShowImg]&&I){var E=n.images[cur.shareShowImg];if(n.images.length>0){var M=!(!cur.options.share||!cur.options.share.allow_custom_photo||n.disable_edit||vk.widget),A=M&&!(cur.options.share&&cur.options.share.require_image)&&!c,S="onmouseover=\"showTooltip(this, {text: '"+(0,_e.getLang)("global_link_choose_own_photo")+"', black: 1, shift: [7, 11, 8], appendParentCls: 'post'})\"",D="onmouseover=\"showTooltip(this, {text: '"+(0,_e.getLang)("global_link_choose_own_video")+"', black: 1, shift: [7, 11, 8], appendParentCls: 'post'})\"",x="onmouseover=\"showTooltip(this, {text: '"+(0,_e.getLang)("global_link_remove_photo")+"', black: 1, shift: [7, 11, 8], appendParentCls: 'post'})\"",L=(0,P.isArray)(E)&&1==E.length,$=L&&!b,N=L&&b,V=n.media&&"_"!=n.media&&M?'<div class="medadd_c_linkimg_controls">  <div class="medadd_c_linkimg_controls_btn_group clear_fix fl_l">'+(n.images.length>1?'    <div class="medadd_c_linkimg_controls_btn_arrows_group">      <div class="medadd_c_linkimg_controls_btn" id="medadd_ctrl_left" onclick="cur.shareShowNext(true);"></div>      <div class="medadd_c_linkimg_controls_btn" id="medadd_ctrl_right" onclick="cur.shareShowNext();"></div>    </div>':"")+'<div class="medadd_c_linkimg_controls_btn '+(n.images.length>1?"medadd_c_btn_side_padd":"")+'" id="medadd_ctrl_upload" '+S+" onclick=\"Page.ownerPhoto('"+n.media+"');\"></div>"+(b?'<div class="medadd_c_linkimg_controls_btn '+(n.images.length>1?"medadd_c_btn_side_padd":"")+'" id="medadd_ctrl_upload_video" '+D+' onclick="cur.selectSnippetVideo();"></div>':"")+"  </div>"+(A?'  <div class="medadd_c_linkimg_controls_btn_group clear_fix fl_r">    <div class="medadd_c_linkimg_controls_btn" id="medadd_ctrl_remove" '+x+' onclick="window.tooltips && window.tooltips.hide(this); cur.removeLinkImage(this)"></div>  </div>':"")+"</div>":"",z=(a?"":"display: none")+";background-image:url("+I+")";n.image_ratio>0&&(z+=";height: 0px; padding-top: "+100*n.image_ratio+"%;min-height: 0px;");var F="video"===E[3]||n.edit_video;let e="";c&&F&&(e+=" MiniAppsCoverWrapper--video");const t=E[4]||n.edit_video?.duration;C='<div class="medadd_c_linkimg_container '+(Xt&&Xt.offsetWidth>550?"medadd_c_linkimg_container_wide":"")+e+'" style="'+z+'">'+C+(F?'<div class="medadd_c_linkimg_container_video_overlay"></div>':"")+(F?'<div class="video_thumb_label"><span class="video_thumb_label_item"></span><span class="video_thumb_label_item">'+t+"</span></div>":"")+($?'<div class="medadd_c_linkimg_button"><button class="flat_button secondary" onclick="Page.ownerPhoto(\''+n.media+"');\">"+(0,_e.getLang)("global_link_choose_own_photo")+"</button></div>":"")+(N?'<div class="medadd_c_linkimg_button"><div class="medadd_c_linkimg_button_half_container"><button class="flat_button secondary" onclick="Page.ownerPhoto(\''+n.media+"');\">"+(0,_e.getLang)("global_link_choose_own_photo")+'</button></div><div class="medadd_c_linkimg_button_half_container"><button class="flat_button secondary medadd_c_linkimg_video_button" onclick="cur.selectSnippetVideo();">'+(0,_e.getLang)("global_link_choose_own_video")+"</button></div></div>":"")+V+'<div id="medadd_c_linkimg_loader" class="medadd_c_linkimg_loader">'+(0,s.getProgressHtml)("","inv medadd_c_linkimg_loader_inner")+"</div></div>"}}var H="";n.microdata&&n.microdata_preview_html&&(H=n.microdata_preview_html),T={title:{placeholder:'<span class="medadd_inline_placeholder">'+(0,_e.getLang)("global_link_edit_title")+"</span>",editable:cur.options.share&&cur.options.share.allow_edit_title&&!n.disable_edit&&!vk.widget},description:{placeholder:'<span class="medadd_inline_placeholder">'+(0,_e.getLang)("global_link_edit_desc")+"</span>",editable:cur.options.share&&cur.options.share.allow_edit_desc&&!n.disable_edit&&!vk.widget},url:{placeholder:'<span class="medadd_inline_placeholder">'+(0,_e.getLang)("global_link_edit_url")+"</span>",editable:cur.options.share&&cur.options.share.allow_edit_url&&!n.disable_edit&&!vk.widget}};var G=n.shareButtons,j=G&&G.length&&G[0],Y=n.button_text||j&&j[1],q=n.button_text_lang||j&&j[2],W=n.button_action||j&&j[0];if(G&&G.length&&q===Y)for(var Z=0;Z<G.length;++Z)if(G[Z][0]===W&&G[Z][2]===Y){Y=G[Z][1];break}var K=!1;G&&G.length&&(K=G.length>1||q===Y||j[0]!==W||j[1]!==Y),u&&(K=!1);var X=!!G&&G.length,Q=cur.options.share&&cur.options.share.allow_remove_button&&!k;c&&!g&&(Q=!1);const e=(0,w.clean)(n.title).replace(/\n/g,"<br>"),t=n.meta,o=t&&t.favicon_link||"",r=n.domain;let l="";c&&g&&(l+=" MiniAppsSnippetWrap--ads"),c&&F&&((0,p.addClass)(d,"MiniAppsSnippetCover--video"),l+=" MiniAppsSnippetWrap--video"),c&&2===n.images.length&&(l+=" MiniAppsSnippetWrap--small"),c&&window.stManager.add(["MiniAppsSnippet.css"]);let _="";if(c){const{icon:e}=(0,R.getIcon16Services)();_=e}if(u){const{icon:e}=(0,B.getIcon16Game)();_=e}if(y=C+'<div class="medadd_c_linkwrap '+(C?"":"no_photo")+l+'"><div class="medadd_c_linkwrap_block">'+(e||T.title.editable?'<div class="medadd_c_linkhead '+(T.title.editable?"medadd_inline_editable":"")+'">'+(T.title.editable?`<div class="medadd_inline_editable_icon">${(0,O.getIcon20WriteOutline)().icon}</div>`:"")+`<span class="medadd_inline_edit_target" data-max-length="${cur.options.share&&cur.options.share.max_title_len?cur.options.share.max_title_len:0}" data-field="title">\n                ${n.title.replace(/\n/g,"<br>")||T.title.placeholder}\n              </span></div>`:"")+(t?'<div class="medadd_c_product_details_info">'+(t["vk:seller_name"]?`<span class="medadd_c_product_details_info_name">${t["vk:seller_name"]}</span>`:"")+(t["vk:seller_rating"]?`<span class="medadd_c_product_details_info_rating">\n                            <span class="medadd_c_product_details_info_rating_icon">\n                                <span class="medadd_c_product_details_info_rating_total">${(0,U.getIcon16Favorite)().icon}</span>\n                                <span\n                                  class="medadd_c_product_details_info_rating_value"\n                                  style="width: ${t["vk:seller_rating"]/.05}%"\n                                >${(0,U.getIcon16Favorite)().icon}</span>\n                            </span>\n                            ${t["vk:seller_rating"]}\n                       </span>`:"")+(t["vk:seller_review_count"]&&Number(t["vk:seller_review_count"])?(0,_e.getLang)("marketitemreview_main_block_review_text",Number(t["vk:seller_review_count"])):"")+"</div>":"")+(H?'<div class="medadd_c_linkmicrodata">'+H+"</div>":"")+(r||T.url.editable?`<div class="page_media_link_url medadd_c_linkaddr ${T.url.editable?"medadd_inline_editable":""}">\n                ${T.url.editable?`<div class="medadd_inline_editable_icon">${(0,O.getIcon20WriteOutline)().icon}</div>`:""}\n                 ${o?`<img alt="icon" src="${o}" class="medadd_media_link_url_icon">`:""}\n                <span class="medadd_inline_edit_target" data-max-length="2000" data-field="url" data-display-field="domain">\n                ${n.domain||"Url..."}\n                </span>\n                </div>`:"")+"</div>"+(q&&X?'<div class="medadd_c_linkwrap_block medadd_c_linkwrap_block_button">'+(Q?'<div class="hide_icon medadd_c_linkbtn_remove" onclick="cur.shareRemoveButton();" onmouseover="showTooltip(this, {text: \''+(0,_e.getLang)("global_share_button_remove_tooltip")+"', black: 1, shift: [15, 10, 0]})\"></div>":"")+'<div class="wall_postlink_preview_btn medadd_c_linkbtn"><a onclick="cur.toggleShareButton(this);return false;" onmouseout="Page.actionsDropdownHide(domNS(this), 0, cur.setActiveShareButton.pbind(false))" onmouseover="Page.actionsDropdownUnhide()" class="flat_button">'+_+'<span onmouseover="Page.actionsDropdownUnhide()" class="'+(K?"page_actions_dd_label":"")+' wall_postlink_preview_btn_label" data-field="button_text">'+q+"</span></a></div></div>":"")+'</div><div class="clear_fix"></div>',c&&m){y=C;const t=`<h5 class="MiniAppsSnippetBottomFields__title">${e}</h5>`,a=`<h6 class="MiniAppsSnippetBottomFields__description">${r}</h6>`,n=`<h6 class="MiniAppsSnippetBottomFields__type_description">${u?(0,_e.getLang)("apps_snippet_game"):(0,_e.getLang)("apps_snippet_mini_app")}</h6>`,o=ce.FlatButton.render({size:ce.FlatButtonSize.S,appearance:ce.FlatButtonAppearance.PRIMARY,className:"MiniAppsSnippetBottomButton",children:q,before:_}).outerHTML;y+=i?`\n            <div class="MiniAppsSnippetBottom">\n              <div class="MiniAppsSnippetBottomFields">\n                ${t}\n                ${a}\n                ${n}\n              </div>\n              ${o}\n            </div>\n          `:`\n              <div class="MiniAppsSnippetFields">\n                 ${t}\n                 ${a}\n                 ${n}\n                 ${o}\n              </div>\n            `}}if(i?(0,p.addClass)(d,"medadd_c_linkimg_big"):(0,p.removeClass)(d,"medadd_c_linkimg_big"),v?(0,p.addClass)(d,"medadd_c_linkcon--stickerPack"):(0,p.removeClass)(d,"medadd_c_linkcon--stickerPack"),f?((0,p.addClass)(d,"medadd_c_linkcon--vmojiAvatar"),n.image_background_color&&d.style.setProperty("--image-background-color",n.image_background_color)):((0,p.removeClass)(d,"medadd_c_linkcon--vmojiAvatar"),d.style.removeProperty("--image-background-color")),e)cur.preventShareAnim&&(cur.preventShareAnim.stop(),clearInterval(cur.animateUpdateInterval),xt.onChangedSize&&xt.onChangedSize()),(0,p.val)(d,y),d.style.height="auto",(0,r.shortCurrency)();else{(0,p.show)(Xt);let e="";c&&F&&(e+=" MiniAppsSnippet--video");var J=t.appendChild((0,p.ce)("div",{innerHTML:'<div class="medadd_c_linkcon '+(i?"medadd_c_linkimg_big":"")+e+'">'+y+"</div>"},{position:"absolute",width:(0,p.getSize)(o)[0]-10,visibility:"hidden"})),ee=(0,p.getSize)(J)[1];(0,p.re)(J),(0,p.setStyle)(d,{height:"0"}),(0,p.setStyle)(o,{overflow:"hidden"}),(0,p.val)(d,y),(0,r.shortCurrency)(),cur.animateUpdateInterval=setInterval((function(){xt.onChangedSize&&xt.onChangedSize()}),100),cur.preventShareAnim=(0,l.animate)(d,{height:ee},200,(function(){(0,p.setStyle)(d,{height:"auto",display:""}),(0,p.setStyle)(o,{overflow:""}),clearInterval(cur.animateUpdateInterval),xt.onChangedSize&&xt.onChangedSize()})),(0,p.re)((0,p.geByClass1)("medadd_c_linkprg",Xt))}function te(e){const t=new RegExp(/^([\w-]*:\/\/)|(tel:).*$/),a=new RegExp(/^(?:tel:)?\+?[0-9()-]+$/),i=new RegExp(/^(([a-zа-я0-9]|[a-zа-я0-9][a-zа-я0-9\-]*[a-zа-я0-9])\.)*([a-zа-я0-9]|[a-zа-я0-9][a-zа-я0-9\-]*[a-zа-я0-9])$/i),n=new RegExp(/^([\w-]*:\/\/)?([a-zа-я0-9\-]+(?:[\-\.]{1}[a-zа-я0-9\-]+)*\.[a-zа-я0-9\-]{2,22})(:[0-9]{1,5})?([\/\?\#].*)?$/i);if(!e||e.inlineEdit)return!1;const o=(0,p.getSize)(e),s=(0,p.gpeByClass)("medadd_inline_editable",e);e.inlineEdit=!0,(0,p.addClass)(s,"medadd_inline_editing"),(0,p.removeClass)(s,"medadd_inline_invalid");const r=(0,p.ce)("textarea",{className:"medadd_inline_edit"},{width:o[0],height:o[1]}),d=parseInt(e.getAttribute("data-max-length"));d&&r.setAttribute("maxlength",d);const c=e.getAttribute("data-field"),u=e.getAttribute("data-display-field");(0,p.val)(r,(0,w.unclean)(Nt.shareData[c])),(0,p.val)(e,""),e.appendChild(r);const h=(0,p.ce)("span",{className:"medadd_inline_edit_target"},{opacity:0,zIndex:-1,width:o[0],height:"auto",wordWrap:"break-all",position:"absolute"});s.appendChild(h);let g=o[1];if((0,p.elfocus)(r),"url"===c){const e=Nt.shareData[c];a.test(e)&&(0,p.val)(r,(0,w.unclean)(e.replace("tel:",""))),r.onkeydown=function(e){32!==e.which&&32!==e.keyCode||e.preventDefault(),13!==e.which&&13!==e.keyCode||(e.preventDefault(),r.blur())},r.oninput=function(){const e=this;cur.editingPostUrlCleanTimeout&&clearTimeout(cur.editingPostUrlCleanTimeout),cur.editingPostUrlCleanTimeout=setTimeout((function(){e.value=e.value.replace(/[\n ]/g,"")}))}}r.onblur=function(){if(r.oninput=null,(0,p.removeClass)(s,"medadd_inline_editing"),(0,p.re)(h),clearTimeout(cur.editingPostUrlCleanTimeout),Nt.shareData[c]=(0,p.val)(r),"url"===c&&Nt.shareData[c])try{let o=Nt.shareData[c];if(a.test(o.replace(/[\h\s(\)-]/g,"")))o=o.replace(/[\h\s\(\)-]|(tel:)/g,""),Nt.shareData.domain="...",Nt.shareData[c]="tel:"+o,e.inlineEdit=!1,ajax.post("share.php",{act:"check_phone",url:Nt.shareData[c]},{onDone:function(t){let a;t&&t.formattedPhone?(Nt.shareData.domain=(0,w.clean)(t.formattedPhone),a=Nt.shareData.domain):((0,p.addClass)(s,"medadd_inline_invalid"),Nt.shareData.domain=(0,_e.getLang)("global_link_invalid_url"),a=Nt.shareData.domain),(0,p.val)(e,(0,w.clean)(a).replace(/\n/g,"<br>")||T[c].placeholder)},onFail:function(){(0,p.addClass)(s,"medadd_inline_invalid"),Nt.shareData.domain=(0,_e.getLang)("global_link_invalid_url")}});else{t.test(o)||(o="https://"+o);let e=new URL(o);if(!e.host||!i.test(e.host)||!n.test(o))throw new Error("Invalid url");if(a.test((0,w.unclean)(Nt.shareData.domain).replace(/[\h\s\(\)-]/g,""))||i.test(Nt.shareData.domain)||Nt.shareData.domain===(0,_e.getLang)("global_link_invalid_url")||Nt.shareData.domain===(0,_e.getLang)("global_link_edit_url")){const e=o.match(n);Nt.shareData[c]=o.replace(n,"$1"+e[2].toLowerCase()+"$3$4"),Nt.shareData.domain=e[2].toLowerCase()}}}catch(e){(0,p.addClass)(s,"medadd_inline_invalid"),Nt.shareData.domain=(0,_e.getLang)("global_link_invalid_url")}let o;"url"!==c||Nt.shareData[c]||(Nt.shareData.domain=(0,_e.getLang)("global_link_edit_url")),o=u&&Nt.shareData[u]?Nt.shareData[u]:(0,p.val)(r),(0,p.val)(e,(0,w.clean)(o).replace(/\n/g,"<br>")||T[c].placeholder),e.inlineEdit=!1};var m=function(){var e=(0,w.clean)((0,p.val)(r)+" M").replace(/\n/g,"<br>");(0,p.val)(h,e);var t=(0,p.getSize)(h);g!=t[1]&&(g=t[1],(0,l.animate)(r,{height:t[1]},200))};(0,_.addEvent)(r,"click keyup change",m),setTimeout(m,0)}if(T.title&&T.title.editable){var ae=(0,p.geByClass1)("medadd_c_linkhead",d),ie=(0,p.geByClass1)("medadd_inline_edit_target",ae);ae&&ie&&(ae.onclick=te.bind(this,ie))}if(T.description&&T.description.editable){var ne=(0,p.geByClass1)("medadd_inline_edit_target",(0,p.geByClass1)("medadd_c_linkdsc",d));ne&&(ne.onclick=te.bind(this,ne))}if(T.url&&T.url.editable){const e=(0,p.geByClass1)("medadd_c_linkaddr",d),t=(0,p.geByClass1)("medadd_inline_edit_target",e);e&&t&&(e.onclick=te.bind(this,t)),xt.linkTooltip&&!cur.linkTooltip&&e&&(cur.linkTooltip=new ElementTooltip(xt.linkTooltip.el(e),xt.linkTooltip.opts),xt.linkTooltip.timeout?setTimeout((()=>cur.linkTooltip.show()),xt.linkTooltip.timeout):cur.linkTooltip.show())}if(X&&(Nt.shareData.button_text=Y,Nt.shareData.button_text_lang=q,Nt.shareData.button_action=W,K)){var oe=(0,p.domPN)((0,p.geByClass1)("wall_postlink_preview_btn_label",d)),se=[],re=0,le=0,de=[];for(var Z in G)if(G.hasOwnProperty(Z)){var pe=G[Z];pe[0]==W&&pe[1]==Y&&(re=le),se.push([le++,pe[1]]),de.push('<a class="page_actions_item" tabindex="0" role="link" onclick="cur.updateShareButton(this);Page.actionsDropdownHide(domPN(domPN(this)), 1, cur.setActiveShareButton.pbind(false));return false;" data-button-text="'+pe[1]+'" data-button-text-lang="'+pe[2]+'" data-button-action="'+pe[0]+'">'+pe[2]+"</a>")}oe.setAttribute("data-items",JSON.stringify(se)),oe.setAttribute("data-value",re);var ue=['<div class="page_actions_wrap medadd_c_linkbtn_actions_wrap unshown" onmouseout="Page.actionsDropdownHide(this, 0, cur.setActiveShareButton.pbind(false))" onmouseover="Page.actionsDropdownUnhide()" onmouseup="setTimeout(function() { Page.actionsDropdownUnhide(); }, 5)">','<div class="page_actions_inner">',de.join(""),"</div>","</div>"].join("");(0,p.domPN)(oe).appendChild((0,p.se)(ue)),ls.get("share_button_text_tooltip_shown")||cur.buttonTextTooltip||setTimeout((function(){cur.closeButtonTextTooltip=function(){cur.buttonTextTooltip.hide(),ls.set("share_button_text_tooltip_shown",1)};var e=(0,p.geByClass1)("wall_postlink_preview_btn_label",d),t=(0,p.domCA)(e,".box_layout");cur.buttonTextTooltip=new ElementTooltip(e,{autoShow:!1,appendTo:t||document.body,content:'<div class="feature_intro_tt_hide" onclick="cur.closeButtonTextTooltip();"></div>'+(0,_e.getLang)("global_share_button_text_tooltip"),forceSide:"left",cls:"feature_intro_tt feature_intro_blue_tt",offset:[-10,0,0],onHide:function(){cur.buttonTextTooltip.destroy()}}),cur.buttonTextTooltip.show(),(0,_.addEvent)(e,"mouseover",(function(){cur.buttonTextTooltip&&cur.buttonTextTooltip.hide()}))}),rt)}},showVideoSnippetPreview:function(){if(!(!cur.options.share||!cur.options.share.allow_snippet_video)){var e=Nt.shareData,t=e.video,a=e.video_owner_id,i=e.video_id;t&&(0,P.isObject)(t)&&a&&i&&t.editable&&(Nt.initSnippetButtonFunctions(),Nt.showPreview())}},initSnippetButtonFunctions:function(){cur.shareRemoveButton=function(){var t=Nt.sharePreview;window.tooltips&&tooltips.destroyAll(t),(0,p.re)((0,p.geByClass1)("medadd_c_linkwrap_block_button",t)),Nt.shareData.button_text="",Nt.shareData.button_text_lang="",Nt.shareData.button_action="",(0,p.show)((0,p.domByClass)(e,"media_selector"))},cur.updateShareButton=function(e){var t=e.getAttribute("data-button-text"),a=e.getAttribute("data-button-text-lang"),i=e.getAttribute("data-button-action");Nt.shareData.button_text=t,Nt.shareData.button_text_lang=a,Nt.shareData.button_action=i;var n=Nt.sharePreview;return(0,p.val)((0,p.geByClass1)("page_actions_header_inner",n),a),(0,p.val)((0,p.geByClass1)("wall_postlink_preview_btn_label",n),a),!1},cur.setActiveShareButton=function(e){var t=Nt.sharePreview;(e?p.addClass:p.removeClass)((0,p.domPN)((0,p.geByClass1)("wall_postlink_preview_btn_label",t)),"active")},cur.toggleShareButton=function(e){(0,p.hasClass)(e,"active")?(Page.actionsDropdownHide((0,p.domNS)(e),1),cur.setActiveShareButton(!1)):(Page.actionsDropdown((0,p.domNS)(e)),cur.setActiveShareButton(!0))}},showExternalPreview:function(){var e=Nt.shareData;e.images||(e.images=[]);var t,a=[],i=[],n={};(0,w.each)(e.images,(function(t,o){n[o]||(n[o]=!0,a.push(o),e.images_proxy&&i.push(e.images_proxy[t]))})),e.uniqueImagesCount=a.length,e.images=a,e.images_proxy=i;var o=!(!cur.options.share||!cur.options.share.allow_snippet_video);if(t=Xt&&Xt.offsetWidth>550?(0,P.isRetina)()?"/images/post_snippet_image_placeholder_w_2x.png":"/images/post_snippet_image_placeholder_w.png":o?(0,P.isRetina)()?"/images/post_snippet_image_video_placeholder_2x.png":"/images/post_snippet_image_video_placeholder.png":(0,P.isRetina)()?"/images/post_snippet_image_placeholder_2x.png":"/images/post_snippet_image_placeholder.png",e.placeholder_inserted||(e.images.push([(cur.options.share||{}).allow_custom_photo&&!vk.widget?t:""]),e.placeholder_inserted=!0),!e.images||!e.images.length)return cur.shareShowImg=0,void Nt.showPreview();cur.shareShowImg=0,cur.shareShowImg--,Nt.addPreview(!0,!!e.map_data),e.imagesStyles={};var s=!1;cur.shareSetOwnPhoto=function(t){(0,c.curBox)()&&(0,c.curBox)().hide(),Nt.bigLink=!0,e.isPhotoEdit=!0,e.images[e.images.length-1]=[t.photo_url,t.user_id,t.photo_id],cur.shareShowNext(0,1)},cur.shareClearOwnPhoto=function(){e.images[e.images.length-1]=[],cur.shareShowNext(0,0,1)},cur.removeLinkImage=function(t){var a=(0,p.gpeByClass)("medadd_c_linkcon",t);(0,p.addClass)(a,"no_photo"),(0,p.removeClass)(a,"medadd_c_linkimg_big"),(0,p.re)((0,p.gpeByClass)("medadd_c_linkimg_container",t)),(0,p.setStyle)(a,"height",""),e.video_edit&&e.is_vk_mini_app&&(0,p.removeClass)(a,"MiniAppsCoverWrapper--video"),Nt.shareData.noPhoto=!0},Nt.initSnippetButtonFunctions(),cur.shareShowNext=function(a,i,n){var o=(0,P.vkImage)();const r="ads"===cur.module;cur.prevShareShowDir=a,n||(i?cur.shareShowImg=e.images.length-1:a?cur.shareShowImg-=1:cur.shareShowImg+=1);const l=cur.shareShowImg;!e.is_vk_mini_app||-1!==l&&2!==l||r||e.isPhotoEdit||(cur.shareShowImg=a?1:0);var d=(0,P.isArray)(e.images[e.images.length-1])&&!!e.images[e.images.length-1][0];if(!d&&cur.shareShowImg>e.images.length-2)cur.shareShowImg=0;else if(cur.shareShowImg>e.images.length-1)cur.shareShowImg=0;else if(!d&&cur.shareShowImg<0)cur.shareShowImg=e.images.length-2;else if(cur.shareShowImg<0)cur.shareShowImg=e.images.length-1;else if(0==cur.shareShowImg)for(var c=1;c<e.images.length-1;c++){(0,P.vkImage)().src=Nt.shareImgUrl(c)}if(!e.images.length||(0,P.isEmpty)(e.images)||void 0===e.images[cur.shareShowImg])return Nt.showPreview(s),void(s=!0);var _=Nt.shareImgUrl(cur.shareShowImg);_&&(o.src=_),e.video=0,(0,P.isArray)(e.images[cur.shareShowImg])&&e.images[cur.shareShowImg][1]&&e.images[cur.shareShowImg][2]?"video"===e.images[cur.shareShowImg][3]?(e.video=1,e.video_owner_id=e.images[cur.shareShowImg][1],e.video_id=e.images[cur.shareShowImg][2]):(e.user_id=e.images[cur.shareShowImg][1],e.photo_id=e.images[cur.shareShowImg][2],e.share_own_image=!0):(e.user_id=void 0,e.photo_id=void 0,e.share_own_image=!1);var u=null;_&&(cur.imgLoadTimeout=u=setTimeout((function(){!0!==cur.shareImgInterval&&((0,P.isArray)(e.images[cur.shareShowImg])||(e.images.splice(cur.shareShowImg,1),e.images_proxy&&e.images_proxy.length>cur.shareShowImg&&e.images_proxy.splice(cur.shareShowImg,1),cur.shareShowNext()))}),5e3));var h=setTimeout((function(){(0,p.show)("medadd_c_linkimg_loader"),h=null,xt.onChangedSize&&xt.onChangedSize()}),100);cur.showLoaderTimeout=h;var g=function(){if(o.width||o.height||!_){var a=o.width,i=o.height,n="",r="";if(u&&(clearTimeout(u),u=null),h&&(clearTimeout(h),h=null),(0,p.hide)("medadd_c_linkimg_loader"),clearInterval(cur.shareImgInterval),!(0,P.isArray)(e.images[cur.shareShowImg])&&(a<150||i<67)){if(e.images.splice(cur.shareShowImg,1),e.images_proxy&&e.images_proxy.length>cur.shareShowImg&&e.images_proxy.splice(cur.shareShowImg,1),e.images.length)return setTimeout(cur.shareShowNext.pbind(0,0,1),0)}else{var l=a>=532&&i>=235,d=(l||!!e.big_link)&&!e.force_small_link;if(cur.options.share&&cur.options.share.force_big_link&&!l){e.images.splice(cur.shareShowImg,1),e.images_proxy.splice(cur.shareShowImg,1);var c=(cur.options.share||{}).allow_custom_photo||(cur.options.share||{}).require_image;return 0==e.images.length&&c&&e.images.push([c?t:""]),cur.prevShareShowDir||cur.shareShowImg--,void cur.shareShowNext(cur.prevShareShowDir)}Nt.bigLink=d,d?n="width: 100%;":(a>150&&(i=150*i/a,a=150),n="width: "+a+"px; height: "+i+"px;")}e.images.length>1&&(r=""),e.imagesStyles[cur.shareShowImg]='style="'+n+'"'+r,Nt.showPreview(s),s=!0,xt.onAddMediaChange&&xt.onAddMediaChange("share",e.media,e)}};clearInterval(cur.shareImgInterval),cur.shareImgInterval=setInterval(g,300),cur.shareImgInterval2=setTimeout(g,0)},cur.shareShowNext()},uploadShare:function(e){var t=Nt.shareData,i=Nt.sharePreview,n=i.appendChild((0,p.ce)("div",{innerHTML:'<iframe class="upload_frame" name="share_upload_iframe'+Yt+'"></iframe>'})),o=n.appendChild((0,p.ce)("form",{action:"/share.php",method:"post",target:"share_upload_iframe"+Yt})),s=t.images[cur.shareShowImg];(0,w.each)({act:"a_photo",url:t.url,index:Yt,image:s,extra:t.extra||0,hash:vk.ip_h},(function(e,t){o.appendChild((0,p.ce)("input",{type:"hidden",name:e,value:t}))})),a._dG("onUploadDone",(function(t,o){a._dG("onUploadFail",a._dG("onUploadDone",(function(){}))),i.removeChild(n),Nt.shareData=(0,w.extend)(Nt.shareData,{user_id:o.user_id,photo_id:o.photo_id,photo_url:s}),setTimeout(e,0)})),a._dG("onUploadFail",(function(t,o){a._dG("onUploadFail",a._dG("onUploadDone",(function(){}))),i.removeChild(n),Nt.shareData.share_upload_failed=1,setTimeout(e,0)})),cur.shareLastParseSubmitted=(0,P.vkNow)(),o.submit()},setupPostpone:function(e,a,i){var n;n=zt||ea?ea:(0,p.domPN)((0,p.geByClass1)("page_preview_postpone_wrap",t));var o=cur.editingPost&&"wpe_media_preview"==(0,p.domPN)(n).id,s=o||!zt?"":"1px",r=!1,d=`<div class="clear_fix">\n        <div class="fl_l datepicker_item"><input type="hidden" id="postpone_date${Yt}" value="${e.date||""}" /></div>\n        <div class="fl_l datepicker_item medadd_c_timerat">${(0,_e.getLang)("profile_wall_postpone_at")}</div>\n        <div class="fl_l datepicker_item"><input type="hidden" id="postpone_time${Yt}"/></div></div>`;const c=void 0!==e.friends_only;cur.editingPost&&c?(d+='<div class="medadd_c_timersett">',Nt.visibilityAddSelect(e),r=!0):cur.editingPost&&a&&(d+=a,r=!0),Gt||(Nt.postponePreview=n.appendChild((0,p.ce)("div",{className:"medadd_c medadd_c_timer clear_fix"+(r?" medadd_c_nofixed":"")+(Gt?" timer_in_tt":""),innerHTML:d}))),Gt&&(Nt.postponeSubmitWrapper=(0,p.se)(`<div><input type="hidden" id="postpone_date${Yt}" value="${e.date||""}"><input type="hidden" id="postpone_time${Yt}"></div>`),n.appendChild(Nt.postponeSubmitWrapper)),Gt||(Nt.postponePreview.style.height=s);const _=`datepicker-inline-container_${Yt}`,u=ce.FlatButton.render({className:"reset_time_btn",appearance:ce.FlatButtonAppearance.SECONDARY,size:ce.FlatButtonSize.M,children:(0,_e.getLang)("wall_post_timer_reset"),restAttrs:{onclick:`cur.addMedia[${Yt}].onResetPostponeBtnClick(event)`}}),h=`<td class="cal_clear" id="${_}" colspan="7">${u.outerHTML}</td>`;window.stManager.add(["ui_controls.css","ui_controls.js","datepicker.css",window.jsc("web/datepicker.js")],(function(){Nt.postponeDatepicker=new ue.Datepicker("postpone_date"+Yt,{time:"postpone_time"+Yt,width:155,noPast:!0,activePeriod:e.activePeriod,minStep:1,sideTop:cur.oid<0,sideTopOffset:10,inlineTime:Gt,inlineTimeContainerId:_,inlineTimeContainerIdx:Yt,addRows:Gt?"<tr>"+h+"</tr>":null,addRowsM:Gt?'<tr><td class="cal_clear" colspan="7"></td></tr>':null,onUpdate:function(e,t){const a=(0,p.val)("postpone_date"+Nt.lnkId),i=[...arguments,a];xt.onMediaChange&&xt.onMediaChange.apply(xt,i),Nt.postponeDate=a,Gt&&Nt.updatePostponeBtn()},hideAnotherMonth:!1}),o||!zt||Gt||(0,l.animate)(Nt.postponePreview,{height:33},200,(function(){Nt.postponePreview.style.height=""})),Nt.menu.postponeBtn&&Nt.updatePostponeBtn(),(0,P.isFunction)(i)&&i()}))},getPostponeDateString:function(e){if((0,p.val)("postpone_date"+Nt.lnkId)||e)return aa(e)},onResetPostponeBtnClick(e){cur["postPostponeTT"+Nt.lnkId].hide(),null!=Nt.postponeInd&&setTimeout((()=>{Nt.unchooseMedia(Nt.postponeInd)}),ElementTooltip.FADE_SPEED),(0,_.cancelEvent)(e)},resetPostpone:function(e){if(!e)return;e=e+(60*(new Date).getTimezoneOffset()+(0,w.intval)(vk.tz))+(0,w.intval)(vk.dt);const t=new Date(1e3*e);if(!t)return;const a=t.getDate(),i=t.getMonth()+1,n=t.getFullYear(),o=t.getHours(),s=t.getMinutes();Nt.postponeDatepicker.timePicker.hourDD.val(o),Nt.postponeDatepicker.timePicker.minDD.val(s),Nt.postponeDatepicker.setDate(n,i,a,null,o,s)},updatePostponeBtn:function(e,t){if(!Gt)return;const a=(0,p.geByClass1)("post_action_btn_text",Nt.menu.postponeBtn),i=Nt.menu.postponeBtn.querySelector(".post_action_image_btn");let n="";if(e){Nt.menu.postponeBtn.classList.remove("on");const{icon:e}=(0,N.getIcon12Dropdown)();i.innerHTML=e,i.removeAttribute("title"),i.classList.remove("_close"),n=(0,_e.getLang)("wall_publication_now")}else{const e=Nt.getPostponeDateString(t);if(!e)return;Nt.menu.postponeBtn.classList.add("on");let a=i.querySelector(".post_action_image_btn_close_wrapper");if(!a){const{icon:e}=(0,V.getIcon12CancelOutline)();a=document.createElement("span"),a.classList.add("post_action_image_btn_close_wrapper"),a.innerHTML=e,i.innerHTML="",i.appendChild(a),i.title=(0,P.replaceEntities)((0,_e.getLang)("wall_post_timer_reset")),i.classList.add("_close")}n=e}a.innerHTML=n,a.setAttribute("aria-label",(0,P.replaceEntities)(n))},createPrettyCards:function(e){cur.lang=(0,w.extend)(cur.lang||{},e.lang||{});var t=(0,p.se)(e.editor.container_html);Xt.appendChild(t),Nt.prettyCardGallery=new window.PrettyCardGallery(t,e.editor,e.pretty_cards)},visibilityAddSelect:function(e){let t,a=!1,i=!1;e.friends_only?(a=!0,t="name_friends_only"):e.best_friends_only?(i=!0,t="name_best_friends_only"):t="name_no_friends_only";const n=(0,p.se)((0,w.getTemplate)("visibility_access",{link_id:Yt}));if(document.getElementById(n.id))return;(0,p.toggleClass)(n,"on",a),(0,p.toggleClass)(n,"best_friends_only",i);const o=(0,p.geByClass1)(t,n),s="post_visibility_btn",r=+(0,p.domData)(o,"value"),l=(0,p.geByClass1)("post_action_btn_text",n),d=i?(0,_e.getLang)("wall_best_friends_only"):(0,de.getPostTooltipOptionText)(o);if((0,p.val)(l,d),(0,p.attr)(l,"aria-label",d),n){const e=(0,p.geByClass1)("post_action_btn",Ot);e?Ot.insertBefore(n,e):Ot.appendChild(n),Wall.createPostTooltip(s,Yt)}(0,de.updatePostTooltipActionRadioBtn)(o,r,"post_settings_btn"+s+Yt)},donutVisibilityAddSelect(e){const t=(0,I.donutVisibilityInit)(e);t&&t.donutPostSettings&&(Nt.donutPostSettings=t.donutPostSettings)},donutUpdateVisibility(e=void 0){Nt.donutPostSettings&&Nt.donutPostSettings.donutUpdateVisibility(e)},getThumbsEditPreviews:function(){return window.ThumbsEdit&&(ThumbsEdit.cache()["thumbs_edit"+Yt]||{}).previews||[]},destroy:function(){(Zt||{}).sorter&&Zt.sorter.destroy();for(var a=0;a<jt.handlersToClean.length;a++)jt.handlersToClean[a]();(Wt||{}).qsorter&&Wt.qsorter.destroy(),(0,p.removeClass)(t,"media_preview_has_medias"),t&&(t.innerHTML=""),(0,p.show)(e),xt.cleanOnDestroy&&delete cur.addMedia[Yt]},qsorterOpts:function(){return{xsize:Math.floor(Wt.offsetWidth/135),width:135,height:102,onReorder:xt.onAddMediaChange,clsUp:"pam_dpic_up"}},resized:function(){window.ThumbsEdit&&ThumbsEdit.setWide("thumbs_edit"+cur.wallEditComposer.addMedia.lnkId),Wt.qsorter&&(Wt.qsorter.destroy(),window.qsorter.init(Wt,Nt.qsorterOpts()))}},Nt.copyrightInit(),Nt.markAsAdsInit(),Nt.onMediaTypesInit(),cur.addMedia||(cur.addMedia={}),cur.addMedia[Yt]=Nt,xt.onAddMediaChange&&(Nt.onChange=xt.onAddMediaChange),jt.activate(),Nt}function aa(e){e=(e=e||+(0,p.val)("postpone_date"+Nt.lnkId))+(60*(new Date).getTimezoneOffset()+(0,w.intval)(vk.tz))+(0,w.intval)(vk.dt);const t=new Date(1e3*e),a=t.getDate(),i=t.getMonth()+1,n=t.getFullYear();return(0,ue.dateFormat)().replace("{day}",a).replace("{month}",(0,P.winToUtf)((0,he.getLangsForMonth)(i)[1])).replace("{year}",n)+` ${(0,_e.getLang)("profile_wall_postpone_at")} `+`${t.getHours()}:${("0"+t.getMinutes()).slice(-2)}`}}},58771:(e,t,a)=>{a.d(t,{ALLOWED_FILE_TYPES_FOR_PASTE:()=>h,ArticleStatsEvents:()=>r,changeHeightInstagramEmbed:()=>u,getAppropriateImage:()=>l,getUrlParam:()=>p,isArticleEditorAvailable:()=>g,mailruStatsPixel:()=>_,preloadImage:()=>c});var i=a(898848),n=a(575753),o=a(105330),s=a(578438);const r={clickOnVideo:"click_on_video",clickOnAudio:"click_on_audio",clickOnPhoto:"click_on_photo",clickOnExternalLink:"external_link_click",clickOnCarouselNext:"click_on_carousel_next",clickOnCarouselPrev:"click_on_carousel_prev",clickOnMentions:"click_on_mentions",nightModeOn:"night_mod_on",nightModeOff:"night_mod_off",close:"close"};function l(e,t,a){let n=[];if((0,i.each)(e,((e,t)=>{a&&!["w","z","y","x","m","s"].includes(e)||n.push(t)})),!n.length)return[!1];n.sort(((e,t)=>e[1]-t[1])),t*=window.devicePixelRatio>=2?2:1;let o=n[n.length-1];return(0,i.each)(n,((e,a)=>{if(a[1]>=t)return o=a,!1})),o}let d={};function c(e,t){if(!0===d[e])return t&&t(),!0;if(Array.isArray(d[e]))return d[e].push(t),!1;d[e]=[t];const a=new Image;return a.onload=()=>{let t=d[e];d[e]=!0,(0,i.each)(t,((e,t)=>{t&&t()}))},a.src=e,!1}function _(e,t){if((0,i.isObject)(t)&&!(0,i.isEmpty)(t)){let a=`https://vk-callback.go.mail.ru/longread_pxl?action=${e}`;(0,i.each)(t,((e,t)=>{a+=`&${e}=${t}`}));(new Image).src=a}}function p(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");const a=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t||location.search);return null===a?"":decodeURIComponent(a[1].replace(/\+/g," "))}function u(e){if(!/^https?:\/\/([\w-]+\.)*(instagram\.com|instagr\.am)$/.test(e.origin))return;const t=function(e){const t=document.getElementsByTagName("iframe");let a;for(let i=t.length-1;i>=0;i--){const n=t[i];if(n.contentWindow===e.source){a=n;break}}return a}(e);if(t){try{e=JSON.parse(e.data)}catch(e){}"object"==typeof e&&"string"==typeof e.type&&"object"==typeof e.details&&setTimeout((()=>{if("MEASURE"===e.type){const{height:a}=e.details;t.setAttribute("height",a)}}),100)}}const h=s.GO_UPLOAD_FILE_TYPES.join(";");function g(){return!(0,o.isMvk)()&&!(n.browser.msie&&parseInt(n.browser.version)<=11)}},115208:(e,t,a)=>{a.d(t,{NO_POST_ID:()=>n,THUMB_TYPE_ALBUM:()=>l,THUMB_TYPE_DOC:()=>o,THUMB_TYPE_MARKET_ALBUM:()=>d,THUMB_TYPE_PHOTO:()=>s,THUMB_TYPE_VIDEO:()=>r,addThumbsInData:()=>f,deleteThumbInData:()=>w,getAttachmentAction:()=>b,getThumbByIndex:()=>v,getThumbsMediaItems:()=>h,isDocSecondaryEnabled:()=>_,isOnlyNotPhotoThumbData:()=>g,isPrimaryGifAndOtherDocSecondaryEnabled:()=>c,isValidThumbType:()=>p,moveThumbsInData:()=>m});var i=a(540462);const n="no_post_id",o="doc",s="photo",r="video",l="album",d="market_album",c=()=>(0,i.partConfigEnabled)("web_posting_photo_doc_thumb_secondary"),_=()=>(0,i.partConfigEnabled)("web_posting_doc_thumb_secondary");function p(e){const t=[s,r];return(0,i.partConfigEnabled)("attachments_primary_mode_web_feature")||t.push(l,d),_()||t.push(o),!!~t.indexOf(e.toString())}const u=([e,,t])=>e!==o||_()?p(e):"editable"in t&&function(e){return e.editable&&("gif"!==e.ext&&!c()||"gif"===e.ext&&c())}(t),h=e=>e?.filter(u)??[],g=e=>0===e?.filter((e=>e[0]===s)).length;const m=(e,t,a)=>{const i=h(a),n=a.map((e=>p(e[0])?void 0:e)),o=i[e];return i.splice(e,1),i.splice(t,0,o),n.map((e=>e||i.shift()))},v=(e,t)=>h(t)[e],w=(e,t)=>{const a=v(e,t);return t.filter((e=>e!==a))},f=(e,t)=>{const[a,i]=e,n=t.findIndex((([e,t])=>e===a&&t===i));return n<0?t.push(e):t[n]=e,t},b=(e,t,a)=>{if(t)return{href:t,ariaLabel:e,isExternal:a}}},847935:(e,t,a)=>{a.d(t,{POST_PARAM_DONUT_DURATION:()=>i});const i="donut_duration"},89833:(e,t,a)=>{a.d(t,{plaingetCancelable:()=>l,post:()=>r});var i=a(969686),n=a(253003),o=a(416368);const s=3;function r(e,t,a){return t&&(t.im_v=s),new Promise(((i,n)=>{window.ajax.post(e,t,{timeout:a,onDone(){i.apply(null,[[...arguments]])},onFail(){return n.apply(null,[...arguments]),!0}})}))}function l(e,t,a={}){const s=new XMLHttpRequest;return{request:new Promise(((r,l)=>{let d;const c=Date.now(),_=a.timeout||60,p=(0,i.toQueryString)(t);s.onreadystatechange=()=>{if(4==s.readyState){if(window.clearInterval(d),(0,n.processWaf)(s))return;if((0,o.processChallenge)(s))return;s.status>=200&&s.status<300?r([s.responseText,s]):l([s.responseText,s])}};try{s.open("GET",`${e}?${p}`,!0)}catch(e){return l([e,s])}s.send(),d=window.setInterval((()=>{Date.now()-c>1e3*_&&(window.browser.safari&&s.abort(),l(["",{}]),window.clearInterval(d))}),1e3)})),cancel:function(){s.abort()}}}},479652:(e,t,a)=>{a.d(t,{findAllIndices:()=>i});const i=(e,t)=>e.reduce(((e,a,i)=>t(a)?e.concat(i):e),[])},578438:(e,t,a)=>{a.d(t,{DEFAULT_ACCEPT:()=>i,GO_UPLOAD_FILE_TYPES:()=>n,MULTIPLE_BATCH_SIZE:()=>o,MULTIPLE_MAX_COUNT:()=>s});const i=["image/jpeg","image/png","image/gif","image/heic","image/heif","image/webp"],n=["*.jpg","*.JPG","*.jpeg","*.JPEG","*.png","*.PNG","*.gif","*.GIF","*.heic","*.HEIC","*.heif","*.HEIF","*.webp","*.WEBP"],o=5242880,s=5},587258:(e,t,a)=>{a.d(t,{ATTACH_VIEW_EVENTS:()=>i,POSTING_STATS_NAME:()=>n});const i={grid:"grid_mode",carousel:"carousel_mode"},n="posting_web_stats"},33132:(e,t,a)=>{a.d(t,{ErrorEvent:()=>n});var i=a(900181);class n{setMessage(e){this.message=e}setCode(e){this.code=e}getStatValue(){const{message:e,code:t}=this;return{message:e,code:t}}getStatEvent(){const e=this.getStatValue();return e?{type:i.POSTING_TIMELINE_EVENT_TYPES.ERROR,[i.POSTING_TIMELINE_EVENT_TYPES.ERROR]:e}:null}getValue(){const{message:e,code:t}=this;return{message:e,code:t}}}},439667:(e,t,a)=>{a.d(t,{FileUploadingErrorEvent:()=>o});var i=a(55809),n=a(900181);class o{setFileType(e){this.fileType=e}setStartTime(e){this.timeRange.setStartTime(e)}setEndTime(e){this.timeRange.setEndTime(e)}setMessage(e){this.message=e}setCode(e){this.code=e}getStatValue(){const{fileType:e,timeRange:t,message:a,code:i}=this;if(e){const n=t.getStatValue();if(n)return{file_type:e,time_range:n,message:a,code:i}}return null}getStatEvent(){const e=this.getStatValue();return e?{type:n.POSTING_TIMELINE_EVENT_TYPES.FILE_UPLOADING_ERROR,[n.POSTING_TIMELINE_EVENT_TYPES.FILE_UPLOADING_ERROR]:e}:null}getValue(){const{fileType:e,timeRange:t,message:a,code:i}=this;return{fileType:e,timeRange:t,message:a,code:i}}constructor(){this.fileType=null,this.timeRange=new i.TimeRangeValue}}},751281:(e,t,a)=>{a.d(t,{FileUploadingEvent:()=>o});var i=a(55809),n=a(900181);class o{setFileType(e){this.fileType=e}setStartTime(e){this.timeRange.setStartTime(e)}setEndTime(e){this.timeRange.setEndTime(e)}getStatValue(){const{fileType:e,timeRange:t}=this;if(e){const a=t.getStatValue();if(a)return{file_type:e,time_range:a}}return null}getStatEvent(){const e=this.getStatValue();return e?{type:n.POSTING_TIMELINE_EVENT_TYPES.FILE_UPLOADING,[n.POSTING_TIMELINE_EVENT_TYPES.FILE_UPLOADING]:e}:null}getValue(){const{fileType:e,timeRange:t}=this;return{fileType:e,timeRange:t}}constructor(){this.fileType=null,this.timeRange=new i.TimeRangeValue}}},539920:(e,t,a)=>{a.d(t,{PickerAttachmentAttachingEvent:()=>o});var i=a(900181),n=a(55809);class o{setAttachmentType(e){this.attachmentType=e}setStartTime(e){this.timeRange.setStartTime(e)}setEndTime(e){this.timeRange.setEndTime(e)}getStatValue(){const{attachmentType:e,timeRange:t}=this;if(e){const a=t.getStatValue();if(a)return{time_range:a,picker_type:e}}return null}getStatEvent(){const e=this.getStatValue();return e?{type:i.POSTING_TIMELINE_EVENT_TYPES.PICKER_ATTACHMENT_ATTACHING,[i.POSTING_TIMELINE_EVENT_TYPES.PICKER_ATTACHMENT_ATTACHING]:e}:null}getValue(){const{attachmentType:e,timeRange:t}=this;return{attachmentType:e,timeRange:t}}constructor(){this.attachmentType=null,this.timeRange=new n.TimeRangeValue}}},963060:(e,t,a)=>{a.d(t,{PickerOpeningEvent:()=>o});var i=a(55809),n=a(900181);class o{setAttachmentType(e){this.attachmentType=e}setStartTime(e){this.timeRange.setStartTime(e)}setEndTime(e){this.timeRange.setEndTime(e)}getStatValue(){const{attachmentType:e,timeRange:t}=this;if(e){const a=t.getStatValue();if(a)return{time_range:a,picker_type:e}}return null}getStatEvent(){const e=this.getStatValue();return e?{type:n.POSTING_TIMELINE_EVENT_TYPES.PICKER_OPENING,[n.POSTING_TIMELINE_EVENT_TYPES.PICKER_OPENING]:e}:null}getValue(){const{attachmentType:e,timeRange:t}=this;return{attachmentType:e,timeRange:t}}constructor(){this.attachmentType=null,this.timeRange=new i.TimeRangeValue}}},252055:(e,t,a)=>{a.d(t,{PostPublishingErrorEvent:()=>o});var i=a(900181),n=a(55809);class o{setStartTime(e){this.timeRange.setStartTime(e)}setEndTime(e){this.timeRange.setEndTime(e)}setMessage(e){this.message=e}setCode(e){this.code=e}getStatValue(){const{timeRange:e,message:t,code:a}=this,i=e.getStatValue();return i?{time_range:i,message:t,code:a}:null}getStatEvent(){const e=this.getStatValue();return e?{type:i.POSTING_TIMELINE_EVENT_TYPES.POST_PUBLISHING_ERROR,[i.POSTING_TIMELINE_EVENT_TYPES.POST_PUBLISHING_ERROR]:e}:null}getValue(){const{timeRange:e,message:t,code:a}=this;return{timeRange:e,message:t,code:a}}constructor(){this.timeRange=new n.TimeRangeValue}}},335927:(e,t,a)=>{a.d(t,{PostPublishingTimeRangeEvent:()=>o});var i=a(900181),n=a(55809);class o{setStartTime(e){this.value.setStartTime(e)}setEndTime(e){this.value.setEndTime(e)}getStatEvent(){const e=this.value.getStatValue();return e?{type:i.POSTING_TIMELINE_EVENT_TYPES.POST_PUBLISHING_TIME_RANGE,[i.POSTING_TIMELINE_EVENT_TYPES.POST_PUBLISHING_TIME_RANGE]:e}:null}getValue(){return this.value.getValue()}constructor(){this.value=new n.TimeRangeValue}}},55809:(e,t,a)=>{a.d(t,{TimeRangeValue:()=>i});class i{setStartTime(e){null!==this.endTime&&e>this.endTime&&(this.endTime=null),this.startTime=e}setEndTime(e){null!==this.startTime&&this.startTime<=e&&(this.endTime=e)}getStatValue(){return null!==this.startTime&&null!==this.endTime&&this.startTime<=this.endTime?{start_time:this.startTime,end_time:this.endTime}:null}getValue(){const{startTime:e,endTime:t}=this;return{startTime:e,endTime:t}}constructor(){this.startTime=null,this.endTime=null}}},807156:(e,t,a)=>{a.d(t,{ErrorEvent:()=>i.ErrorEvent,FileUploadingErrorEvent:()=>n.FileUploadingErrorEvent,PickerAttachmentAttachingEvent:()=>o.PickerAttachmentAttachingEvent,PostPublishingErrorEvent:()=>s.PostPublishingErrorEvent});var i=a(33132),n=a(439667),o=(a(751281),a(539920)),s=(a(963060),a(252055));a(335927)},36644:(e,t,a)=>{a.d(t,{POSTING_FILE_TYPES:()=>n.POSTING_FILE_TYPES,POSTING_PICKER_TYPES:()=>n.POSTING_PICKER_TYPES,POSTING_TIMELINE_CREATION_ENTRY_POINTS:()=>n.POSTING_TIMELINE_CREATION_ENTRY_POINTS,POSTING_TIMELINE_POST_TYPES:()=>n.POSTING_TIMELINE_POST_TYPES,postingTimelineLogger:()=>o});var i=a(558876),n=a(900181);const o=new i.PostingTimelineLogger},558876:(e,t,a)=>{a.d(t,{PostingTimelineLogger:()=>p});var i=a(305721),n=a(900181),o=a(963060),s=a(751281),r=a(335927),l=a(807156),d=a(428193),c=a(971878),_=a(540462);class p{logStartTimeline(e={}){if(!(0,c.isPostingPerfStatsEnabled)()&&!(0,_.partConfigEnabled)("posting_mvk_perf_stats"))return;if(this.screenStartTime?.time&&(0,d.getCurrentTimeMs)()-this.screenStartTime?.time<=18e7)return;this.resetEventItem();const{isEditing:t,postType:a,creationEntryPoint:i,trackCode:o}=e;this.screenStartTime=(0,d.getCurrentTimeValue)(),this.context={is_editing:t??!1,post_type:a??n.POSTING_TIMELINE_POST_TYPES.REGULAR,creation_entry_point:i??n.POSTING_TIMELINE_CREATION_ENTRY_POINTS.OTHER,track_code:o??""}}logScreenInitialization(){this.screenInitializedTime||(this.screenInitializedTime=(0,d.getCurrentTimeValue)())}logScreenInteractionReady(){this.screenInteractionTime||(this.screenInteractionTime=(0,d.getCurrentTimeValue)())}logScreenClose(){this.finishTimeline(),this.sendCurrentEvent()}logStartSending(){this.currentEvents.postPublishingTimeRange||(this.currentEvents.postPublishingTimeRange=new r.PostPublishingTimeRangeEvent),this.currentEvents.postPublishingTimeRange.setStartTime((0,d.getCurrentTimeMs)())}logSuccessfullySend(){this.currentEvents.postPublishingTimeRange&&(this.currentEvents.postPublishingTimeRange.setEndTime((0,d.getCurrentTimeMs)()),this.events.push(this.currentEvents.postPublishingTimeRange),this.finishTimeline(),this.sendCurrentEvent())}logPostPublishingError({code:e,message:t}){if(!(0,_.partConfigEnabled)("posting_web_perf_stats_post_publishing_enabled"))return;const{postPublishingTimeRange:a}=this.currentEvents;if(!a)return;const i=a.getValue()?.startTime;if(!i)return;const n=new l.PostPublishingErrorEvent;n.setStartTime(i),n.setEndTime((0,d.getCurrentTimeMs)()),n.setCode(e??0),n.setMessage(t??"unknown"),this.events.push(n),delete this.currentEvents.postPublishingTimeRange}finishTimeline(){this.screenCloseTime=(0,d.getCurrentTimeValue)()}logPickerOpening({pickerType:e}){const t=new o.PickerOpeningEvent;t.setStartTime((0,d.getCurrentTimeMs)()),t.setAttachmentType(e),this.currentEvents.pickerOpening=t}logPickerReady(){const{pickerOpening:e}=this.currentEvents;e&&(e.setEndTime((0,d.getCurrentTimeMs)()),this.events.push(e),delete this.currentEvents.pickerOpening)}logStartFileUploading({fileType:e,rawId:t}){this.uploadingFiles[t]||(this.uploadingFiles[t]={startTime:(0,d.getCurrentTimeMs)(),fileType:e})}logFileLoaded({rawId:e}){if(!this.uploadingFiles[e])return;const{startTime:t,fileType:a}=this.uploadingFiles[e],i=new s.FileUploadingEvent;i.setStartTime(t),i.setEndTime((0,d.getCurrentTimeMs)()),i.setFileType(a),delete this.uploadingFiles[e],this.events.push(i)}logFileLoadingError({code:e,message:t,rawId:a}){const i=this.uploadingFiles[a];if(!i)return;const n=i.fileType,o=i.startTime;if(!o||!n)return;const s=new l.FileUploadingErrorEvent;s.setStartTime(o),s.setEndTime((0,d.getCurrentTimeMs)()),s.setFileType(n),e&&s.setCode(e),t&&s.setMessage(t),this.events.push(s),delete this.uploadingFiles[a]}logStartAttaching({pickerType:e}){const t=new l.PickerAttachmentAttachingEvent;t.setStartTime((0,d.getCurrentTimeMs)()),t.setAttachmentType(e),this.currentEvents.pickerAttachmentAttaching=t}logFinishAttaching(){const{pickerAttachmentAttaching:e}=this.currentEvents;e&&(e.setEndTime((0,d.getCurrentTimeMs)()),this.events.push(e),delete this.currentEvents.pickerAttachmentAttaching)}logError({code:e,message:t}){const a=new l.ErrorEvent;e&&a.setCode(e),t&&a.setMessage(t.slice(0,128)),this.events.push(a)}changePostType(e){this.context&&(this.context.post_type=e)}changePostParams(e={}){if(!this.context)return;const{isEditing:t,postType:a,creationEntryPoint:i,trackCode:n}=e,o={};null!=t&&(o.is_editing=t),null!=a&&(o.post_type=a),null!=i&&(o.creation_entry_point=i),null!=n&&(o.track_code=n),this.context={...this.context,...o}}sendCurrentEvent(){const e=this.createStatEventItem();e&&this.postingTimelineCollector.logEvent(e),this.resetEventItem()}createStatEventItem(){const{screenStartTime:e,screenInitializedTime:t,screenInteractionTime:a,screenCloseTime:i,context:n,events:o}=this;if(e&&a&&t&&i&&n){const s=[];o.forEach((e=>{const t=e.getStatEvent();t&&(s.length<50||e instanceof r.PostPublishingTimeRangeEvent)&&s.push(t)}));return{screen_start_time:e,screen_initialized_time:t,screen_interaction_time:a,screen_close_time:i,context:n,events:s}}return null}resetEventItem(){this.screenStartTime=null,this.screenCloseTime=null,this.screenInitializedTime=null,this.screenInteractionTime=null,this.context=null,this.events=[],this.currentEvents={}}constructor(){this.screenStartTime=null,this.screenInteractionTime=null,this.screenInitializedTime=null,this.screenCloseTime=null,this.context=null,this.events=[],this.currentEvents={},this.uploadingFiles={},this.postingTimelineCollector=new i.PostingTimelineCollector}}},900181:(e,t,a)=>{a.d(t,{POSTING_FILE_TYPES:()=>r,POSTING_PICKER_TYPES:()=>s,POSTING_TIMELINE_CREATION_ENTRY_POINTS:()=>n,POSTING_TIMELINE_EVENT_TYPES:()=>o,POSTING_TIMELINE_POST_TYPES:()=>i});const i={REGULAR:"regular",POSTPONED:"postponed",SUGGESTED:"suggested",POST_TEXT_LIVE:"post_text_live",POST_DONUT:"post_donut",EDIT:"edit",COMMENT:"comment",COMMENT_BOARD:"comment_board",COMMENT_MARKET:"comment_market"},n={PROFILE_INPUT:"profile_input",FEED_INPUT:"feed_input",COMMUNITY_INPUT:"community_input",OTHER:"other"},o={FILE_UPLOADING:"file_uploading",FILE_UPLOADING_ERROR:"file_uploading_error",PICKER_OPENING:"picker_opening",PICKER_ATTACHMENT_ATTACHING:"picker_attachment_attaching",POST_PUBLISHING_TIME_RANGE:"post_publishing_time_range",POST_PUBLISHING_ERROR:"post_publishing_error",ERROR:"error"},s={ALBUM:"album",ARTICLE:"article",DOCUMENT:"document",MARKET:"market",MUSIC:"music",PLACE:"place",PHOTO:"photo",PHOTO_VK:"photo_vk",POLL:"poll",SERVICE:"service",TAKE_PHOTO:"take_photo",VIDEO:"video",VIDEO_VK:"video_vk"},r={PHOTO:"photo",VIDEO:"video",DOCUMENT:"document"}},428193:(e,t,a)=>{a.d(t,{getCurrentTimeMs:()=>i,getCurrentTimeValue:()=>n});const i=()=>1e3*Date.now(),n=()=>({time:i()})},971878:(e,t,a)=>{a.d(t,{isPostingPerfStatsEnabled:()=>l,isPostingStatsEnabled:()=>s,sendPostingEvent:()=>r});var i=a(636576),n=a(587258),o=a(540462);const s=()=>(0,o.partConfigEnabled)("posting_web_input_stats"),r=e=>{s()&&(0,i.statlogsValueEvent)(n.POSTING_STATS_NAME,"",e)},l=()=>(0,o.partConfigEnabled)("posting_web_perf_stats")},305721:(e,t,a)=>{a.d(t,{PostingTimelineCollector:()=>o});var i=a(317216),n=a(314309);class o{logEvent(e){const t={...this.productionStatCollector.getBaseEvent(),type:i.ActionProductionStatEventTypes.TYPE_POSTING_TIMELINE,[i.ActionProductionStatEventTypes.TYPE_POSTING_TIMELINE]:e};this.productionStatCollector.logEvent(t)}constructor(){this.productionStatCollector=new n.ProductionStatCollector}}},723294:(e,t,a)=>{a.d(t,{ACTION_BUTTON_DISABLED:()=>n,ACTION_BUTTON_ID:()=>i,ATTACHMENT_PRIMARY_MODE:()=>o});const i="primary_attachments_view_btn",n="post_attachments_view_disabled",o={grid:"grid",carousel:"carousel"}},632683:(e,t,a)=>{a.d(t,{getLangsForMonth:()=>n});var i=a(866467);function n(e){switch(e){case 1:return[(0,i.getLang)("Month1"),(0,i.getLang)("Month1_of"),(0,i.getLang)("month1_of")];case 2:return[(0,i.getLang)("Month2"),(0,i.getLang)("Month2_of"),(0,i.getLang)("month2_of")];case 3:return[(0,i.getLang)("Month3"),(0,i.getLang)("Month3_of"),(0,i.getLang)("month3_of")];case 4:return[(0,i.getLang)("Month4"),(0,i.getLang)("Month4_of"),(0,i.getLang)("month4_of")];case 5:return[(0,i.getLang)("Month5"),(0,i.getLang)("Month5_of"),(0,i.getLang)("month5_of")];case 6:return[(0,i.getLang)("Month6"),(0,i.getLang)("Month6_of"),(0,i.getLang)("month6_of")];case 7:return[(0,i.getLang)("Month7"),(0,i.getLang)("Month7_of"),(0,i.getLang)("month7_of")];case 8:return[(0,i.getLang)("Month8"),(0,i.getLang)("Month8_of"),(0,i.getLang)("month8_of")];case 9:return[(0,i.getLang)("Month9"),(0,i.getLang)("Month9_of"),(0,i.getLang)("month9_of")];case 10:return[(0,i.getLang)("Month10"),(0,i.getLang)("Month10_of"),(0,i.getLang)("month10_of")];case 11:return[(0,i.getLang)("Month11"),(0,i.getLang)("Month11_of"),(0,i.getLang)("month11_of")];case 12:return[(0,i.getLang)("Month12"),(0,i.getLang)("Month12_of"),(0,i.getLang)("month12_of")]}}},320432:(e,t,a)=>{a.d(t,{ATTACH_DATA_DONUT_DURATION:()=>i,DONUT_DURATION_DEFAULT:()=>o,MEDIA_TYPE_DONUT_DURATION:()=>n});const i="donut_duration",n="donut_duration",o=-1},903700:(e,t,a)=>{a.d(t,{donutVisibilityInit:()=>f});var i=a(26023),n=a(754866),o=a(593159),s=a(318227),r=a(199217),l=a(237041),d=a(320432),c=a(972332),_=a(683234),p=a(790420),u=a(298077),h=a(36644),g=a(971878);class m extends Error{}const v="post_settings_btn";class w{setPostDonutOnly(){this.setDonutDuration(d.DONUT_DURATION_DEFAULT)}donutUpdateVisibility(e){this.actionsUpdateVisibilityView(e)}getEmitter(){return this.addMedia.emitter}tooltipVisibilityInitView(){const e=this.getLnkId(),t=(0,o.getTemplate)("visibility_access_donut",{link_id:e});if(!t)throw new m;if(this.visibilityTooltipEl=(0,n.se)(t),!this.visibilityTooltipEl)throw new m;(0,r.domInsertChildAfterOtherChild)(this.visibilityTooltipEl,this.containerEl),this.tooltipDonutVisibility=(0,s.createPostTooltip)(w.TOOLTIP_VISIBILITY_NAME,e)?.toooltip,(0,i.default)(this.containerEl,w.TOOLTIP_VISIBILITY_OPTION_SELECTOR,"click",this.chooseDonutVisibility)}tooltipDurationInitView(){const e=this.getLnkId(),t=(0,o.getTemplate)("donut_duration_select",{link_id:e});if(!t)throw new m;if(this.durationTooltipEl=(0,n.se)(t),!this.durationTooltipEl)throw new m;(0,r.domInsertChildAfterOtherChild)(this.durationTooltipEl,this.containerEl,this.visibilityTooltipEl),this.tooltipDonutDuration=(0,s.createPostTooltip)(w.TOOLTIP_DURATION_NAME,e)?.toooltip,(0,i.default)(this.containerEl,w.TOOLTIP_DURATION_OPTION_SELECTOR,"click",this.chooseDonutDuration)}getLnkId(){return this.addMedia.lnkId}static getEventParams(e){const t=e.delegateTarget||e.target;return!(0,c.checkEvent)(e)&&t instanceof HTMLElement&&(0,l.getActionData)(t)?.actionParams}setDonutDuration(e){w.isDurationValueEmpty(e)?this.addMedia.unchooseMediaForType(d.MEDIA_TYPE_DONUT_DURATION):this.addMedia.addOrUpdateChosenMedia(d.MEDIA_TYPE_DONUT_DURATION,"",{[d.ATTACH_DATA_DONUT_DURATION]:e})}static isDurationValueEmpty(e){return null===e}getTooltipVisibilityActiveElement(e){const t=null!==e?d.DONUT_DURATION_DEFAULT:null;return this.containerEl.querySelector(`${w.TOOLTIP_VISIBILITY_OPTION_SELECTOR}[data-value="${t}"]`)}getTooltipDurationActiveElement(e){return this.containerEl.querySelector(`${w.TOOLTIP_DURATION_OPTION_SELECTOR}[data-value="${e}"]`)}getActiveDurationOption(){const e=this.addMedia.findChosenMedia(d.MEDIA_TYPE_DONUT_DURATION),t=e?(0,p.getDurationFromMediaItem)(e):void 0;return void 0!==t?t:null}tooltipVisibilityUpdateView(){const e=this.getActiveDurationOption(),t=String(this.getLnkId())||"",a=this.getTooltipVisibilityActiveElement(e),i=!w.isDurationValueEmpty(e),r=this.visibilityTooltipEl;(0,s.updatePostTooltipActionRadioBtn)(a,e,`${v}${w.TOOLTIP_VISIBILITY_NAME}${t}`);const l=r?.querySelector(".post_action_btn_text"),d=a&&(0,s.getPostTooltipOptionText)(a)||"";l&&d&&(l.innerHTML=d,l.setAttribute("aria-label",(0,o.replaceEntities)(d))),(0,n.toggleClass)(r,"on",i)}tooltipDurationUpdateView(){const e=this.getActiveDurationOption(),t=String(this.getLnkId())||"",a=this.getTooltipDurationActiveElement(e),i=!w.isDurationValueEmpty(e),l=i&&!!e&&(0,r.isDonutDurationFinite)(e),d=this.durationTooltipEl;(0,s.updatePostTooltipActionRadioBtn)(a,e,`${v}${w.TOOLTIP_DURATION_NAME}${t}`);const c=d?.querySelector(".post_action_btn_text"),p=l?a&&(0,s.getPostTooltipOptionText)(a):(0,n.domData)(c,"empty"),u=a?p:"";c&&u&&(c.innerHTML=u,c.setAttribute("aria-label",(0,o.replaceEntities)(u))),(0,n.toggleClass)(d,"on",l),(0,n.toggleClass)(d,"visible",i);const h=this.addMedia.markAsAdsGetCheckboxEl();h&&(0,_.disable)(h,i)}actionsUpdateVisibilityView(e){const t=e??this.getPostboxForNewPost(),a=(0,p.isDonutPostSettingVisible)(t,this.addMedia);return this.visibilityTooltipEl&&this.durationTooltipEl?((0,n.toggleClass)(this.containerEl,"post_actions_btns--donut-actions-hidden",!a),a):a}getPostboxForNewPost(){return"post_actions_btns"===this.containerEl.id?document.querySelector("#submit_post_box"):null}constructor(e,t){this.containerEl=e,this.addMedia=t,this.updateView=()=>{if(!this.isInitialized)return;this.actionsUpdateVisibilityView()&&(this.tooltipVisibilityUpdateView(),this.tooltipDurationUpdateView())},this.chooseDonutVisibility=e=>{const t=w.getEventParams(e);if(!t)return!1;this.tooltipDonutVisibility?.hide?.(),this.setDonutDuration(t.donut_duration),(0,g.isPostingPerfStatsEnabled)()&&window.Wall?.postingTimelineLogger?.changePostType(h.POSTING_TIMELINE_POST_TYPES.POST_DONUT)},this.chooseDonutDuration=e=>{const t=w.getEventParams(e);if(!t)return!1;this.tooltipDonutDuration?.hide?.(),this.setDonutDuration(t.donut_duration)};try{this.tooltipVisibilityInitView(),this.tooltipDurationInitView(),this.isInitialized=!0,this.updateView();const e=this.getEmitter();e&&e.on(this.addMedia.eventTypes.mediaUpdate,this.updateView)}catch(e){e instanceof m||(0,u.logError)(e),console.error(e),this.isInitialized=!1}}}w.TOOLTIP_DURATION_NAME="post_donut_duration_btn",w.TOOLTIP_DURATION_OPTION_SELECTOR='[data-onclick="toggleDonutPostDuration"]',w.TOOLTIP_VISIBILITY_NAME="donut_visibility_btn",w.TOOLTIP_VISIBILITY_OPTION_SELECTOR='[data-onclick="toggleDonutPostVisibility"]';const f=e=>{const{actionsEl:t,addMedia:a}=e;if(!(t instanceof Element))return;const i=new w(t,a);return{donutPostSettings:i.isInitialized?i:void 0}}},367105:(e,t,a)=>{a.d(t,{ATTACH_DATA_DONUT_DURATION:()=>i.ATTACH_DATA_DONUT_DURATION,MEDIA_TYPE_DONUT_DURATION:()=>i.MEDIA_TYPE_DONUT_DURATION,donutVisibilityInit:()=>n.donutVisibilityInit,fieldValueIsDonutOnlyPost:()=>o.fieldValueIsDonutOnlyPost,getDonutPostParams:()=>o.getDonutPostParams,getPostParamsFromDurationMedia:()=>o.getPostParamsFromDurationMedia,isPaidAttachPicked:()=>o.isPaidAttachPicked});var i=a(320432),n=a(903700),o=a(375222)},199217:(e,t,a)=>{a.d(t,{domInsertChildAfterOtherChild:()=>o,isDonutDurationFinite:()=>n});var i=a(754866);const n=e=>e>0,o=(e,t,a)=>{a?(0,i.domInsertAfter)(e,a):t&&(t.firstChild?(0,i.domInsertBefore)(e,t.firstChild):e&&t.appendChild(e))}},237041:(e,t,a)=>{a.d(t,{getActionData:()=>n});var i=a(581197);const n=e=>{const t=(0,i.getJsonDataValue)(e,"data-action-params");if("object"==typeof t||null===t)return{actionParams:t}}},375222:(e,t,a)=>{a.d(t,{fieldValueIsDonutOnlyPost:()=>d,getDonutPostParams:()=>c,getPostParamsFromDurationMedia:()=>r,isPaidAttachPicked:()=>_});var i=a(847935),n=a(320432),o=a(449299),s=a(790420);const r=e=>{const t=(0,s.getDurationFromMediaItem)(e);return void 0!==t?{[i.POST_PARAM_DONUT_DURATION]:t}:void 0},l=e=>{const t=e.findChosenMedia&&e.findChosenMedia(n.MEDIA_TYPE_DONUT_DURATION);return(0,s.getDurationFromMediaItem)(t)},d=(e,t)=>void 0!==(t&&l(t))&&(0,s.isDonutPostSettingVisible)(e,t)?1:0,c=(e,t)=>{if(!e||!t)return;const a=l(t)||n.DONUT_DURATION_DEFAULT;return{[i.POST_PARAM_DONUT_DURATION]:a,mark_as_ads:0}},_=(e,t)=>{const a=e.getMedias&&e.getMedias();return!!a&&a.some((e=>((e,t)=>{switch(e[0]){case"article":{const a=e?.[5],i=a?.owner_id;return Boolean(i===t&&a?.is_donut)}case"podcast":{const a=e?.[5]?.audio,i=a?.[12],n=a?.[1];return Boolean(n===t&&(0,o.parseJSON)(i).paid)}default:return!1}})(e,t)))}},790420:(e,t,a)=>{a.d(t,{getDurationFromMediaItem:()=>l,isDonutPostSettingVisible:()=>r});var i=a(683234),n=a(754866),o=a(320432),s=a(810068);const r=(e,t)=>{const a=(e=>{if(!(e instanceof Element)||"submit_post_box"!==e.id)return!0;const t=parseInt((0,n.domData)(e,"from-oid"))||void 0;return!!t&&s.Ranges.isGroupId(t)})(e),o=(e=>{const t=e?.markAsAdsGetCheckboxEl?.();return!t||!(0,i.isChecked)(t)})(t);return a&&o},l=e=>{const t=e?.[5]?.[o.ATTACH_DATA_DONUT_DURATION];return void 0!==t?t:void 0}},806917:(e,t,a)=>{a.d(t,{ACTION_BUTTON_DISABLED:()=>o,ACTION_BUTTON_ID:()=>n,ORIGINAL_RATIO_CLASS_NAME:()=>d,RATIO_TOOLTIP_WIDTH:()=>r,RatioShowValue:()=>s,STORAGE_HINT_NAME:()=>l});var i=a(807775);const n="carousel_ratio_btn",o="post_carousel_ratio_disabled",s={[i.Ratio.WIDE]:"4:3",[i.Ratio.SQUARE]:"1:1",[i.Ratio.LOWER]:"4:5",[i.Ratio.HIGH]:"3:4",[i.Ratio.HIGHER]:"2:3",[i.Ratio.WIDER]:"16:9"},r="110px",l="posting_carousel_ratio_hint_show_count",d="CarouselRatio__original"},700230:(e,t,a)=>{a.d(t,{changeCropDataFromArrayToObject:()=>m,changeCropDataFromArrayToString:()=>v,changeCropDataFromObjectToArray:()=>g,getNearestRatioForThumb:()=>p,getNearestRatioForThumbWithCorridor:()=>u,isCarouselCorridorEnabled:()=>s,isCarouselCropEnabled:()=>w,isFirstRatioNotEquelAllRatioThumbs:()=>h,ratioValues:()=>r});var i=a(807775),n=a(540462),o=a(351118);const s=()=>(0,n.partConfigEnabled)("con_posting_carousel_corridor_web"),r=s()?[i.Ratio.HIGHER,i.Ratio.HIGH,i.Ratio.LOWER,i.Ratio.SQUARE,i.Ratio.WIDE,i.Ratio.WIDER]:[i.Ratio.HIGH,i.Ratio.SQUARE,i.Ratio.WIDE,i.Ratio.WIDER],l=Math.max(...r),d=Math.min(...r),c=(e,t=!1)=>{const a=e[2].editable?.sizes,n=a&&Object.values(a).map((([e,t,a])=>({url:e,width:t,height:a}))),s=n&&(0,o.getPhotoSize)(n,Number.MAX_VALUE),r=s&&s.width/s.height,l=e[2].crop_data;return!t&&l&&l[2]/l[3]||r||i.Ratio.WIDE},_=e=>r.reduce(((t,a)=>Math.abs(a-e)<Math.abs(t-e)?a:t)),p=(e,t=!1)=>{const a=c(e,t);return _(a)},u=(e,t=!1)=>{const a=c(e,t),i=_(a);return a>l||a<d||Math.abs(a-i)<.01?i:a},h=e=>{if(!e.length)return!1;const t=((e,t=!1)=>{const a={};return r.forEach((e=>a[e]=0)),e.forEach((e=>{a[p(e,t)]++})),Number(Object.entries(a).reduce(((e,t)=>t[1]>e[1]?t:e))[0])})(e,!0);return t!==p(e[0])&&t},g=e=>[e.x,e.y,e.width,e.height],m=e=>({x:e[0],y:e[1],width:e[2],height:e[3]}),v=e=>e.map((e=>Math.floor(Math.max(e,0)))).join(","),w=()=>(0,n.partConfigEnabled)("web_posting_carousel_crop")},699937:(e,t,a)=>{a.d(t,{showProductAttachModal:()=>s});var i=a(474848),n=a(604743);const o=(0,a(427984).asyncComponent)((()=>Promise.all([a.e(91498),a.e(89631),a.e(20157),a.e(69221),a.e(7699),a.e(96649),a.e("langs/web/ecomm_market_product_attach")]).then(a.bind(a,843067))),(({ProductAttachModalLegacy:e})=>e));function s(e){(0,n.showMessageBoxModalSuspense)((t=>(0,i.jsx)(o,{...t,...e})),{width:558})}},26023:(e,t,a)=>{a.d(t,{default:()=>o});const i=new WeakMap;function n(e,t,a,n){var o,s;if(!e&&!i.has(t))return!1;const r=null!==(o=i.get(t))&&void 0!==o?o:new WeakMap;if(i.set(t,r),!e&&!i.has(t))return!1;const l=null!==(s=r.get(a))&&void 0!==s?s:new Set;r.set(a,l);const d=l.has(n);return e?l.add(n):l.delete(n),d&&e}const o=function e(t,a,i,o,s){if("string"==typeof t&&(t=document.querySelectorAll(t)),"function"!=typeof t.addEventListener){const n=Array.prototype.map.call(t,(t=>e(t,a,i,o,s)));return{destroy(){n.forEach((e=>e.destroy()))}}}const r=t,l=Boolean("object"==typeof s?s.capture:s),d=e=>{const t=e.target.closest(a);t&&(e.delegateTarget=t,e.currentTarget.contains(e.delegateTarget)&&o.call(r,e))},c=JSON.stringify({selector:a,type:i,capture:l}),_=n(!0,r,o,c),p={destroy(){r.removeEventListener(i,d,s),n(!1,r,o,c)}};return _||r.addEventListener(i,d,s),p}}}])}if("undefined"!=typeof window&&window.partConfigEnabled?.("static_loading_execute_errors"))try{e(),window.stManager?.done?.("dist/web/chunks/aef0f4be.cce5535e.js")}catch(e){throw window.stManager?.fail?.("dist/web/chunks/aef0f4be.cce5535e.js",e),e}else e(),"undefined"!=typeof window&&window.stManager?.done?.("dist/web/chunks/aef0f4be.cce5535e.js");